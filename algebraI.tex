\documentclass[12pt,a4paper]{scrartcl}

\usepackage{includes}
\usepackage{shortcuts}
\usepackage{numbering}

%---------------------------%
% Franzen-spezifisches Zeug %
%---------------------------%

% numbering
\counterwithin{subsection}{section}
\renewcommand{\thesection}{\arabic{section}}
\setcounter{section}{-1}
\setlist[enumerate,1]{label=\textup{\roman*)}}
\setlist[enumerate,2]{label=\textup{\alph*)}}

\counterwithout{thmcounter}{subsection}
\counterwithout{defcounter}{subsection}
\counterwithout{bspcounter}{subsection}
\counterwithin{thmcounter}{section}
\counterwithin{defcounter}{section}
\counterwithin{bspcounter}{section}
\renewcommand{\thethmcounter}{\arabic{section}.\arabic{thmcounter}}
\renewcommand{\thedefcounter}{\arabic{section}.\arabic{defcounter}}
\renewcommand{\thebspcounter}{\arabic{section}.\arabic{bspcounter}}

\makeatletter
\let\c@thmcounter=\c@defcounter
\let\c@bspcounter=\c@defcounter
\makeatother

\theoremstyle{cplain}
\newtheorem{prop}[thmcounter]{Proposition}
\crefname{prop}{Proposition}{Propositionen}

\theoremstyle{cdef}
\newtheorem{beme}[thmcounter]{Bemerkung}
\crefname{beme}{Bemerkung}{Bemerkungen}

% bibliography
\usepackage[backend=biber,sorting=none,style=alphabetic]{biblatex}
\addbibresource{literatur.bib}


\author{}
\title{Algebra I}
\subtitle{Sommersemester 2018}
\date{\lastcompiled}

\begin{document}
\maketitle
\tableofcontents
\newpage

\noindent
Dies ist eine Mitschrift der Vorlesung \enquote{Algebra I} von Dr. Hans Franzen an der Universität Bonn, gehalten im Sommersemester 2018.

\bigskip

\noindent
Vorlesungswebsite:\\
\url{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1.htmpl}

\nocite{atiyah-macdonald}
\nocite{eisenbud}
\nocite{matsumura}
\nocite{ulrich-goertz}
\printbibliography[notkeyword=moduln-hir,title=Allgemeine Literatur]

\nocite{lang}
\nocite{hungerford}
\printbibliography[keyword=moduln-hir,title=Literatur zu \cref{sec:moduln ueber hir}]


\newpage

\lecture{9. April 2018}

\section{Motivation}
Sei $k=\ol k$ (algebraisch abgeschlossener Körper). Seien $f_1, \dots f_m \in k[t_1,\dots t_n]$. Dann sind \[ \Z(f_1,\dots, f_m) := \{x=(x_1,\dots, x_n) \in k^n \mid f_i(x)=0 \text{ für alle $1\le i \le m$} \}\] affine algebraische Varietäten.


\emph{Beispiel.} Sei $k=\IC$, $n=2$ und $m=1$. Wir erhalten die folgenden Bilder:
\begin{figure}[H]
    \begin{subfigure}[b]{.49\linewidth}
        \centering
        \begin{tikzpicture}
            \begin{axis}[width=7cm,xmax=1,xmin=-1,ymax=1,ymin=-1,axis equal,xtick={-1,0,1},ytick={-1,0,1}]
                \draw (axis cs:0,0) circle[radius=1];
            \end{axis}
        \end{tikzpicture}
        \caption*{$f=x_1^2+x_2^2-1$}
    \end{subfigure}
    \begin{subfigure}[b]{.49\linewidth}
        \centering
        \begin{tikzpicture}
            \begin{axis}[width=7cm,xmax=1,xmin=-1,ymax=1,ymin=-1,axis equal,xtick={-1,0,1},ytick={-1,0,1}]
                \addplot[black,samples=100,domain=0:1] {x^(3/2)};
                \addplot[black,samples=100,domain=0:1] {-x^(3/2)};
            \end{axis}
        \end{tikzpicture}
        \caption*{$f=x_1^3-x_2^2$}
    \end{subfigure}
\end{figure}
\begin{figure}[H]
    \begin{subfigure}[b]{.49\linewidth}
        \centering
        \begin{tikzpicture}
            \begin{axis}[width=7cm,xmax=1,xmin=-1,ymax=1,ymin=-1,axis equal,xtick={-1,0,1},ytick={-1,0,1}]
                \addplot[black] coordinates{(-2,0) (2,0)};
                \addplot[black] coordinates{(0,-2) (0,2)};
            \end{axis}
        \end{tikzpicture}
        \caption*{$f=x_1\cdot x_2$}
    \end{subfigure}
    \begin{subfigure}[b]{.49\linewidth}
        \centering
        \begin{tikzpicture}
            \begin{axis}[width=7cm,xmax=1,xmin=-1,ymax=1,ymin=-1,axis equal,xtick={-1,0,1},ytick={-1,0,1}]
                \addplot[black] coordinates{(-2,0) (2,0)};
                \addplot[black] coordinates{(0,-2) (0,2)};
            \end{axis}
        \end{tikzpicture}
        \caption*{$f=x_1^{21}\cdot x_2^{138}$}
    \end{subfigure}
\end{figure}

In der algebraischen Geometrie betrachten wir die folgende Beziehung:
\begin{eqnarray*}
    \text{Affine Varietät $X$} & \longleftrightarrow & \text{Ring $\A(X)$} \\
    \text{Studium der Geometrie von $X$} & \cong & \text{Studium des Ringes $\A(X)$}
\end{eqnarray*}
Hierzu ist das Studium von kommutativer Algebra notwendig.
\newpage

\section{Primideale und maximale Ideale}
\subsection{Grundbegriffe}
\begin{konv}
	In der gesamten Vorlesung sind Ringe immer kommutativ und haben Eins. Ringhomomorphismen erhalten die Eins.
\end{konv}
\begin{defi}
	Sei $A$ ein Ring und $I\subsetneq A$ ein Ideal.
	\begin{enumerate}
        \item $I$ heißt Primideal, falls \begin{enumerate}
            \item $ab \in A \setminus I$ für alle $a,b \in A \setminus I$ gilt, oder äquivalent
            \item $\fak A I$ ein Integritätsbereich ist.
        \end{enumerate}
        \item $I$ heißt maximales Ideal, falls \begin{enumerate}
            \item für jedes Ideal $J \subsetneq A$ aus $I \subseteq J$ bereits $I=J$ folgt, oder äquivalent
            \item $\fak A I$ ein Körper ist.
        \end{enumerate}
		\item $\Spec A := \{\fp \mid \fp \subsetneq A \text{ Primideal}\}$
		\item $\Max A:=\{\fm \mid \fm \subsetneq A \text{ maximales Ideal}\}$
	\end{enumerate}
\end{defi}
\begin{defi} Sei $f: A \to B$ ein Ringhomomorphismus.
	\begin{enumerate}
		\item Sei $J \subseteq B$ ein Ideal. Dann ist $J \cap A:=f^{-1}(J)$ ein Ideal von $A$, genannt \emph{Kontraktion}. Ist $J$ ein Primideal, so ist $J \cap A$ ebenfalls ein Primideal.
		\item Sei $I \subseteq A$ ein Ideal. Dann ist $f(I)$ nicht notwendigerweise ein Ideal. Setze $I \cdot B := \left( f(I) \right)$, das von $f(I)$ erzeugtes Ideal. Wir nennen dieses \emph{Ausdehnung} von $I$.
	\end{enumerate}
\end{defi}
\begin{bem}
	Es kann sein, dass $I \in \Max A$, aber $I \cdot B \notin \Spec B$. Sei dazu $A=\IZ$ und $B=\IZ[i]$. Sei $I=(2) \in \Max(\IZ)$, aber $I \cdot B = (2) \notin \Spec \IZ[i]$, da $2=(1-i)(1+i)$ ist.
\end{bem}
\begin{satz} \label{thm:existenz maximaler ideale}
	Sei $A$ ein Ring und $I \subsetneq A$ ein Ideal. Dann existiert ein $\fm \in \Max A$ mit $I \subseteq \fm$.
	\begin{proof}
		Siehe Vorlesung Einführung in die Algebra, Satz 9.1, oder \cite[Theorem 1.3]{atiyah-macdonald}.
	\end{proof}
\end{satz}
\begin{kor} \label{kor:einheiten und maximale ideale}
    Sei $A$ ein Ring, bez. $A^{\times}=\{\text{Einheiten von }A\}$. Dann gilt \[A^{\times}=A \setminus \bigcup_{\mathclap{\fm \in \Max A}} \fm.\]
	\begin{proof}
		Ist $a \in A^{\times}$, so gilt $(a)=(1)=A$ und damit $a \notin \fm$ für alle $\fm \in \Max A$.

		Sei $a \notin \fm$ für alle $\fm \in \Max A$. Dann ist $(a) \nsubseteq \fm$ für alle $\fm \in \Max A$; es folgt also $(a)=A=(1)$ mit \cref{thm:existenz maximaler ideale} und damit $a \in A^{\times}$.
	\end{proof}
\end{kor}
\subsection{Lokale Ringe}
\begin{defi} \label{def1.5}
	Sei $A$ ein Ring. $A$ heißt \emph{lokal}, falls $A$ genau ein maximales Ideal $\fm$ hat (d.h. $\Max A = \{\fm\}$).
\end{defi}
\begin{lem} \label{lem:lokale ringe}
	Sei $A$ ein Ring.
	\begin{enumerate}
		\item \label{lem:lokale ringe:i} Sei $I \subsetneq A$ ein Ideal. Dann sind äquivalent:
		      \begin{enumerate}
			      \item $\Max A = \{I\}$ \label{lem:lokale ringe:i:a}
			      \item $A \setminus I \subseteq A^{\times}$ \label{lem:lokale ringe:i:b}
			      \item $A \setminus I = A^{\times}$ \label{lem:lokale ringe:i:c}
		      \end{enumerate}
		\item \label{lem:lokale ringe:ii} Sei $\fm \in \Max A$. Falls $1+x \in A^{\times}$ für alle $x \in \fm$ gilt, so ist $\Max A=\{ \fm \}$.
	\end{enumerate}
    \begin{proof}
        \leavevmode
		\begin{enumerate}[label=\ref{lem:lokale ringe:\roman*}]
			\item \enquote{\ref{lem:lokale ringe:i:a} $\Rightarrow$ \ref{lem:lokale ringe:i:b}} folgt aus \cref{kor:einheiten und maximale ideale}. Für \enquote{\ref{lem:lokale ringe:i:b} $\Rightarrow$ \ref{lem:lokale ringe:i:a}} sei $J \subsetneq A$ ein Ideal. Dann liegt $J$ in $I$, und es folgt $I \in \Max A$ mit $\Max = \{I\}$.
			\item Sei $b \in A \setminus \fm$. Es ist $b \in A^{\times}$ zu zeigen. Da $\fm \in \Max A$, gilt $(b)+\fm=A$, es existieren folglich $a \in A, x\in \fm$ mit $ab+x=1$. Daraus folgt $ab=1-x \in A^{\times}$ und dann $b \in A^{\times}$.
            \qedhere
        \end{enumerate}
	\end{proof}
\end{lem}

\begin{bsp}
	\begin{enumerate}
        \leavevmode
		\item[0)] Körper sind lokale Ringe.
        \item Sei $(A,\fm)$ ein lokaler Ring. Dann ist $A\llbracket t \rrbracket$ ein lokaler Ring. Dabei ist \[ A\llbracket t \rrbracket=\left\{\sum_{i=0}^\infty a_it^i \,\middle|\, a_i \in A\right\} \] der Ring der formalen Potenzreihen mit kanonischer Addition und Multiplikation. Betrachte die Komposition $A\llbracket t \rrbracket \to A \to \fak A\fm$ gegeben durch $\phi=\can \circ \ev_0$. Diese bildet surjektiv auf den Körper $\fak A\fm$ ab, also ist $\ker \phi \in \Max A\llbracket t \rrbracket$.
        
        Sei $f \in \ker \phi$ und betrachte $1+ f$. Aus $f \in \ker \phi$ folgt $f=\sum_{i=0}^\infty a_it^i$ mit $a_0 \in \fm$. Wir wollen ein $g \in A\llbracket t\rrbracket$ mit $g=\sum_{i=0}^\infty b_it^i$ mit $(1+f)g=1$ finden, d.h. $(1+a_0)b_0$ und $(1+a_0)b_n+a_1b_{n-1}+\dots a_nb_0$ für alle $n > 0$. Erstere Gleichung ist lösbar, da $a_0 \in m$ liegt und damit $1+a_0 \in A^{\times}$ folgt. Wir führen nun eine Induktion nach $n$. Nehme an, dass $b_0, \dots b_{n-1}$ bereits bekannt sind. Dann folgt, dass $b_n=-(1+a_0)^{-1}(a_1b_{n-1}+\dots+a_nb_0)$. Nach \cref{lem:lokale ringe} ist $A\llbracket t \rrbracket$ lokal mit dem maximalen Ideal $(t)+\fm$. Der Residuenkörper ist $\fak{A\llbracket T\rrbracket}{((t)+\fm)} \cong \fak A\fm$.

        Spezialfall: $k\llbracket t_1,\dots t_n\rrbracket := k\llbracket t_1,\dots,t_{n-1}\rrbracket\llbracket t_n\rrbracket$ lokaler Ring mit maximalen Ideal $(t_1,\dots,t_n)$ und Residuenkörper isomorph zu $k$.
        
		\item Sei $X \subseteq \IR^n$ offen, $0 \in X$. Betrachte Paare $(U,f)$ mit $U \subseteq X$ offen, $0 \in U$ und $f:U \to R$ stetig. Definiere Äquivalenzklassen durch $(U_1,f_1) \sim (U_2,f_2)$ genau dann, wenn ein offenes $W \subseteq U_1 \cap U_2$ mit $0 \in W$ und $f_1|_W=f_2|_W$ existiert. Die Äquivalenzklasse $\langle U,f \rangle$ heißt \emph{Funktionenkeim}. Definiere $A := \{\langle U,f \rangle \mid (U,f) \text{ wie oben}\}$ mit  punktweiser Addition und Multiplikation.

		Wir zeigen nun, dass $A$ ein lokaler Ring ist. Betrachte $\phi: A \to \mathbb{R}, \; \langle U,f \rangle \to f(0)$, einen wohldefinierten Ringhomomorphismus. $\phi$ surjektiv und damit folgt $\ker \phi \in \Max A$.

        Sei $s = \langle U,f \rangle \in \ker \phi$. Es bleibt $1+s \in A^{\times}$ zu zeigen. Da $1+f(0)=1$, existiert eine offene Umgebung $W$ von $0$, sodass $f(x) \neq 0$ für alle $x \in W$ ist. Dann ist $y: W \to \IR, \; x \mapsto \frac{1}{1+f(0)}$ stetig und es gilt $(1+s)\langle W,y \rangle = 1$. Somit ist $A$ ein lokaler Ring.
        
        \item Sei $A$ ein Ring und $\fp \in \Spec A$. Dann ist $S := A \setminus \fp$ ein multiplikatives System. Wir definieren $A_\fp := S^{-1}A$ (Lokalisation).
        
        Später werden wir zeigen, dass $A_\fp$ ein lokaler Ring mit maximalem Ideal $\fp \cdot A_\fp$ ist.
	\end{enumerate}
\end{bsp}

\lecture{12. April 2018}

\subsection{Nilradikal und Jacobson-Radikal}
\begin{defi}
    Sei $A$ ein Ring sowie $I\subseteq A$ ein Ideal. Definiere das \emph{Radikal} von $I$ durch \[\sqrt{I} := \{x\in A \mid \exists n>0: x^n\in I\}.\]
    $\Nil A := \sqrt{0}$ heißt \emph{Nilradikal} von $A$.
\end{defi}
\begin{lem}
    \leavevmode
    \begin{enumerate}
        \item $\sqrt{I}$ ist ein Ideal von $A$. \label{lem:radikal:i}
        \item $I\subseteq \sqrt{I} = \sqrt{\sqrt{I}}$ \label{lem:radikal:ii}
        \item $\sqrt{I} = (1) \Leftrightarrow I = (1)$ \label{lem:radikal:iii}
        \item $\fak A{\sqrt{I}}$ hat keine nilpotente Elemente (außer 0). \label{lem:radikal:iv}
    \end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:radikal:\roman*}]
		\item Seien $x, y\in \sqrt{I}$, es existieren also $m, n > 0$ mit $x^m, y^n\in I$. Dann gilt
		\[(x+y)^{m+n-1}=\sum_{r=0}^{m+n-1}{m+n-1 \choose r}\overbrace{x^r}^{\in I \text{ falls } r\ge m}\underbrace{y^{n+m-1-r}}_{\in I \text{ falls } r<m},\]
		also liegt auch $x+y$ in $I$. Die anderen Eigenschaften sind schnell nachgeprüft.
		\item Da $I\subseteq \sqrt{I}$, folgt sofort $\sqrt{I} \subseteq \sqrt{\sqrt{I}}$. Ist nun umgekehrt $x\in \sqrt{\sqrt{I}}$, so existiert ein $n>0$ mit $x^n\in \sqrt{I}$, und dann existiert ein $m>0$ mit $(x^n)^m = x^{nm} \in I$. Also liegt $x$ in $\sqrt{I}$.
		\item Die Rückrichtung ist klar. Sei also $\sqrt I=(1)$. Dann existiert ein $n>0$ mit $1^n \in I$, also liegt $1$ in $I$.
		\item Sei $z\in \fak A{\sqrt{I}}$ mit $z^n=0$. Schreibe $z=x+\sqrt{I}$ für ein $x\in A$. Dann ist $x^n+\sqrt{I} = 0$, also liegt $x^n$ in $\sqrt{I}$ und es folgt $z=0$.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{bsp}
    Sei $A=\IZ$ und $I=(a)$. Was ist $\sqrt{(a)}$?

    Für $a=0$ ist $\sqrt{(a)}=(0)$. Sei nun $a\neq 0$, o.B.d.A. $a>0$. Schreibe $a=p_1^{m_1}p_2^{m_2}\ldots p_l^{m_l}$ mit positiven Primzahlen $p_1, \ldots, p_l$ und $p_i\neq p_j$ für $i\neq j$. Dann ist $\sqrt{(a)}=(p_1p_2\ldots p_l)$.

    \begin{proof}
        \leavevmode
        \begin{description}
            \item[\enquote{$\subseteq$}] Ist $x\in \sqrt{(a)}$, so existiert ein $n>0$ mit $x^n \in (a)$. $a$ teilt also $x^n$, weshalb jedes $p_i$ und somit auch ihr Produkt $x$ teilt, woraus $x \in (p_1\ldots p_l)$ folgt.
            \item[\enquote{$\supseteq$}] Ist $x \in (p_1\ldots p_l)$, so wähle $n \ge \max\{m_1,\ldots,m_l\}$. Dann liegt $x^n$ in $(p_1^n\ldots p_l^n) \subseteq (p_1^{m_1}\ldots p_l^{m_l}) = (a)$.
            \qedhere
        \end{description}
    \end{proof}
\end{bsp}
\begin{prop}
    Sei $A$ ein Ring und $I$ ein Ideal in $A$. Dann gilt
    \[\sqrt{I} = \bigcap_{\mathclap{\substack{\fp\in \Spec A,\\ \fp\supseteq I}}} \fp.\]
\end{prop}
\begin{proof}
    \leavevmode
    \begin{description}
        \item[\enquote{$\subseteq$}] Sei $x\in \sqrt{I}$. Dann existiert ein $n>0$ mit $x^n\in I$.
        Sei $\fp\in \Spec A$ mit $\fp\supseteq I$. Dann liegt $x^n$ auch in $\fp$, und da $\fp$ ein Primideal ist, folgt $x \in \fp$.
        \item[\enquote{$\supseteq$}] Sei $x\in \bigcap_{\fp\in \Spec A, \fp\supseteq I}\fp$. Angenommen, $x$ wäre nicht in $\sqrt{I}$; für alle $n>0$ gilt also $x^n\not \in I$.

        Definiere \[\Sigma := \{J \mid J\subseteq A \text{ Ideal}, I\subseteq J,\, \forall n>0: x^n\not \in J\}.\]
        Dann ist $(\Sigma, \subseteq)$ angeordnet (partiell geordnet).
        
        Wir wollen das \textsc{Lemma von Zorn} anwenden.
        \begin{itemize}
            \item $\Sigma \neq \emptyset$ (da $I\in \Sigma$)
            \item Sei $(J_t)_{t\in T}$ mit $T \neq \emptyset$ eine Kette in $\Sigma$, es gilt also $J_t \in \Sigma$ sowie $J_t \subseteq J_{t'}$ oder $J_t \supseteq J_{t'}$ für alle $t,t'\in T$.
            Dann ist $\bigcup_{t\in T} J_t$ ein Ideal in $A$ und enthält $I$, aber kein $x^n$ mit $n>0$. Also liegt $\bigcup_{t\in T} J_t$ in $\Sigma$.
        \end{itemize}
        
        Nach dem \textsc{Lemma von Zorn} existiert nun ein $\fp \in \Sigma$, welches maximal in $\Sigma$ bezüglich Inklusion ist. Wir behaupten, dass $\fp$ ein Primideal in $A$ ist.
        \begin{proof}
            Seien $a, b \in A \setminus \fp$. Es ist $ab\in A\setminus \fp$ zu zeigen.
            
            Da $(a)+\fp$ und $(b)+\fp$ echt größer als $\fp$ sind, liegen sie nicht in $\Sigma$. Somit existieren $m,n>0$ mit $x^m \in (a) + \fp$ und $x^n \in (b) + \fp$, weshalb wiederum Elemente $c,d\in A$ und $r,s \in \fp$ existieren, sodass $x^m = ac+r$ und $x^n = bd+s$ gilt. Wir erhalten \[x^{m+n} = (ac+r)(bd+s) = \underbrace{abcd}_{\in (ab)} + \underbrace{rbd + sac + rs}_{\fp} \in (ab)+\fp. \]
            Wäre $ab \in \fp$, so läge $x^{m+n}$ auch in $\fp$, was aber $\fp \notin \Sigma$ bedeuten würde, ein Widerspruch.
        \end{proof}

        Nach unserer Annahme liegt $x=x^1$ in $\fp$, was aber wegen $\fp \in \Sigma$ einen Widerspruch darstellt.
        \qedhere
    \end{description}
\end{proof}

\begin{defi}
    Sei $A$ ein Ring. Dann heißt \[\Jac(A) := \bigcap_{\mathclap{\fm\in \Max{A}}} \fm\] das \emph{Jacobson-Radikal} von $A$.
\end{defi}
\begin{beme}
    \leavevmode
    \begin{enumerate}
        \item $\Jac(A)$ ist ein Ideal von $A$.
        \item Sei $(A, \fm)$ ein lokaler Ring und ein Integritätsbereich. Dann gilt $\Nil(A)=(0)$ und $\Jac(A) = \fm$, d.h. $\Nil(A) \subsetneq \Jac(A)$ falls $A$ kein Körper ist.
        
        Beispielsweise ist $k\llbracket t\rrbracket$ ein lokaler Ring mit $\fm=(t)\neq (0)$ und ist nullteilerfrei, da mit $f=\sum_{i=m}^\infty a_it^i,g=\sum_{i=n}^\infty b_it^i \in k\llbracket t\rrbracket$ mit $a_m,b_n \neq 0$ dann \[ fg = \underbrace{a_mb_nt^{m+n}}_{\neq 0} + \text{ Terme höheren Grades} \neq 0 \] gilt.
    \end{enumerate}
\end{beme}
\begin{prop} \label{prop:jacobson}
    Sei $A$ ein Ring. Dann gilt $\Jac(A) = \{x\in A \mid \forall a\in A: 1-ax\in A^{\times} \}$.
\end{prop}
\begin{proof}
    \leavevmode
    \begin{description}
        \item[\enquote{$\subseteq$}] Sei $x\in \Jac(A)$ und $a\in A$. Angenommen, $1-ax\not \in A^{\times}$. Dann existiert ein $\fm\in \Max(A)$ mit $1-ax\in \fm$, sodass $1=(1-ax)+ax\in \fm$ gilt, Widerspruch.
        \item[\enquote{$\supseteq$}] Sei $x \in A$ mit $1-ax\in A^{\times}$ für alle $a \in A$ sowie $\fm\in \Max(A)$. Angenommen, $x\not \in \fm$. Dann gilt $(x)+\fm=(1)$, es existieren also $a\in A, y\in \fm$ mit $1=ax+y$. Dann folgt aber $\fm \ni y = 1-ax \in A^{\times}$, ein Widerspruch.
        \qedhere
    \end{description}
\end{proof}

\section{Moduln}
\subsection{Grundbegriffe}
\begin{defi}
    Sei $A$ ein Ring. Ein \emph{$A$-Modul} ist Tripel $(M, +, \cdot)$ besteht aus einer Menge $M$ und Abbildungen $+: M\times M \rightarrow M$, $\cdot: A\times M \rightarrow M$, sodass folgendes für alle $a,b\in A$ und $x,y \in M$ gilt:
    \begin{enumerate}
        \item $(M,+)$ ist eine abelsche Gruppe.
        \item $(a+b)x=ax+bx$
        \item $a(x+y)=ax+ay$
        \item $a(bx)=(ab)x$
        \item $1\cdot x=x$
    \end{enumerate}
\end{defi}
\begin{bsp} \label{bsp:moduln}
    \leavevmode
    \begin{enumerate}
        \item Falls $A=k$ Körper: $A$-Modul $=$ $k$-Vektorraum
        \item $A$ ist selbst ein $A$-Modul, genannt ${}_AA$. \label{bsp:moduln:ii}
        \item Ist $\phi: A\rightarrow B$ ein Ringhomomorphismus, so wird $B$ ein $A$-Modul durch $a\cdot b = \phi(a)\cdot b$. \label{bsp:moduln:iii}
        \item Ist $A=\IZ$, so sind $A$-Moduln abelsche Gruppen (für $n\in \IZ, n>0: nx=\underbrace{x+x+\ldots+x}_{n\text{ mal}}$).
        \item Sei $A=k[t]$ ($k$ Körper). Sei $V$ ein $k$-Vektorraum und $\psi \in \End_k(V)$. Definiere $k[t] \times V \rightarrow V$ durch $(P,v) \mapsto (P(\psi))(v):=\sum_{\nu=0}^n a_\nu(\psi^\nu)(v)$ mit $P(t)=\sum_{\nu=0}^n a_\nu t^\nu$. Dann wird $V$ ein $k[t]$-Modul.
    \end{enumerate}
\end{bsp}
\begin{defi}
    Sei $\phi: A\rightarrow B$ ein Ringhomomorphismus und $N$ ein $B$-Modul. Dann wird $N$ mit $+$ und $\cdot_A: A\times N\rightarrow N$ definiert durch $(a, y) \mapsto \phi(a)\cdot y$ zu einem $A$-Modul. Bezeichnung: ${}_AN$.
\end{defi}
\begin{bsp}
    \leavevmode
    \begin{enumerate}
        \item Mit \cref{bsp:moduln} \ref{bsp:moduln:ii} und \ref{bsp:moduln:iii} gilt ${}_AB={}_A({}_BB)$.
        \item Sei $A=k$, $B=k[t]$ und $N$ $k[t]$-Modul.
        Dann ist ${}_kN$ ein $k$-Vektorraum.
        Betrachte $\psi: {}_kN \to {}_kN, y\mapsto t\cdot y$. Dann gilt $\psi\in \End_k({}_kN)$.
        Sei $P(t)=\sum_{\nu=0}^n a_\nu t^\nu\in k[t]$. Dann ist $P\cdot y = \sum_{\nu = 0}^n a_\nu \psi^n(y) = \sum_{\nu = 0}^n a_\nu (t\cdot y) = P\cdot y$ und wir erhalten einen $N = $ $k[t]$-Modul entstanden aus $({}_kN, \psi)$.
    \end{enumerate}
\end{bsp}
\begin{defi}
Seien $M$ und $N$ $A$-Moduln. Eine Abbildung $M\rightarrow N$ heißt \emph{$A$-linear}, wenn $f(x+x')=f(x)+f(x')$ und $f(ax)=af(x)$ für alle $x,x'\in M$ und $a\in A$ gilt.
Bezeichne $\Hom_A(M, N) := \{f \mid  \text{$f\colon M\rightarrow N$ ist $A$-linear}\}$.
\end{defi}


\lecture{16. April 2018}
\begin{beme}
	\leavevmode
	\begin{enumerate}
		\item Seien $M\xrightarrow{f}N\xrightarrow{g}P$ $A$-linear. Dann ist auch $g\circ f$ $A$-linear.
		\item Seien $M$ und $N$ $A$-Moduln. Dann wird $\Hom_A(M,N)$ zu einem $A$-Modul mit
		\begin{eqnarray*}
			f+g & \colon & M\to N,\, x\mapsto f(x) + g(x)\\
			af & \colon & M\to N,\, x\mapsto af(x)\; (= f(ax))
		\end{eqnarray*}
		für alle $f,g\in\Hom_A(M,N)$ und $a\in A$.
		
		Für die $A$-Linearität von $af$ wird benötigt, dass $A$ ein kommutativer Ring ist.
		\item Sei $\phi\colon A\to B$ ein Ringhomomorphismus sowie $f\colon M\to N$ $B$-linear. Dann ist $f\colon {}_AM\to {}_AN$ $A$-linear. Wir erhalten also eine Injektion $\Hom_B(M,N)\hookrightarrow \Hom_A({}_AM,{}_AN)$.
	\end{enumerate}
\end{beme}
\begin{defi}
	Sei $f\colon M\to N$ eine $A$-lineare Abbildung. $f$ heißt \emph{Isomorphismus} (von $A$-Moduln), wenn $f$ bijektiv ist.
\end{defi}
\begin{beme} Ist $f\colon M\to N$ ein Isomorphismus von $A$-Moduln, so ist $f^{-1}$ ebenfalls $A$-linear. Das heißt, $f$ ist genau dann ein Isomorphismus, wenn ein $A$-lineares $g\colon N\to M$ existiert, sodass $g\circ f = \id_M$ und $f\circ g = \id_N$ gilt.
\end{beme}
\begin{bsp}
	Sei $M$ ein $A$-Modul. Betrachte die Abbildung \begin{eqnarray*}
		M &\to& \Hom_A(A,M)\\
		x&\mapsto & [a\mapsto ax]\enspace .
	\end{eqnarray*}
	Das ist ein Isomorphismus von $A$-Moduln mit Umkehrabbildung
	\begin{eqnarray*}
		\Hom_A(A,M)&\to& M\\
		f &\mapsto& f(1) \enspace .
	\end{eqnarray*}
\end{bsp}
\subsection{Untermoduln}
\begin{defi}
	Sei $M$ ein $A$-Modul. Eine Teilmenge $M'\subseteq M$ heißt \emph{$A$-Untermodul}, falls
	\begin{enumerate}
		\item $0\in M'$ \label{defi:untermodul:i}
		\item $x+x'\in M'$ \label{defi:untermodul:ii}
		\item $ax\in M'$ \label{defi:untermodul:iii}
    \end{enumerate}
    für alle $x,x' \in M'$ und $a \in A$ gelten.

	Falls $M'\subseteq M$ ein $A$-Untermodul ist, ist $M'$ mit den Einschränkungen der Addition und der skalaren Multiplikation von $M$ wieder ein $A$-Modul; die Inklusion $M'\hookrightarrow M$ ist $A$-linear.
	
	Sei $M'\subseteq M$ ein $A$-Untermodul. Dann ist $\fak M{M'}$ (als abelsche Gruppe) mit 
	\begin{eqnarray*}
		A\times \fak M{M'} & \to & \fak M{M'}\\
		(a, x+M') &\mapsto& ax + M'
	\end{eqnarray*}
	ein $A$-Modul. Die Wohldefiniertheit ist schnell nachgerechnet.
	
	Die Quotientenabbildung $\pi\colon M\to \fak M{M'}$ ist $A$-linear (nach der Definition der Skalarmultiplikation).
\end{defi}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Für $M = {}_AA$ sind die $A$-Untermoduln von ${}_AA$ genau die Ideale von $A$.
		\item Sei $A = k[t]$ und $M$ ein $A$-Modul. Dann ist $M$ eindeutig bestimmt durch $({}_kM, \psi)$, wobei $\psi\in\End_k(M)$ mit $\psi(x) = tx$. Sei $M'\subseteq M$ eine Teilmenge. Dann ist $M'$ genau dann ein $k[t]$-Untermodul, wenn $M'$ ein $k$-Untervektorraum von ${}_kM$ ist und $\psi(M')\subseteq M'$ gilt.
		\begin{proof}
		\leavevmode
		\begin{description}
			\item[\glqq $\Rightarrow$\grqq:] Klar.
			\item[\glqq $\Leftarrow$\grqq:]
            Die Axiome \ref{defi:untermodul:i} und \ref{defi:untermodul:ii} von Untermoduln sind erfüllt, da $M'$ ein Untervektorraum ist. Für Axiom \ref{defi:untermodul:iii} sei $x\in M'$ und $P\in k[t]$ mit $P(t) = \sum a_\nu t^\nu$ mit $a_\nu\in k$. Dann folgt $P\cdot x = \sum a_\nu\psi^\nu(x)\in M'$, da $\psi^\nu(x)$ in $M'$ liegt.
            \qedhere
		\end{description}
		\end{proof}
		\item Sei $I\subseteq A$ ein Ideal, $M$ ein $A$-Modul. Definiere $I\cdot M  := \set{\sum a_ix_i\given a_i\in I, x_i\in M}\subseteq M$. Das ist ein $A$-Untermodul. Beipsielsweise $I = (a)$; dann ist $(a)\cdot M = \set{ax\given x\in M}$.
	\end{enumerate}
\end{bsp}
\begin{defi}
	Sei $f\colon M\to N$ eine $A$-lineare Abbildung. Definiere
	\begin{itemize}
		\item $\ker f := \{x\in M\mid f(x) = 0\}$,
		\item $\im f := f(M)$,
		\item $\coker f := \fak N{\im f}$.
	\end{itemize}
	Der Kern und das Bild von $f$ sind dabei Untermoduln von $M$ bzw. $N$.
\end{defi}
\begin{lem}
	Sei $f\colon M\to N$ eine $A$-lineare Abbildung.
	\begin{enumerate}
        \item \label{lem:homsatz moduln:i} Sei $M'\subseteq M$ ein $A$-Untermodul mit $M'\subseteq \ker f$. Dann existiert genau eine Abbildung $\ol{f}\colon \fak M{M'}\to N$, sodass folgendes Diagramm kommutiert.
        \begin{center}
            \begin{tikzcd}
                    M \arrow{r}{f} \arrow{d}{\pi} & N \\
                    \fak M{M'} \arrow[dashrightarrow]{ur}[swap]{\ol{f}}
            \end{tikzcd}
        \end{center}
        \item \label{lem:homsatz moduln:ii} Es existiert genau eine $A$-lineare Abbildung $\tilde{f}\colon \fak M{\ker f}\to \im f$, sodass das folgende Diagramm kommutiert.
        \begin{center}
            \begin{tikzcd}
                M \arrow{r}{f} \arrow{d}{\pi} & N \\
                \fak M{\ker f} \arrow[dashrightarrow]{r}{\tilde{f}} & \im f \arrow[hookrightarrow]{u}
            \end{tikzcd}
        \end{center}
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:homsatz moduln:\roman*}]
		\item Definiere $\ol{f}\colon \fak M{M'}\to N$ durch $\ol{f}(x+M') = f(x)$ (wohldefiniert, da $M'\subseteq \ker f$). Außerdem ist $\ol{f}$ auch $A$-linear, da $\ol{f}(ax+M') = f(ax) = a(f(x)) = a\ol{f}(x+M')$ gilt.
        \item Wenden wir \ref{lem:homsatz moduln:i} auf $M' = \ker f$ an, so erhalten wir eine eindeutige $A$-lineare Abbildung $\ol{f}\colon \fak M{\ker f}\to N$, sodass
        \begin{center}
            \begin{tikzcd}
                M \arrow{r}{f} \arrow{d}{\pi} & N \\
                \fak M{\ker f} \arrow[dashrightarrow]{ur}[swap]{\ol{f}}
            \end{tikzcd}
        \end{center}
        
        kommutiert. Da $\im\ol{f} = \im f$, folgt
        \begin{center}
            \begin{tikzcd}
                & N  \\
                \fak M{\ker f} \arrow{ur}{\ol{f}}\arrow[dashrightarrow]{r}{\exists!\tilde{f}}	& \im f\arrow[hookrightarrow]{u}
               \end{tikzcd}
        \end{center}
		
        $\tilde{f}$ ist analog zum Homomorphiesatz für Gruppen bijektiv.
        \qedhere
	\end{enumerate}
\end{proof}

\begin{beme}
	Sei $M$ ein $A$-Modul sowie $M_i\subseteq M$ Untermoduln mit $i\in I$.
	\begin{enumerate}
		\item $\bigcap\limits_{i\in I} M_i$ ist ein Untermodul.
		\item Sei $T\subseteq M$ eine Teilmenge. Definiere
		\[\<T\> := \bigcap_{\mathclap{\substack{T\subseteq M'\subseteq M\\\text{$M'$ Untermodul}}}} M'\] als den von $T$ erzeugten Untermodul.
		\item Die Menge $\sum\limits_{i\in I} M_i  := \left\{\sum x_i \,\middle|\, \substack{x_i \in M_i \text{ mit }i\in I,\\\text{ nur endlich viele } x_i\neq 0}\right\}$ ist ein Untermodul.
	\end{enumerate}
\end{beme}
\begin{beme}
	Seien $M_i$ $A$-Moduln mit $i\in I$.
	\begin{enumerate}
		\item $\prod\limits_{i\in I} M_i := \{(x_i)_{i\in I}\mid x_i\in M_i\}$ ist ein $A$-Modul mit $a(x_i) = (ax_i)$.
		\item $\bigoplus\limits_{i\in I} M_i := \{(x_i)_{i\in I}\mid\text{nur endlich viele }x_i\neq 0\}\subseteq \prod\limits_{i\in I}M_i$ ist ein Untermodul.
        \item Sind $M_i\subseteq M$ Untermoduln und $M_i\cap \sum\limits_{j\neq i} M_j = \{0\}$, so ist $\sum\limits_{i\in I} M_i\cong \bigoplus\limits_{i\in I} M_i$.
        \item Falls $M_i = M$ für alle $i \in I$, schreibe $M^I := \prod\limits_{i\in I} M_i$ und $M^{(I)} := \bigoplus\limits_{i\in I}M_i$.
	\end{enumerate}
\end{beme}

\subsection{Endlich erzeugte Moduln}
\begin{defi}
	Sei $M$ ein $A$-Modul. Sei $\{x_i\}_{i\in I}\subseteq M$. $\{x_i\}$ heißt 
	\begin{itemize}
		\item linear unabhängig (linearly independent)
		\item Erzeugendensystem (generating system)
		\item Basis
	\end{itemize}
	analog zur linearen Algebra.
	\begin{enumerate}
        \item $M$ heißt \emph{frei}, falls eine der folgenden, äquivalenten Aussagen gilt:
        \begin{itemize}
            \item $M$ hat eine Basis.
            \item Es existiert eine Menge $I$, sodass ein Isomorphismus $A^{(I)}\xrightarrow{\cong}M$ existiert.
        \end{itemize}
        \item $M$ heißt \emph{endlich frei}, falls eine der folgenden, äquivalenten Aussagen gilt:
        \begin{itemize}
            \item $M$ hat eine endliche Basis.
            \item Es existiert ein $n \ge 0$, sodass ein Isomorphismus $A^{n}\xrightarrow{\cong}M$ existiert.
        \end{itemize}
        \item $M$ heißt \emph{endlich erzeugt}, falls eine der folgenden, äquivalenten Aussagen gilt:
        \begin{itemize}
            \item $M$ hat ein endliches Erzeugendensystem.
            \item Es existiert ein $n \ge 0$, sodass eine surjektive $A$-lineare Abbildung $A^{n}\to M$ existiert.
        \end{itemize}
        \item $M$ heißt \emph{endlich präsentiert}, falls ein $n \ge 0$ existiert, sodass eine surjektive $A$-lineare Abbildung $f\colon A^{n}\to M$ existiert, sodass $\ker f$ endlich erzeugt ist.
	\end{enumerate}
\end{defi}
\begin{beme}\label{bem:2.17}
	\leavevmode
	\begin{enumerate}
		\item endlich frei $\Rightarrow$ endlich präsentiert $\Rightarrow$ endlich erzeugt
		\item Falls $A = k$ Körper: endlich erzeugt $\Rightarrow$ endlich frei
		\item Sei $A = \IZ$, $M = \fak \IZ{m\IZ}$. Dann ist $M$ endlich präsentiert, aber nicht endlich frei.
		\item Sei $A = \IZ[T_1,T_2,T_3,\dots]$. Betrachte $\ev_{(T_i = 0)}\colon \IZ[T_1,T_2,\dots]\to \IZ$ und $M = {}_A\IZ$. Dann ist $M$ endlich erzeugt, aber nicht endlich präsentiert, denn $\ker\ev_{(T_i = 0)}= (T_1,T_2,\dots)$, was nicht endlich erzeugt ist.
	\end{enumerate}
\end{beme}
\begin{lem}[Nakayamas Lemma] \label{lem:nakayama}
	Sei $M$ ein endlich erzeugter $A$-Modul und $I\subseteq A$ ein Ideal mit $I \cdot M = M$.
	\begin{enumerate}
		\item \label{lem:nakayama:i} Es existiert ein $a\in I$ mit $(1+a)\cdot M = \{0\}$ (das heißt, für alle $x\in M: (1+a)x = 0$).
		\item Falls $I\subseteq\Jac(A)$, so gilt $M = \{0\}$. \label{lem:nakayama:ii}
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:nakayama:\roman*}]
		\item Induktion nach $n$, der minimalen Anzahl der Erzeuger von $M$.
        \begin{description}
            \item[$n = 0$:] $M = 0$, klar.
            \item[$n-1\to n$:] Sei $x_1,\dots, x_n$ ein Erzeugendensystem von $M$. Definiere $N := \fak M{\<x_n\>}$. Sei $\pi \colon M\to N$ die Quotientenabbildung. Dann folgt $N = \<\pi(x_1),\dots,\pi(x_{n-1})\>$. Nun gilt $I\cdot N = N$, da für $y\in N$ ein $x\in M = I \cdot M$ mit $\pi(x) = y$ existiert, und somit $a_i\in I$ sowie $\tilde{x_i}\in M$ mit $y =\sum a_i\pi(\tilde{x_i})\in I\cdot N$ existieren.
		
            Nach der Induktionsannahme existiert ein $b\in I$, sodass $(1+b)\cdot N = \{0\}\subseteq N = \fak M{\<x_n\>}$. Dann gilt
            \begin{align*}
                &\phantom{{}\Rightarrow{}}(1+b)\cdot M\subseteq \<x_n\>\\
                &\Rightarrow (1+b)\cdot M = (1+b)\cdot (I\cdot M) = I\cdot((1+b)\cdot M)\subseteq I \cdot \<x_n\>\\
                &\Rightarrow \exists c\in I: (1+b) x_n = cx_n \\
                &\Rightarrow (1+b-c)x_n = 0\\
                &\Rightarrow (1+b-c)(1+b)M = \{0\}.
            \end{align*}
            Dabei ist $(1+b-c)(1+b) = (1+a)$ mit $a = b-c+b^2-bc\in I$.
        \end{description}
        \item Sei $x\in M$. Nach Punkt \ref{lem:nakayama:i} existiert ein $a\in I$ mit $(1+a)x = 0$. Da $a\in \Jac(A)$, folgt nach \cref{prop:jacobson} dann $1+a\in A^{\times}$; also gilt $x = 0$.
        \qedhere
	\end{enumerate}
\end{proof}

\lecture{19. April 2018}

Nachtrag zu \cref{bem:2.17}: Sei $A = \IZ[T_1,\dots]$, $\phi = \ev_{T_i = 0}\colon A\to \IZ$ und $M = {}_A\IZ$, also $p\cdot z = p(0,\dots)\cdot z$ für $p\in A, z\in\IZ$. Wir behaupten, dass $M$ (als $A$-Modul) endlich erzeugt, aber nicht endlich präsentiert ist.
\begin{proof}
	$M$ ist offensichtlich endlich erzeugt.
	
	Angenommen, $M$ ist endlich präsentiert. Dann existiert eine surjektive, $A$-lineare Abbildung $ f\colon A^n \twoheadrightarrow M$, sodass $\ker f$ endlich erzeugt ist.
	Sei $e_j = (0,\dots, 1,\dots, 0)\in A^n$, wobei die $1$ im $j$-ten Eintrag steht. Definiere nun $z_j = f(e_j)\in\IZ$. Dann ist $\ker f = \set*{ p = (p_1,\dots, p_n)\in A^n \given \sum_{j=0}^n p_j(0)z_j = 0 }$.
	
	Nach obiger Annahme existieren nun $p^{(1)},\dots, p^{(m)}\in\ker f$ mit $\ker f = \gen{p^{(1)},\dots, p^{(m)}}_A$. Schreibe $p^{(i)} = \left(p_1^{(i)},\dots,p_n^{(i)}\right)$. Wähle $N>0$, sodass $T_N$ in keinem der $p_j^{(i)}$ auftritt. Betrachte $T_n\cdot e_j\in\ker f$. Es existiert dann ein $Q^{(i,j)}\in A$ mit $T_N\cdot e_j = \sum_{i = 1}^nQ^{(i,j)}p^{(i)}$.
	
	Folglich gilt $\sum_{i = 1}^n Q^{(i,j)}p_k^{(i)} = \delta_{jk}T_N$ für alle $1 \le k \le n$. Damit erhalten wir
	\begin{equation}
		\sum_{k=1}^n z_k \cdot \sum_{i=1}^n Q^{(i,j)} p_k^{(i)} = z_jT_n = \sum_{i=1}^nQ^{(i,j)} \cdot \sum_{k =1}^n z_kp_k^{(i)}.	\tag{*}\label{eq:endl erz, aber nicht endl praes}
	\end{equation}
	Wir betrachten nun den Ringhomomorphismus $\phi_n : A \to \IZ[T_N]$ mit $\phi(T_i) = 0$ für $i \neq N$. Wendet man $\phi_n$ auf \eqref{eq:endl erz, aber nicht endl praes} an, so ergibt sich
	\begin{align*}
		\sum_{i=1}^n \phi_n\left(Q^{(i,j)}\right) \cdot \underbrace{\sum_{k=1}^nz_k \phi_n\underbrace{\left(p_k^{(i)}\right)}_{p_k^{i}(0,\ldots)}}_{\mathclap{\text{$\sum_{k=1}^nz_kp_k(0) = 0$, da $p_k^{(i)} \in \ker f$}}} = z_j \cdot \underbrace{\phi_n(T_N)}_{T_n}.
	\end{align*}
	Also gilt $z_j = 0$, und da $j$ beliebig ist, auch $f=0$. Das ist aber ein Widerspruch zur Surjektivität von $f$.
\end{proof}

\begin{kor} \label{kor:2.19}
	Sei $M$ ein $A$-Modul, $N,N' \subseteq M$ $A$-Untermoduln mit $N'$ endlich erzeugt und $I\subseteq \Jac(A)$ ein Ideal in $A$. Falls $M=N + IN'$ gilt, so folgt bereits $M=N$.
\end{kor}
\begin{proof}
	Wir zeigen zunächst, dass $\fak MN$ endlich erzeugt ist. Es gilt $M=N+ I \cdot N' \subseteq N+ N' \subseteq M$. Also ist die Komposition $N' \hookrightarrow M \to \fak MN$ surjektiv, weil für $x+ N \in \fak MN$ wegen $M=N+IN'$ dann $y\in N$ und $y' \in N'$ mit $x=y+y'$ existieren, sodass also \[x+N=y+y'+N = y' + N \in \im(N' \hookrightarrow M \to \fak MN) \] gilt. Da $N'$ endlich erzeugt ist und $N' \twoheadrightarrow \fak MN$ surjektiv ist, ist auch $\fak MN$ endlich erzeugt.
	
	Weiterhin gilt $\fak MN = I \cdot \fak MN$, denn für $x+N \in \fak MN$ existieren wegen $M=N+ I\cdot N'$ dann $y' \in N$ sowie $a_i \in I$ und $y_i' \in N'$ mit $x= y' + \sum a_iy_i'$, sodass also $x+ N = \sum a_iy_i' + N = \sum a_i(y_i' + N) $ gilt, was in $I \cdot \fak MN$ liegt. Die andere Inklusion ist trivial.
	
	Mit \namereff{lem:nakayama} folgt nun $\fak MN = \{0\}$, also $M=N$.
\end{proof}
\begin{beme}
	Sei $M$ ein $A$-Modul sowie $I \subseteq A$ ein Ideal.
	\begin{enumerate}
		\item Falls $I \cdot M = \{0\}$, so ist $M$ ein $\fak AI$-Modul via $(a+I) \cdot x = ax$.
		\item Da $I \cdot \fak M{I M} = \{0\}$, ist $\fak M{IM}$ ein $\fak AI$-Modul.
	\end{enumerate}
\end{beme}
\begin{kor}
	Sei $(A,\fm)$ ein lokaler Ring und $M$ ein endlich erzeugter $A$-Modul sowie $x_1,\ldots,x_n \in M$ und $\pi: M \to \fak M{\fm M}$. Falls $\fak{M}{\fm M}$ von $\pi(x_1),\ldots,\pi(x_n)$ als $\fak A\fm$-Vektorraum erzeugt wird, erzeugen die $x_i$ schon $M$ als $A$-Modul.
\end{kor}
\begin{proof}
	Die $\pi(x_i)$ sind ein Erzeugendensystem von $\fak M{\fm M}$ als $\fak A\fm$-Vektorraum, also auch als $A$-Modul. Deshalb gilt $\gen{x_1,\ldots,x_n}_A + \fm M = M$. Mit \cref{kor:2.19} folgt nun $M= \gen{x_1,\ldots,x_n}_A$.
\end{proof}

\subsection{Tensorprodukte}
\begin{defi}
	Seien $M,N,P$ $A$-Moduln Eine Abbbildung $h\colon M \times N \to P$ heißt \emph{$A$-bilinear}, falls die Abbildungen
	\begin{alignat*}{3}
		&h(x,-)\colon \, &&N \to P, \quad &&y' \mapsto h(x,y') \\
		&h(-,y)\colon \, &&M \to P, \quad &&x' \mapsto h(x',y)
	\end{alignat*}
	$A$-linear für alle $x \in M$ und $y \in N$ sind.
\end{defi}
\begin{prop}[Existenz des Tensorprodukts] \label{prop:tensorprodukt}
	Seien $M,N$ $A$-Moduln.
	\begin{enumerate}
		\item Es existiert ein Paar $(T,h)$, wobei $T$ ein $A$-Modul und $h\colon M \times N \to T$ $A$-bilinear ist, sodass für alle $(P,g)$ mit $P$ $A$-Modul und $g\colon M \times N \to P$ $A$-bilinear eine eindeutige $A$-lineare Abbildung $\lambda\colon T \to P$ existiert, sodass das Diagramm \subrefp{prop:tensorprodukt:a} kommutiert. \label{prop:tensorprodukt:i}
		\item Falls $(T',h')$ ein weiteres Paar mit der universellen Eigenschaft \ref{prop:tensorprodukt:i} ist, so existiert ein eindeutiger Isomorphismus von $A$-Moduln $\lambda\colon T \to T'$, sodass das Diagramm \subrefp{prop:tensorprodukt:b} kommutiert. \label{prop:tensorprodukt:ii}
	\end{enumerate}
	\begin{figure}[H]
		\begin{subfigure}[b]{.49\linewidth}
			\centering
				\begin{tikzcd}
					M \times N \arrow{r}{h} \arrow{rd}[swap]{g} & T \arrow{d}{\lambda} \\
					&P
				\end{tikzcd}
			\caption{}
			\label{prop:tensorprodukt:a}
		\end{subfigure}
		\begin{subfigure}[b]{.49\linewidth}
			\centering
				\begin{tikzcd}
				M \times N \arrow{r}{h}\arrow{rd}[swap]{h'} & T \arrow{d}{\lambda} \\
				& T'
				\end{tikzcd}
			\caption{}
			\label{prop:tensorprodukt:b}
		\end{subfigure}
	\end{figure}
\end{prop}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{prop:tensorprodukt:\roman*}]
		\item
		Sei $D := A^{(M \times N)}$ der freie Modul mit Basis $M \times N$. Die Elemente von $D$ sind also Linearkombinationen der Form $\sum a_i [x_iy_i]$ mit $a_i \in A$ sowie $x_i \in M$ und $y_i \in N$.
		
		Sei $U \subseteq D$ der $A$-Untermodul erzeugt von
		\begin{align*}
			[ax+a'x',y] - a[x,y]-a'[x',y] \\
			[x,ay+a'y'] - a[x,y]-a'[x',y]
		\end{align*}
		für alle $a,a' \in A$, $x,x' \in M$ und $y,y' \in N$. Betrachte $T := \fak DU$ und
		\begin{eqnarray*}
			h\colon M \times N &\to& D \to \fak DU \\
			(x,y) &\mapsto& [x,y].
		\end{eqnarray*}
		Nach Konstruktion ist $h$ bilinear.
		
		Nun zur universellen Eigenschaft. Sei hierzu $(P,g)$ mit einem $A$-Modul $P$ und einer $A$-linearen Abbildung $g: M \times N \to P$ gegeben. Betrachte
		\begin{eqnarray*}
			\ol \lambda \colon D &\to& P, \\
			\left[x,y\right] &\mapsto& g((x,y)),
		\end{eqnarray*}
		die eindeutig bestimmte $A$-bilineare Abbildung mit dieser Eigenschaft, wie wir nun zeigen.

		Es gilt $\ol \lambda (U) = \{0\}$, da \[ \ol\lambda ([ax+a'x',y]-a[x,y]-a'[x',y]) = g(ax+a'x',y)-ag(x,y)-a'(x',y) = 0 \]
		gilt (die andere Erzeugerdarstellung funktioniert analog).

		Wir erhalten also das folgende kommutative Diagramm.
		\begin{center}
			\begin{tikzcd}
				D \arrow{r}{\ol\lambda} \arrow{d}{} & P \\
				\fak DU \arrow[dashrightarrow]{ru}[swap]{\lambda} &
			\end{tikzcd}
		\end{center}
		Es gilt hierbei $\lambda(h(x,y)) = \lambda([x,y]) = g(x,y)$, also $\lambda \circ h = g$.

		Zur Eindeutigkeit: Sei $h': \fak DU \to P$ eine weitere $A$-lineare Abbildung mit $\lambda' \circ h = g$. Dann gilt $\lambda'([x,y]+U) = \lambda'(h(x,y)) = g(x,y) = \lambda([x,y]+U)$, also folgt $\lambda = \lambda'$, da $\fak DU$ von $\set{[x,y]+U}$ als $A$-Modul erzeugt wird.

		\item Sei $(T',h')$ ein weiteres Paar mit der universellen Eigenschaft. Wir erhalten die zwei kommutativen Diagramme \subrefp{prop:tensorprodukt:proof:a} und \subrefp{prop:tensorprodukt:proof:b}.
		\begin{figure}[H]
			\begin{subfigure}[b]{.235\linewidth}
				\centering
					\begin{tikzcd}
						M \times N \arrow{r}{h} \arrow{rd}[swap]{h'} & T \arrow[dashrightarrow]{d}{\exists!\lambda} \\
						&T'
					\end{tikzcd}
				\caption{}
				\label{prop:tensorprodukt:proof:a}
			\end{subfigure}
			\begin{subfigure}[b]{.24\linewidth}
				\centering
					\begin{tikzcd}
						M \times N \arrow{r}{h'} \arrow{rd}[swap]{h'} & T' \arrow[dashrightarrow]{d}{\exists!\lambda'} \\
						&T
					\end{tikzcd}
				\caption{}
				\label{prop:tensorprodukt:proof:b}
			\end{subfigure}
			\begin{subfigure}[b]{.25\linewidth}
				\centering
					\begin{tikzcd}
					M \times N \arrow{r}{h}\arrow{rd}[swap]{h} & T \arrow{d}{\lambda' \circ \lambda} \\
					& T'
					\end{tikzcd}
				\caption{}
				\label{prop:tensorprodukt:proof:c}
			\end{subfigure}
			\begin{subfigure}[b]{.235\linewidth}
				\centering
					\begin{tikzcd}
					M \times N \arrow{r}{h}\arrow{rd}[swap]{h} & T \arrow{d}{\id_T} \\
					& T'
					\end{tikzcd}
				\caption{}
				\label{prop:tensorprodukt:proof:d}
			\end{subfigure}
		\end{figure}
		Vergleiche nun \subrefp{prop:tensorprodukt:proof:c} und \subrefp{prop:tensorprodukt:proof:d}, woraus aber aufgrund der Eindeutigkeit aus \ref{prop:tensorprodukt:i} bereits $\lambda' \circ \lambda = \id_T$ folgt. Analog folgt $\lambda \circ \lambda' = \id_{T'}$, also ist $\lambda$ bijektiv.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{defi}
	Das Paar $(T,h)$ aus \cref{prop:tensorprodukt} heißt das \emph{Tensorprodukt} von $M$ und $N$ über $A$. Wir schreiben $T = M \tp_A  N$ sowie $h(x,y) = x \tp y$ für $x \in M$ und $y \in N$.
\end{defi}
\begin{beme}
	\leavevmode
	\begin{enumerate}
		\item Die Notation \enquote{$x \tp y$} kann missverständlich sein, wenn nicht klar ist, was $M$ und $N$ sind.

		Sei beispielsweise $M=\IZ$, $N= \fak \IZ{2\IZ}$, $A = \IZ$ und $M' = 2 \IZ$. Betrachte $x=2$ und $y=1$. Dann gilt $2 \tp 1 = 0$ in $\IZ \tp_\IZ \fak \IZ{2\IZ}$, denn $2 \tp 1 = 2 \cdot 1 \tp 1 = 1 \tp 2 \cdot 1 = 0$, aber $2 \tp 1 \neq 0$ in $2\IZ \tp_\IZ \fak \IZ{2 \IZ}$, da $[2,1] \in D \setminus U$. Schönere Begründung (derzeit noch heuristisch): $2\IZ \cong \IZ$ via $2 \mapsto 1$, und somit
		\begin{alignat*}{5}
			&2\IZ \tp \fak \IZ{2\IZ} &&\cong &&\IZ \tp \fak \IZ{2\IZ} &&\cong &&\fak \IZ{2\IZ}, \\
			&2 \tp 1 &&\mapsto\; &&1 \tp 1 &&\mapsto\; &&1.
		\end{alignat*}
		\item Die Abbildung $M \times N \xrightarrow{h} M \tp_A N$ ist im Allgemeinen nicht surjektiv, aber $\gen{\im h}_A = M \tp_A N$.
	\end{enumerate}
\end{beme}
\begin{beme}
	\leavevmode
	\begin{enumerate}
		\item Seien $f\colon M \to N$ und $g\colon M' \to N'$ $A$-linear. Dann ist $M \times M' \xrightarrow{f \times g} N \times N' \to N \tp_A N'$ $A$-bilinear; wir erhalten also das folgende kommutative Diagramm.
		\begin{center}
			\begin{tikzcd}
				M \times M' \arrow{r}{f \times g} \arrow{d}{} & N \times N' \arrow{d}{} \\
				M \tp_A M' \arrow[dashrightarrow]{r}{\exists ! f \tp g} & N \tp_A N'
			\end{tikzcd}
		\end{center}
		\item Seien $M \xrightarrow{f} N \xrightarrow{g} P$ $A$-linear. Dann gilt $(g \circ f) \tp \id_{M'} = (g \tp \id_{M'}) \circ (f \tp \id_{M'})$.
	\end{enumerate}
\end{beme}
\begin{prop}
	Seien $M,N,P$ $A$-Moduln. Dann existieren eindeutig bestimmte Isomorphismen:
	\begin{enumerate}
		\item $M \tp_A N \xrightarrow{\cong} N \tp_A M, x \tp y \mapsto y \tp x$ \label{prop:tensorisos:i}
		\item $(M \oplus N) \tp_A P \xrightarrow{\cong} (M \tp_A P) \oplus (N \tp_A P), (x,y)\tp z  \mapsto (x \tp z,y\tp z)$ \label{prop:tensorisos:ii}
		\item $(M \tp_A N) \tp_A P \xrightarrow{\cong} M \tp_A (N \tp_A P), (x \tp y) \tp z \mapsto x \tp (y \tp z)$ \label{prop:tensorisos:iii}
		\item $A \tp_A M \xrightarrow{\cong} M, (a \tp x) \mapsto ax$ \label{prop:tensorisos:iv}
	\end{enumerate}
\end{prop}

\lecture{23. April 2018}

\begin{proof}
	Wir beweisen hier nur exemplarisch \ref{prop:tensorisos:ii}; die anderen Aussagen sind Übungsaufgaben oder lassen sich sehr analog beweisen.

	\bigskip
	
	Die Abbildung $(M\oplus N)\times P \to (M\tp_AP) \oplus(N\tp_AP), ((x,y),z)\mapsto (x\tp z, y\tp z)$ ist $A$-bilinear, folglich faktorisiert sie über das Tensorprodukt $(M\oplus N)\tp_aP$:
	\begin{center}
		\begin{tikzcd}
			(M\oplus N)\times P \arrow{r}\arrow{d}& (M\tp_AP)\oplus(N\tp_AP) \\
			(M\oplus N)\tp_AP \arrow[dashrightarrow]{ru}[swap]{\exists!\lambda}
		\end{tikzcd}
	\end{center}
	Folglich gilt: $\lambda((x,y)\tp z) = (x\tp z, y\tp z)$.

	Wir konstruieren nun eine Umkehrabbildung. Betrachte hierzu die Abbildungen
	\begin{gather*}
		i_M: M \to M \tp N, x \mapsto (x,0) \\
		i_N : N \to M \tp N, y \mapsto (0,y)
	\end{gather*}
	und das folgende kommutative Diagramm.
	\begin{center}
		\begin{tikzcd}
			M \tp_A P \arrow{r}{i_M \tp \id_P} \arrow{rd}[swap]{i_{M \tp_A P}} & (M \oplus N) \tp_A P & N \tp_A P \arrow{l}[swap]{i_N \tp \id_P} \arrow{ld}{i_{N \tp_A P}} \\
			& (M \tp_A P) \oplus (N \tp_A P) \arrow[dashrightarrow]{u}{\exists!\lambda'}
		\end{tikzcd}
	\end{center}
	Nun gilt
	\begin{align*}
		\lambda'(x \tp z, y \tp z') &= \lambda'(x \tp z,0)+ \lambda'(0,y \tp z') \\
		&= \lambda'(i_{M \tp_A P}(x \tp z))+ \lambda'(i_{N \tp_A P}(y \tp z')) \\
		&= (i_M \tp \id_P)(x \tp z) + (i_N \tp \id_P)(y \tp z') \\
		&= (x,0) \tp z + (0,y) \tp z',
	\end{align*}
	also folgt aufgrund der Bilinearität des Tensorprodukts \[ (\lambda \circ \lambda')((x,y)\tp z) = \lambda'(x \tp z, y \tp z) = (x,0) \tp z + (0,y) \tp z = (x,y)\tp z .\]
	Genauso erhalten wir $(\lambda \circ \lambda')(x \tp z,y \tp z') = (x\tp z, y \tp z')$, also folgt $\lambda' \circ \lambda = \id$ und $\lambda \circ \lambda' = \id$.
\end{proof}
\begin{kor}
	Sei $M$ bzw. $N$ ein freier $A$-Modul mit Basis $(x_i)_{i \in I}$ bzw. $(y_j)_{j\in J}$. Dann ist $M \tp_A N$ ein freier $A$-Modul mit Basis $(x_i\tp y_j)_{i \in I, j\in J}$.
\end{kor}
\begin{proof}
	Es gilt $M \cong \bigoplus\limits_{i\in I} A$ und $N \cong \bigoplus\limits_{j\in J} A$. Daraus folgt \[ M \tp_A N \cong  \bigoplus_{i\in I} A \tp_A \bigoplus_{j\in J} A \cong \bigoplus_{i \in I}\underbrace{(A \tp_A N)}_{\cong N} \cong \bigoplus_{i\in I}\bigoplus_{j\in J}A. \qedhere \]
\end{proof}
\begin{prop}[Adjunktion von $\tp$ und $\Hom$]
	Seien $M,N,P$ $A$-Moduln. Dann existiert ein eindeutiger Isomorphismus von $A$-Moduln
	\begin{eqnarray*}
		\Phi\colon \Hom_A (M \tp_AN , P ) &\xlongrightarrow{\cong}& \Hom_A(M, \Hom_A(N, P)), \\
		f &\mapsto& x \mapsto (y \mapsto f(x \tp_A y)).
	\end{eqnarray*}
\end{prop}
\begin{proof}
	$\Phi$ ist wohldefiniert und $A$-linear. Wir suchen nun eine Umkehrfunktion $\Psi : \Hom_A(M, \Hom_A(N, P)) \to \Hom_A (M \tp_A N, P )$. Sei $g \in \Hom_A(M, \Hom_A(N,P))$. Betrachte
	\begin{center}
		\begin{tikzcd}[column sep=2.5cm]
			M \times N \arrow{r}{(x,y) \mapsto (g(x))(y)} \arrow{d} & P \\
			M \tp_A N \arrow[dashrightarrow]{ru}[swap]{\exists! \Psi(g)}
		\end{tikzcd}
	\end{center}
	$\Psi(g)$ ist $A$-linear, da $g$ und $g(x)$ $A$-linear sind. Nun folgt
	\begin{align*}
		(\Psi(g))(x \tp y) &= (g(x))(y) \\
		((\psi \circ \phi)(f))(x \tp y) &= ((\phi(f))(x))(y) = (f(x \tp \_))(y) = f(x \tp y) \\
		((\phi \circ \psi)(g))(x) &= (\psi(g))(x \tp \_) = (g(x))(\_) = g(x). \qedhere
	\end{align*}
\end{proof}

\subsection{Flache Moduln}
\begin{defi}
	Eine Sequenz von $A$-Moduln \[ \ldots \longrightarrow M_{i-1} \xlongrightarrow{f_{i-1}} M_i \xlongrightarrow{f_{i}} M_{i+1} \longrightarrow \ldots \] (Sequenz kann endlich sein, aber auch unendlich nach links, rechts oder nach beiden Seiten) heißt \emph{exakt} wenn $\im f_{i-1} = \ker f_i$ für alle $i \in \IZ$ gilt. Insbesondere gilt:
	\begin{eqnarray*}
		0 \longrightarrow M' \xlongrightarrow{f} M \text{ exakt} &\Longleftrightarrow& \text{$f$ injektiv} \\
		M \xlongrightarrow{g} M' \longrightarrow 0 \text{ exakt} &\Longleftrightarrow& \text{$g$ surjektiv}
	\end{eqnarray*}
	Eine \emph{kurze exakte Sequenz} ist von der folgenden Form:
	\begin{eqnarray*}
		0 \longrightarrow M' \xlongrightarrow{f} M \xlongrightarrow{g} M'' \longrightarrow 0 &\Longleftrightarrow& \text{$f$ injektiv, $g$ surjektiv, $\im f = \ker g$}
	\end{eqnarray*}
\end{defi}
\begin{prop} \label{prop:exaktheit tensorieren}
	\leavevmode
	\begin{enumerate}
		\item Sei
		\begin{equation}
			M_1 \xlongrightarrow{f_1} M_2 \xlongrightarrow{f_2} M_3 \longrightarrow 0 \tag{*} \label{prop:homexakt:i:eq}
		\end{equation}
		eine Sequenz von $A$-Moduln mit $g \mapsto g \circ f_i$. Dann sind äquivalent:
		\begin{enumerate}
			\item \eqref{prop:homexakt:i:eq} ist exakt.
			\item Für alle $A$-Moduln $N$ ist die Sequenz \[ 0 \longrightarrow \Hom_A(M_3, N) \xlongrightarrow{f_2^*} \Hom_A(M_2,N) \xlongrightarrow{f_1^*} \Hom_A(M_1,N) \] exakt.
		\end{enumerate} \label{prop:homexakt:i}
		\item Sei
		\begin{equation}
			0 \longrightarrow N_1 \xlongrightarrow{g_1} N_2 \xlongrightarrow{g_2} N_3 \tag{**} \label{prop:homexakt:ii:eq}
		\end{equation}
		eine Sequenz von $A$-Moduln mit $f \mapsto g_i \circ f$. Dann sind äquivalent:
		\begin{enumerate}
			\item \eqref{prop:homexakt:ii:eq} ist exakt.
			\item Für alle $A$-Moduln $M$ ist die Sequenz \[ 0 \longrightarrow \Hom_A(M, N_1) \longrightarrow \Hom_A(M,N_2) \longrightarrow \Hom_A(M,N_3) \] exakt.
		\end{enumerate} \label{prop:homexakt:ii}
		\item Sei \eqref{prop:homexakt:i:eq} wie in \ref{prop:homexakt:i}. Falls \eqref{prop:homexakt:i:eq} exakt und $N$ ein $A$-Modul ist, so ist die Sequenz \[ M_1 \tp_A N \xlongrightarrow{f_1 \tp \id_N} M_2 \tp_A N \xlongrightarrow{f_2 \tp \id_N} M_3 \tp_A N \longrightarrow 0 \] exakt. \label{prop:homexakt:iii}
	\end{enumerate}
\end{prop}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[zu \ref{prop:homexakt:i} und \ref{prop:homexakt:ii}:] siehe \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt3.pdf}{Übungsblatt 3}.
		\item[zu \ref{prop:homexakt:iii}:] Sei \eqref{prop:homexakt:i:eq} exakt und $P$ ein $A$-Modul. Dann folgt mit \ref{prop:homexakt:i}
		\begin{center}
			\begin{tikzpicture}[baseline= (a).base]
				\node[scale=.8] (a) at (0,0){
					\begin{tikzcd}
						0 \arrow{r}{} & \Hom_A(M_3, \Hom_A(N,P)) \arrow{r}{f_2^*} \arrow[Cong]{d}{\;\text{ Adj}} & \Hom_A(M_2, \Hom_A(N,P)) \arrow{r}{f_1^*} \arrow[Cong]{d}{} & \Hom_A(M_1, \Hom_A(N,P)) \arrow[Cong]{d}{} \\
						0 \arrow{r}{} &\Hom_A(M_3 \tp_A N, P) \arrow{r}{(f_2 \tp \id_N)^*} & \Hom_A(M_2 \tp_A N, P) \arrow{r}{(f_1 \tp \id_N)^*} & \Hom_A(M_1 \tp_A N, P)
					\end{tikzcd}
				};
			\end{tikzpicture}
		\end{center}
		Da die obere Sequenz exakt ist, ist auch die untere Sequenz exakt. Da $P$ beliebig ist, folgt wieder mit \ref{prop:homexakt:i} die gewünschte Exaktheit.
		\qedhere
	\end{description}
\end{proof}
\begin{beme}
	\leavevmode
	\begin{enumerate}
		\item Sei $f\colon M\to M'$ eine surjektive $A$-lineare Abbildung. Dann ist $f \tp_A \id_N\colon M \tp_A N \to M' \tp_ A N $ auch surjektiv.
		\item Ist $f$ injektiv, so ist $f \tp \id_N$ nicht notwengierweise injektiv. Sei beispielsweise $a \in A \setminus A^{\times}$ kein Nullteiler. Betrachte $f: A \to A, x \mapsto ax$. Da $a$ kein Nullteiler ist, ist $f$ injektiv. Betrachte nun $N = \fak A{(a)}$ und das folgende (nichtkommutative!) Diagramm.
		\begin{center}
			\begin{tikzcd}
				A \tp_A \fak A{(a)} \arrow{r}{f \tp \id} \arrow[Equals]{d}{} & A \tp_A \fak A{(a)} \arrow[Equals]{d}{} \\
				\fak A{(a)} \arrow{r}{x \mapsto ax} & \fak A{(a)}
			\end{tikzcd}
		\end{center}
	\end{enumerate}
\end{beme}
\begin{defi}
	Ein $A$-Modul $N$ heißt \emph{flach} (\enquote{flat}), wenn für alle $A$-linearen injektiven Abbildungen $f: M' \to M$ dann auch \[ f \tp \id_N \colon M' \tp_A N \to M \tp_A N \] injektiv ist.
\end{defi}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Wenn $N$ frei ist, ist $N$ auch flach.
		\begin{proof}
			Ist $N$ frei, so gilt $\bigoplus_{i \in I} A \cong N$. Sei $f\colon M' \to M$ injektiv. Betrachte nun das folgende Diagramm.
			\begin{center}
				\begin{tikzcd}
					M' \tp_A N \arrow{r}{f \tp \id_N} \arrow[Cong]{d}{} & M \tp_A N  \arrow[Cong]{dd}{}\\
					\bigoplus_{i \in I}(M' \tp_A A) \arrow[Cong]{d}{}  \\
					\bigoplus_{i \in I} M' \arrow{r}{} & \bigoplus_{i \in I} M \\
					(x_i) \arrow[mapsto]{r}{} &(f(x_i))
				\end{tikzcd}
			\end{center}
		\end{proof}
		\item Ist $a \in A \setminus A^{\times}$ kein Nullteiler, so ist $\fak A {(a)}$ nicht flach.
	\end{enumerate}
\end{bsp}
\begin{prop}
	Sei $N$ ein $A$-Modul. Dann sind äquivalent:
	\begin{enumerate}
		\item $N$ ist flach. \label{prop:flach:i}
		\item Falls \[ 0 \longrightarrow M' \longrightarrow M \longrightarrow M'' \longrightarrow 0 \] exakt ist, so ist auch \[ 0 \longrightarrow M' \tp_A N \longrightarrow M \tp_A N \longrightarrow M'' \tp_A N \longrightarrow 0 \] exakt. \label{prop:flach:ii}
		\item Falls \[ \ldots \longrightarrow M_{i-1} \xlongrightarrow{f_{i-1}} M_i \xlongrightarrow{f_{i}} M_{i+1} \longrightarrow \ldots \] exakt ist, so ist auch \[ \ldots \longrightarrow M_{i-1}\tp_A N \xlongrightarrow{f_{i-1}\tp\id} M_i\tp_A N \xlongrightarrow{f_{i}\tp\id} M_{i+1}\tp_A N \longrightarrow \ldots \] exakt. \label{prop:flach:iii}
	\end{enumerate}
\end{prop}
\begin{proof}
	Die Implikationen \enquote{\ref{prop:flach:iii} $\Rightarrow$ \ref{prop:flach:ii}} und \enquote{\ref{prop:flach:ii} $\Rightarrow$ \ref{prop:flach:i}} sind klar. Gelte also \ref{prop:flach:i}. Betrachte nun das folgende Diagramm.
	\begin{center}
		\begin{tikzcd}
			&&&0 \arrow[blue]{d}{}&0 \\
			&&& \im f_i \arrow[red]{ru} \arrow[blue]{d}{} \\
			& M_{i-1} \arrow{r}{f_{i-1}} \arrow[green]{d}{\pi} & M_i \arrow[red]{ru}{\tilde f_i} \arrow{r}{f_i} & M_{i+1} \\
			& \fak {M_{i-1}}{\ker f_{i-1}} \arrow[red]{ru}{\tilde f_{i-1}} \arrow[green]{d} \\
			0 \arrow[red]{ru}{} & 0
		\end{tikzcd}
	\end{center}
	Wir nennen die grüne bzw. rote bzw. blaue Sequenz \circled{1} bzw. \circled{2} bzw. \circled{3}. Diese sind jeweils exakt. Da $N$ flach ist, bleiben \circled{1}, \circled{2} und \circled{3} nach dem Tensorieren ($\hat= \, \_ \tp_a N$) exakt. Somit gilt:
	\begin{center}
		\begin{tikzcd}[sep=3cm]
			\im(\tilde f_{i-1} \tp \id_N) \arrow[equal]{r}{\text{Exaktheit von \enquote{$\circled{2} \tp N$}}} \arrow[equal]{d}[swap]{\text{Exaktheit von \enquote{$\circled{1} \tp N$}}} & \ker(\tilde f_i \tp \id_N) \arrow[equal]{d}{\text{Exaktheit von \enquote{$\circled{3} \tp N$}}} \\
			\im(f_{i-1}\tp \id_N) & \ker(f_i\tp\id_N)
		\end{tikzcd}
	\end{center}
	Wir beweisen $\im(\tilde f_{i-1}\tp\id_N) = \im(f_{i-1} \tp \id_N)$ noch genauer.
	\begin{description}
		\item[\enquote{$\supseteq$}] Klar.
		\item[\enquote{$\subseteq$}] Sei $x \in \im(\tilde f_{i-1}\tp\id_N)$. Dann existiert ein $y \in \fak {M_{i-1}}{\ker f_{i-1}}$ mit $(\tilde f_{i-1}\tp\id_N)(y) = x$. Da $\pi \tp \id_N$ surjektiv ist, existiert ein $z \in M_{i-1} \tp N$ mit $(\pi \tp \id_N)(z) = y$. Dann gilt $x = (\tilde f_{i-1} \tp \id_N)((\pi \tp \id_N)(z)) = (f_{i-1}\tp \id_N)(z)$.
	\end{description}
	Somit gilt \ref{prop:flach:iii}.
\end{proof}

\lecture{26. April 2018}

\section{Algebren}
\subsection{Grundbegriffe}
\begin{defi}
	Sei $A$ ein Ring. Eine \emph{$A$-Algebra} ist Paar $(B,\phi)$, wobei $B$ ein Ring und $\phi\colon A\to B$ ein Ringhomomorphismus ist. Wir nennen die $A$-Algebra $(B,\phi)$ auch kurz $B$.
\end{defi}
\begin{beme}
	\leavevmode
	\begin{enumerate}
		\item Jeder Ring ist eine $\IZ$-Algebra auf eindeutige Art.
		\item Ist $B$ eine $A$-Algebra, so ist ${}_AB$ ein $A$-Modul. Die Multiplikation $B\times B\to B$ ist $A$-bilinear.
		\item Wenn $B$ eine $A$-Algebra und $C$ eine $B$-Algebra ist, dann ist $C$ auch eine $A$-Algebra (durch Verknüpfung der Abbildungen).
	\end{enumerate}
\end{beme}
\begin{defi}
	Seien $(B, \phi_B),(C,\phi_C)$ $A$-Algebren. Ein Ringhomomorphismus $f\colon B\to C$ heißt \emph{$A$-Algebrenhomomorphismus}, wenn folgendes Diagramm kommutiert.
	\begin{center}
		\begin{tikzcd}
			B \arrow{r}{f}  & C \\
			A \arrow{u}{\phi_B}\arrow{ur}[swap]{\phi_C}	&
		\end{tikzcd}
	\end{center}
\end{defi}
\begin{bsp}
	Sei $B$ eine $A$-Algebra und $b\in B$. Betrachte den Ringhomomorphismus $\ev_b\colon A[t]\to B$. Dann kommutiert das folgende Diagramm.
	\begin{center}
		\begin{tikzcd}
			A[t] \arrow{r}{\ev_b}  & B \\
			A \arrow{u}{}\arrow{ur}{}	&
		\end{tikzcd}
	\end{center}
	Folglich ist $\ev_b$ ein $A$-Algebrenhomomorphismus.
\end{bsp}

\begin{defi}
	Sei $B$ eine $A$-Algebra. $B$ heißt \emph{endlich erzeugte $A$-Algebra}, wenn ein $n>0$ sowie $b_1, \dots, b_n\in B$ existieren, sodass
	\[\ev_{b_1,\dots, b_n}\colon A[t_1,\dots, t_n] \longto B\]
	surjektiv ist.
\end{defi}

\begin{beme}
	Sei $B$ eine $A$-Algebra. Falls ${}_AB$ ein endlich erzeugter $A$-Modul ist, dann ist $B$ eine endlich erzeugte $A$-Algebra; die Umkehrung ist im Allgemeinen falsch (Gegenbeispiel ist z.B. der Polymomring).
\end{beme}

\begin{lem} \label{lem:endl erz transitiv}
	Sei $B$ eine $A$-Algebra und $N$ ein $B$-Modul. Falls $N$ ein endlich erzeugter $B$-Modul und ${}_AB$ endlich erzeugt als $A$-Modul ist, dann ist ${}_AN$ endlich erzeugt als $A$-Modul.
\end{lem}
\begin{proof}
	Sei $\{y_1,\dots, y_n\}$ Erzeugendensystem von $N$ als $B$-Modul und $\{x_1,\dots, x_m\}$ ein Erzeugendensystem von $B$ als $A$-Modul. Dann ist aber $\{x_iy_i\}$ Erzeugendensystem von ${}_AN$ als $A$-Modul.
\end{proof}

\subsection{Skalarerweiterung}
\begin{bem}
	Sei $M$ ein $A$-Modul, $B$ eine $A$-Algebra. Betrachte $B\tp_AM$. Fixiere $b'\in B$. Betrachte die Abbildung
	\[\begin{array}{ccccc}
	B\times M & \longto & B\times M & \longto & B\tp_AM\\
	(b,x) & \longmapsto & (b'b,x) & \longmapsto & b'b\tp x
	\end{array}\]
	Diese Abbildung ist bilinear ($\tp_A$ ist $A$-bilinear, Multiplikation auf $B$ ist $A$-bilinear).
	\begin{center}
		\begin{tikzcd}[column sep=3cm]
			B\times M \arrow{r}{(b,x) \mapsto (b'b,x)}\arrow{d}  & B\times M\arrow{d} \\
			B\tp_AM \arrow[dashrightarrow]{r}[swap]{\exists ! m_{b'} \text{ $A$-linear}}	& B\tp_AM 
		\end{tikzcd}
	\end{center}
\end{bem}
\begin{defi}
	Definiere nun 
	\begin{eqnarray*}
		m\colon B\times B\tp_AM&\longto& B\tp_AM\\
		(b', y) & \longmapsto & m_{b'}(y)
	\end{eqnarray*}

	Behauptung: $(B\tp_AM, +,\cdot)$ ist ein $B$-Modul (wobei die Multiplikation durch $m$ definiert wird).
	\begin{proof}
	Wir zeigen exemplarisch die Assoziativität: Seien $b'',b'\in B$ und $y\in B\tp_AM$. Zeige $m(b'', m(b',y)) = m(b''b', y)$. Sei $y = \sum b_i\tp x_i$ für $b_i\in B, x_i\in M$. Dann ist $m(b'', m(b', \sum b_i\tp x_i)) = m(b'', \sum b'b_i\tp x_i) = \sum b''b'b_i\tp x_i = m(b''b', \sum b_i\tp x_i)$.	
	\end{proof}
	$B\tp_AM$ heißt \emph{Skalarerweiterung} von $M$ nach $B$. (\enquote{extension of scalars})
	% TODO: füge literaturverweis zu ext. of scalars ein
	% auch TODO: herausfinden, in welche Literatur das soll
	
\end{defi}
\begin{beme} \label{bem:3.9}
	Sei $f\colon M\to N$ $A$-linear und $B$ eine $A$-Algebra. Dann ist \[\id_B\tp f\colon B\tp_AM\to B\tp_AN\] eine $B$-lineare Abbildung.
\end{beme}
\begin{proof}
	Sei $b'\in B, y = \sum b_i\tp x_i\in B\tp_AM$. Dann gilt
	\begin{align*}
		&(\id_B\tp f)\left(b'\cdot\left(\sum b_i\tp x_i\right)\right) = (\id_B\tp f)\left(\sum b'b_i\tp x_i\right) =\sum \id_B(b'b_i)\tp f(x_i)  \\
		&=\sum b'b_i\tp f(x_i) = b'\left(\sum b_i\tp f(x_i)\right) = b'(\id_b\tp f)\left(\sum b_i\tp x_i\right). \qedhere
	\end{align*}
\end{proof}

\begin{satz}[Adjunktion von Skalarerweiterung und Restriktion der Skalare]
	Sei $B$ eine $A$-Algebra, $M$ ein $A$-Modul und $N$ ein $B$-Modul.
	\begin{enumerate}
		\item Sei $f\colon M\to {}_AN$ $A$-linear. Dann existiert genau eine $B$-lineare Abbildung \[f_B\colon B\tp_AM\to N\] mit $f_B(b\tp x) = bf(x)$. \label{thm:scalarerweiterung:i}
		\item Die Abbildung $\Phi\colon \Hom_A(M,{}_AN)\to \Hom_B(B\tp_AM,N), f\mapsto f_B$ ist $A$-linear und bijektiv. \label{thm:scalarerweiterung:ii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:scalarerweiterung:\roman*}]
		\item Betrachte $B\times M\to N, (b,x)\mapsto bf(x)$. Diese Abbildung ist $A$-bilinear, da $f$ $A$-linear und $B$ eine $A$-Algebra ist. Folglich kommutiert
		\begin{center}
			\begin{tikzcd}
				B\times M \arrow{r}\arrow{d}  & N \\
				B\tp_AM. \arrow{ur}[swap]{\exists! f_B \text{ $A$-linear}} &
			\end{tikzcd}
		\end{center}
		Es verbleibt die $B$-Linearität von $f_B$ zu zeigen, was analog zu \cref{bem:3.9} geschieht.
		\item Wir konstruieren eine Umkehrabbildung $\Psi\colon \Hom_B(B\tp_AM,N)\to \Hom_A(M,{}_AN)$. Sei $g\colon B\tp_AM\to N$. Definiere $\Psi(g) := g(1\tp \_)\colon M\to N, x\mapsto g(1\tp x)$.
		Dabei ist $g(1\tp\_)$ tatsächlich $A$-linear, da $g(1\tp ax ) = g(a(1\tp x)) = ag(1\tp x)$ gilt.
		
		Zeige nun noch $(\Psi\circ \Phi)(f) = f$ und $(\Phi\circ\Psi)(g) = g$. Hierzu gilt
		\begin{align*}
			((\Psi\circ\Phi)(f))(x) &= (\Phi(f))(1\tp x) = f_b(1\tp x) =1\cdot f(x) \\
			\intertext{und}
			((\Phi\circ\Psi)(g))(b\tp x) &= (\Psi(g))_B(b\tp x) = b\cdot (\Psi(g))(x) = b\cdot g(1\tp x) = g(b\tp x).
		\end{align*}
		Kurzes Nachrechnen liefert schließlich, dass $\Phi$ auch $A$-linear ist.
		\qedhere
	\end{enumerate}	
\end{proof}
\begin{lem} \label{lem:3.11}
	Sei $B$ eine $A$-Algebra, $N$ ein $B$-Modul und $M$ ein $A$-Modul.
	\begin{enumerate}
		\item $N\tp_AM$ ist ein $B$-Modul via $b\cdot(\sum y_i\tp x_i) = \sum by_i\tp x_i$. \label{lem:311:i}
		\item Es existiert ein eindeutiger Isomorphismus $N\tp_AM\to N\tp_B(B\tp_AM)$ von $B$-Moduln mit $y\tp x\mapsto y\tp (1\tp x)$. \label{lem:311:ii}
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:311:\roman*}]
		\item So wie bei der Erweiterung der Skalare.
		\item Übung. \qedhere
	\end{enumerate}
\end{proof}

\begin{prop} \label{prop:3.12}
	Sei $B$ eine $A$-Algebra, $C$ eine $B$-Algebra und $M$ ein $A$-Modul. Dann existiert genau ein Isomorphismus
	\[C\tp_A M  \longmapsto  C\tp_B(B\tp_AM)\]
	von $C$-Moduln mit $c\tp x\mapsto c\tp(1\tp x)$.
\end{prop}
\begin{proof}
	Nach \cref{lem:3.11} existiert genau ein Isomorphismus von $B$-Moduln
	\[ f\colon C\tp_AM\longto C\tp_B(B\tp_AM)\]
	mit $f(c\tp x) = c\tp(1\tp x)$. Wir zeigen noch, dass $f$ $C$-linear ist. Sei $z = \sum c_i\tp x_i$ mit den $c_i\in C$. Wir erhalten
	\begin{align*}
		f(c\sum c_i\tp x_i) &= f\left(\sum cc_i\tp x_i \right) = \sum f(cc_i\tp x_i) = \sum cc_i\tp(1\tp x_i) \\
		&= c\sum c_i\tp(1\tp x_i). \qedhere
	\end{align*}
\end{proof}

\begin{satz}
	Sei $B$ eine $A$-Algebra, $M$ ein $A$-Modul sowie $(P)$ eine der folgenden Eigenschaften:
	\begin{enumerate}
		\item frei \label{thm:tensorieren erhaelt eigenschaften:i}
		\item endlich erzeugt \label{thm:tensorieren erhaelt eigenschaften:ii}
		\item endlich präsentiert \label{thm:tensorieren erhaelt eigenschaften:iii}
		\item flach \label{thm:tensorieren erhaelt eigenschaften:iv}
	\end{enumerate}	
	Dann gilt: Falls $M$ die Eigenschaft $(P)$ als $A$-Modul hat, hat $B\tp_AM$ die Eigenschaft $(P)$ als $B$-Modul.
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:tensorieren erhaelt eigenschaften:\roman*}]
		\item Sei $M$ ein freier $A$-Modul. Folglich gilt $M \cong \bigoplus_{i\in I}A$ und wir erhalten \[B\tp_AM\cong B\tp \left(\bigoplus_{i\in I}A\right) \cong \bigoplus_{i\in I}(B\tp_A A) \cong \bigoplus_{i\in I} B\] als $B$-Moduln mit \cref{bem:3.9}.
		\item Sei $M$ ein endlich erzeugter $A$-Modul. Dann existiert eine surjektive, $A$-lineare Abbildung $f\colon A^n\to M$. Folglich ist
		\[\id_B\tp f\colon B\tp_AA^n\to B\tp_AM\] surjektiv nach \cref{prop:exaktheit tensorieren} und $B$-linear nach \cref{bem:3.9}. Aber wir haben eben gesehen, dass $B\tp_AA^n \cong B^n\Rightarrow B\tp_AM$ endlich erzeugt ist.
		\item Sei $M$ als $A$-Modul endlich präsentiert. Dann existiert eine surjektive Abbildung $f\colon A^n \to M$ mit endlich erzeugtem Kern, weshalb wiederum eine surjektive Abbildung $g\colon A^m \to \ker f$ existiert. Betrachte nun $g'\colon A^m \to \ker f \to A^n$, hierbei gilt $\im g' = \ker f$. Somit existiert eine exakte Sequenz der Form
		\[ A^m \longto A^n \longto M\longto 0. \]
		
		Aus \cref{prop:exaktheit tensorieren} folgt nun, dass es die folgende exakte Sequenz gibt:
		\[B\tp A^m \longto B\tp A^n \longto B\tp_AM\longto 0\]
		Damit ist auch $B\tp_AM$ endlich präsentiert als $B$-Modul.
		\item \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt3.pdf}{Übungsblatt 3}.
		\qedhere
	\end{enumerate}
\end{proof}

\lecture{30. April 2018}
\begin{satz}
	Seien $A$ ein Ring sowie $B$ und $C$ $A$-Algebren.
	\begin{enumerate}
		\item Es existiert eine eindeutig bestimmte $A$-bilineare Abbildung
		\[ m\colon B\tp_A C\times B\tp_A C\longto B\tp_A C \]
		mit $m(b\tp c, b'\tp c') = bb'\tp cc'$. \label{thm:314:i}
		\item $(B\tp_AC, +, m)$ ist ein Ring (und sogar eine $A$-Algebra). \label{thm:314:ii}
		\item Die Abbildungen
		\begin{align*}
			\begin{array}{rcl}
				B &\longto& B \tp_A C \\
				b &\longmapsto& b \tp 1
			\end{array} &&
			\begin{array}{rcl}
				C &\longto& B \tp_A C \\
				c &\longmapsto& 1 \tp c
			\end{array}
		\end{align*}
		sind Ringhomomorphismen. \label{thm:314:iii}
		\item Das Diagramm
		\begin{center}
			\begin{tikzcd}
				B\tp_A C & B \arrow{l}[swap]{b\mapsto b\tp 1} \\
				C \arrow{u}{c\mapsto 1\tp c} & A\arrow{l}\arrow{u}
			\end{tikzcd}
		\end{center}
		kommutiert. \label{thm:314:iv}
		\item Sei $D$ ein Ring sowie $B\xrightarrow{\phi} D$ und $C\xrightarrow{\psi}D$ Ringhomomorphismen, sodass
		\begin{center}
			\begin{tikzcd}
				D  & B \arrow{l}{\phi} \\
				C \arrow{u}{\psi}	& A\arrow{l}\arrow{u}
			\end{tikzcd}
		\end{center}
		kommutiert, dann existiert genau ein Ringhomomorphismus $\lambda\colon B\tp_AC\to D$ mit
		\begin{center}
			\begin{tikzcd}[sep=1cm]
				D \\
				& B \tp_A C \arrow[dashrightarrow]{lu}{\exists! \lambda} & B \arrow{l} \arrow[bend right]{llu}[swap]{\phi} \\
				& C \arrow[bend left]{luu}{\psi} \arrow{u}&A. \arrow{u}\arrow{l}
			\end{tikzcd}
		\end{center} \label{thm:314:v}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:314:\roman*}]
		\item Betrachte für $(b,c)\in B\times C$ die $A$-bilineare Abbildung $B\times C\to B\tp_AC, (b'c')\mapsto bb'\tp cc'$ mit
		\begin{center}
			\begin{tikzcd}
				B\times C\arrow{d}\arrow{r}& B\tp_AC\\
				B\tp_AC.\arrow[dashrightarrow]{ru}[swap]{\exists!\phi_{(b,c)} \text{ $A$-linear}}
			\end{tikzcd}
		\end{center}
		Daraus folgt, dass das Diagramm
		\begin{center}
			\begin{tikzcd}[column sep=2cm]
				B\times C\arrow{r}{(b,c)\mapsto \phi_{(b,c)}}& \Hom_A(B\tp_AC, B\tp A, C) A-\text{bilinear}\\
				B\tp_AC\arrow[dashrightarrow]{ru}[swap]{\exists!\phi\text{ $A$-linear}}
				% TODO: verstehen, was Notation rechts oben bedeuten soll
			\end{tikzcd}
		\end{center}
		kommutiert.
		%TODO: Insert Diagram here
		
		Nach Definition von $\Phi$ gilt nun
		\[m(b\tp c, b'\tp c') = (\phi(b\tp c))(b'\tp c') = \phi_{(b,c)}(b'\tp c') = bb'\tp cc'.\]
		\item Nachrechnen mit \ref{thm:314:i} und Rechenregeln für $\tp$, wobei $1_{B\tp_AC}= 1\tp 1$ zu beachten ist.
		\item Die Abbildungen $\phi_B\colon B\to B\tp_AC, b\mapsto b\tp 1$ erfüllt $\phi_B(1) = 1$ und $\phi_B(bb') =\phi_B(b)\phi_B(b')$.
		\item Für $a\in A$ gilt: $a\tp_A1 = a\cdot(1\tp_A1) = 1\tp_A a$.
		\item Existenz von $\lambda$: Betrachte die Abbildung
		\begin{eqnarray*}
			B\times C &\longto & D\\
			(b,c) &\longmapsto &\phi(b)\cdot \psi(c)
		\end{eqnarray*}
	
		\noindent
		Sie ist $A$-bilinear und faktorisiert damit über das Tensorprodukt zu $\lambda\colon B\tp_AC\to D$ $A$-linear. Zeige nun: $\lambda$ ist Ringhomomorphismus. Dazu $b,b'\in B, c,c'\in C$:
		\[\lambda((b\tp c)(b'\tp c')) = \phi(b)\phi(b')\psi(c)\psi(c') = \lambda(b\tp c)\lambda (b'\tp c')\]
		
		\begin{bem}
			Seien $R,S$ beide $A$-Algebren, $\lambda\colon R\to S$ sei $A$-linear, sei $\{x_i\}$ Erzeugendensystem von $R$ als $A$-Modul. Falls $\lambda(x_i,x_j) =\lambda(x_i)\lambda(x_j)$ und $\lambda(1) = 1$, also ist $\lambda$ ein Ringhomomorphismus.
		\end{bem}
	
		Nun zur Eindeutigkeit: Sei $\lambda'$ ein weiterer Ringhomomorphismus wie oben. Dann ist $\lambda'$ $A$-linear, reicht also auf reinen Tensoren zu prüfen.
		\[\lambda'(b\tp c) = \lambda'((b\tp 1)\cdot(1\tp c)) = \phi(b)\cdot \psi(c) = \lambda(b\tp c)\]
		wobei die vorletzte Gleichheit daraus folgt, dass $\lambda'$ Ringhomomorphismus ist, sodass das Diagramm kommutiert.
		\qedhere
	\end{enumerate}
\end{proof}

\begin{bsp}
	Sei $B$ eine $A$-Algebra und $C= A[t]$. Dann ist $B\tp_AA[t]\cong B[t]$ (als $A$-Algebra, da
	\begin{center}
		\begin{tikzcd}
			B[t]& B\arrow{l}\\
			A[t]\arrow{u} & A\arrow{l}\arrow{u}
		\end{tikzcd}
	\end{center}
	kommutiert und $B[t]$ dafür universell ist.
\end{bsp}


\section{Moduln über Hauptidealringen}
\label{sec:moduln ueber hir}

Es sei an dieser Stelle nochmals auf folgende Literatur verwiesen:

\printbibliography[keyword=moduln-hir,heading=none]

Zur Erinnerung: Sei $A$ ein Ring. $A$ heißt Hauptidealring (\enquote{principle ideal domain}), falls $A$ ein Integritätsbereich und jedes Ideal ein Hauptideal ist. Wir wissen, dass jeder Hauptidealring faktoriell ist.

Sei $M$ endlich erzeugter $A$-Modul. Unser Ziel ist es, $M$ als direkte Summe in $A$-Moduln, die sich nicht weiter zerlegen lassen, zu zerlegen. Unsere Hauptanwendung wird dann sein: Betrachte $A = k[t]$, $k$ Körper, $M=$ Modul assoziiert zu $(V,\psi)$, wobei $V$ ein endlich-dimensionaler $k$-Vektorraum ist und $\psi\in\End_k(V)$.

\subsection{Freie Moduln}
\begin{beme}
	Sei $F$ ein freier $A$-Modul und $\{x_i\}_{i\in I}, \{y\}_{j\in J}$ Basen von $F$. Dann existiert eine Bijektion zwischen $I$ und $J$.
\end{beme}
\begin{proof}
	\href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt3.pdf}{Übungsblatt 3}.
\end{proof}

Wir werden die folgende Notation verwenden: $\rk F := \abs I \in\IZ_{\ge 0}\cup \{\infty\}$ heißt \emph{Rang von $F$}.

\begin{satz} \label{thm:untermoduln freier moduln in hir}
	Sei $A$ ein Hauptidealring, $F$ freier $A$-Modul, $M\subseteq F$ Untermodul. Dann ist $M$ frei und $\rk M\le \rk F$.
\end{satz}
\begin{proof}
	Wir beweisen das nur für den Fall $\rk F<\infty$ (siehe \cite[Theorem 6.1]{hungerford} für den allgemeinen Fall).
	
	Sei $\{x_1,\dots, x_n\}$ Basis von $F$ ($\rk F = n$). Für $r\in\{1,\dots n\}$ definiere
	\[M_r := \<x_1,\dots, x_r\>_A\cap M.\]
	
	Wir behaupten, dass $M_r$ frei und $\rk M_r \le r$ ist, und zeigen dies per Induktion nach $r$.
	\begin{description}
		\item[$r = 1$:] Wir haben $M_1 = \<x_1\>_A\cap M$; dann gibt es einen Isomorphismus $\phi\colon A\xto{\cong} \<x_1\>, a\mapsto ax_1$. Folglich ist $\phi^{-1}(M_1)\subseteq A$ ein Ideal und es existiert ein $a\in A$ mit $\phi^{-1}(M_1) = (a)$; es folgt also \[M_1 = \<ax_1\> \cong \begin{cases} A & a\neq 0,\\ 0& a= 0.\end{cases}\] % hier stand mal noch $\<x_1\>_A\subseteq \<x_1\>$, allerdings ist unklar, warum das nicht intrinsisch trivial ist
		Beachte dabei: $\{x_1\}$ ist linear unabhängig, also $ax_1\neq 0 \Leftrightarrow a\neq 0$.
		\item[$r\to r+1$:] Betrachte
		\[ I = \set{a\in A \given \exists a_1,\dots, a_r\in A: a_1x_1+\dots a_rx_r+ax_{r+1}\in M}. \]
		Dabei ist $I\subseteq A$ ein Ideal, es existiert also ein $a_{r+1}\in A$ mit $I = (a_{r+1})$.
		\begin{description}
			\item[1. Fall:] $a_{r+1} = 0$. Dann ist $M_{r+1} = M_r$ frei (nach Induktionsannahme) sowie $\rk M_{r+1}\le r$.
			\item[2. Fall:] $a_{r+1}\neq 0$. Es existieren also $a_0,\dots, a_r\in A$ mit $w := a_1x_1+\dots+a_rx_r+a_{r+1}x_{r+1}\in M$.
			
			Nun ist unser Ziel, $M_{r+1} = M_r\oplus \<w\>$ zu zeigen.
			
			Sei also $x\in M_{r+1}$. Somit existieren $b_1,\dots, b_{r+1}\in A$, sodass $x = b_1x_1+\dots + b_{r+1}x_{r+1}$. Dann folgt $b_{r+1}\in I = (a_{r+1})$, es existiert also ein $c\in A$ mit $b_{r+1} = ca_{r+1}$. Betrachte nun $v := x-cw$. Für $v$ gilt dann
			\[v= \sum_{i = 1}^r (b_i-ca_i)x_i+(b_{r+1}-ca_{r+1})x_{r+1}\in \<x_1,\dots, x_r\> M = M_r.\]
			Also gilt $x = v+cw\in M_r+\<w\>$.
			
			Schließlich gilt $M_r\cap\<w\> = \{0\}$, da für $x\in M_r\cap\<w\>$ dann $x = bw = ba_1x_1+\dots ba_{r+1}x_{r+1}\xRightarrow{x\in M_r} ba_{r+1} = 0$ folgt, also $b = 0$ gilt, da $a_{r+1} \neq 0$.
			
			Insgesamt erhalten wir tatsächlich $M_{r+1} = M_r\oplus \<w\>$ frei vom Rang $\le r+1$. \qedhere 
		\end{description}
	\end{description}
	
\end{proof}
\begin{kor}
	Sei $A$ Hauptidealring, $M$ endlich erzeugter $A$-Modul und $M'\subseteq M$ Untermodul. Dann ist $M'$ endlich erzeugt.
\end{kor}
\begin{proof}
	Da $M$ endlich erzeugt ist, existiert ein freier $A$-Modul $F$ mit $\rk F<\infty$ und eine surjektive, $A$-lineare Abbildung $f\colon F\to M$. Betrachte $f^{-1}(M')\subseteq F$. Nach \cref{thm:untermoduln freier moduln in hir} ist $F' := f^{-1}(M')$ nun frei und es gilt $\rk F'\le \rk F <\infty$ und $f|_{F'}\colon F'\to M'$ ist somit surjektiv, also ist $M'$ endlich erzeugt.
\end{proof}


\subsection{Zerlegung in freien Anteil und Torsionsanteil}
\begin{defi}
	Sei $A$ ein Integritätsbereich und $M$ ein $A$-Modul.
	\begin{enumerate}
		\item Sei $x\in M$. $x$ heißt \emph{Torsionselement} genau dann, wenn es ein $a\in A\setminus\{0\}$ gibt, sodass $ax = 0$ gilt.
		\item $M_{\tor} := \set{x\in M \given x \text{ ist ein Torsionselement}}\subseteq M$ ist ein Untermodul, da $A$ nullteilerfrei ist.
		\item $M$ heißt \emph{Torsionsmodul }genau dann, wenn $M = M_{\tor}$.
			  $M$ heißt \emph{torsionsfrei} genau dann, wenn $M_{\tor} = \{0\}$.
	\end{enumerate}
	
\end{defi}

\begin{lem} \label{lem:torsionsquotient torsionsfrei}
	Sei $A$ Integritätsbereich und $M$ ein $A$-Modul. Dann ist $\fak{M}{M_{\tor}}$ torsionsfrei.
\end{lem}
\begin{proof}
	Sei $x+M_{\tor}\in \fak M{M_{\tor}}$. Angenommen, es existiert ein $a\in A, a\neq 0$ mit $a(x+M_{\tor}) = 0+M_{\tor}$. Dann folgt $ax\in M_{\tor}$, es existiert also ein $b\in A, b\neq 0$ mit $bax = 0$. Da $ba\neq 0$ gilt, muss schon $x\in M_{\tor}$ gelten.
\end{proof}

\begin{beme}
	\leavevmode
	\begin{enumerate}
		\item Sei $M$ ein Modul über einem Integritätsbereich. Ist $M$ frei, so ist $M$ auch torsionsfrei.
		\item Die Umkehrung ist im Allgemeinen falsch. Dazu sei $A$ ein Integritätsbereich und $I\subseteq A$ ein Ideal. Dann ist $I$ torsionsfrei (klar), aber nur genau dann ein freier $A$-Modul, wenn $I$ ein Hauptideal ist.
	
		\begin{proof}
			Für die Hinrichtung sei $I$ frei mit $\{x_i\}_{i \in J}$. Angenommen, $\abs J \ge 2$. Dann existieren $i_1\neq i_2 \in J$. Mit $a_1 = x_{i_2}$ und $a_2 = x_{i_1}$ gilt $a_1x_{i_1} + a_2x_{i_2} = 0$; $x_{i_1}$ und $x_{i_2}$ sind also linear abhängig.

			Für die Rückrichtung betrachten wir das folgende Lemma.
		\end{proof}
	\end{enumerate}
\end{beme}

\begin{lem} \label{lem:4.7}
	Sei $A$ ein Hauptidealring. Ist $M$ ein endlich erzeugter, torsionsfreier $A$-Modul, so ist $M$ frei.
\end{lem}

\lecture{3. Mai 2018}

\begin{proof}
	Sei $\{x_1,\dots, x_m\}$ ein Erzeugendensystem von $M$. Seien $1\le i_1<\dots<i_n\le m$ maximal, sodass $\{x_{i_1},\dots, x_{i_n}\}$ linear unabhängig ist.
	
	Wir behaupten, dass für alle $j\in\{1,\dots, m\}$ ein $a_j\in A\setminus \{0\}$ existiert, sodass $a_jx_j\in\<x_{i_1},\dots, x_{i_n}\>$. Der Fall $j \in \set{i_1,\ldots,i_n}$ ist klar. Sei also $j\notin \{i_1,\dots, i_n\}$. Dann ist $\{x_{i_1},\dots x_{i_n}, x_j\}$ linear abhängig. Folglich existieren $a_{i_1},\dots, a_{i_n}, a_j\in A$ sodass $a_{i_1}x_{i_1}+\dots+a_{i_n}x_{i_n}+a_jx_j = 0$, wobei nicht alle $a_i = 0$ sind. Also gilt $a_j\neq 0$ (sonst wären $x_{i_1},\dots x_{i_n}$ linear abhängig).
	
	Betrachte $a := a_1\dots a_m\in A\setminus\{0\}$. Dann gilt $aM\subseteq\<x_{i_1},\dots, x_{i_n}\>\cong A^n$ (frei). Betrachte
	\begin{eqnarray*}
		\phi\colon M & \longto & M,\\
		x & \longmapsto & ax.
	\end{eqnarray*}
	$\phi$ ist $A$-linear und injektiv, da $a \neq 0$ und $M$ torsionsfrei ist. Weiterhin ist $\im\phi = aM\subseteq \<x_{i_1},\dots, x_{i_n}\>$ frei. Folglich gilt $M\cong \im\phi$, wobei letzteres ein Untermodul eines freien Moduls, also nach \cref{thm:untermoduln freier moduln in hir} selber frei ist.
\end{proof}
\begin{lem} \label{lem:4.8}
	Sei $A$ ein Ring und $f\colon M\to N$ eine surjektive, $A$-lineare Abbildung mit $N$ frei. Dann existiert ein Untermodul $M'\subseteq M$ mit $M = \ker f\oplus M'$. Insbesondere ist $M'\hookrightarrow M\xrightarrow{f}N$ ein Isomorphismus, also ist $M'$ frei.
\end{lem}
\begin{proof}
	Sei $\{y_j\}$ ene Basis von $N$. Wähle $x_j\in M$ mit $f(x_j) = y_j$. Betrachte $M'= \<x_j\>_A$. Es gilt $M = M' + \ker f$. Dazu sei $x\in M$. Dann existieren $a_j\in A$ mit $f(x)= \sum a_jy_j$. Dann ist $x'=\sum a_jx_j\in M'$ und $f(x') = \sum a_jy_j = f(x)$, also liegt $x-x'\in \ker f$ und es folgt $x = x'+(x-x')\in M'+\ker f$.
	
	Es verbleibt, $M'\cap \ker f = \{0\}$ zu zeigen. Sei $x' = \sum a_jx_j\in M'$ mit $f(x') = 0$. Daraus folgt $0 = \sum a_jy_j$, aber da die $y_j$ sind linear unabhängig, sind alle $a_j = 0$ und es folgt $x' = 0$.
\end{proof}
\begin{satz}
	Sei $A$ ein Hauptidealring, $M$ endlich erzeugter $A$-Modul. Dann existiert ein Untermodul $M'\subseteq M$ mit:
	\begin{itemize}
		\item $M = M'\oplus M_{\tor}$
		\item $M'\cong \fak{M}{M_{\tor}}$ ist endlich frei.
	\end{itemize}
\end{satz}
\begin{proof}
	Betrachte $\pi\colon M\to \fak{M}{M_{\tor}}$ (surjektiv). Nach \cref{lem:torsionsquotient torsionsfrei} ist $\fak{M}{M_{\tor}}$ torsionsfrei. Mit \cref{lem:4.7} folgt $\fak{M}{M_{\tor}}$ frei und nach \cref{lem:4.8} existiert ein $M'\subseteq M$ mit $M = M'\oplus M_{\tor}$ (endlich erzeugt).
\end{proof} %TODO: Referenzen einfügen

\subsection{Primärzerlegung}
\begin{defi}
	Sei $A$ ein Ring sowie $M$ ein $A$-Modul.
	\begin{enumerate}
		\item $\Ann_A(M) := \set{a\in A\given\forall x\in M: ax = 0}\subseteq A$ (ein Ideal) heißt der \emph{Annullator} von $M$ (auch Annihilator)
		\item Für $x\in M$ sei $\Ann_A(x) := \Ann_A(\<x\>) = \set{a\in A\given ax = 0}$.
		\item Sei $a\in A$. Definiere $M_a := \set{x\in M\given ax = 0}\subseteq M$ (ein Untermodul).
	\end{enumerate}
\end{defi}

\begin{lem} \label{lem:annullator}
	Sei $M$ ein $A$-Modul.
	\begin{enumerate}
		\item Sei $f\colon M\to N$ $A$-linear. Falls $f$ injektiv ist, so gilt $\Ann(M)\supseteq \Ann(N)$. Falls $f$ surjektiv ist, so gilt $\Ann(M)\subseteq \Ann(N)$.
		\item Sei $M = M'+M''$. Dann gilt $\Ann(M) = \Ann(M')\cap \Ann(M'')$.
		\item Sei $A$ ein Integritätsbereich und $M$ ein endlich erzeugter Torsionsmodul. Dann ist $\Ann(M) \neq (0)$.
	\end{enumerate}
\end{lem}
\begin{proof}
	Siehe \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt4.pdf}{Übungsblatt 4}.
\end{proof}

\begin{lem} \label{lem:zerlegung ueber hir}
	Sei $A$ ein Hauptidealring und seien $a_1,\dots, a_n\in A$ paarweise teilerfremd (also $(a_i, a_j) = (1)$ für $i \neq j$) sowie $a = a_1\dots a_n$. Sei $M$ der $A$-Modul mit $M = M_a$. Dann folgt $M_a = M_{a_1}\oplus \dots \oplus M_{a_n}$.
\end{lem}
\begin{proof}
	Definiere $b_i := \frac{a}{a_i} = \prod_{j\neq i} a_j$. Dann gilt bereits $(b_1,\dots, b_n) = (1)$. Denn sonst würde ein primes $p\in A$ existieren, welches alle $b_i$ teilt. $p$ teilt also insbesondere $b_1 = \prod_{j = 2}^n a_j$, es existiert also ein $j\ge 2$ mit $p \mid a_j$. Da $p \mid b_j$, existiert ein $k\neq j$ mit $p \mid a_k$, was ein Widerspruch zu $1 = \gcd(a_j,a_k)$ ist.
	
	Es existieren also $d_1,\dots, d_n\in A$ mit $\sum d_ib_i = 1$. Wir zeigen nun $M = M_{a_1}+\dots +M_{a_n}$. Sei $x\in M$. Betrachte $a_id_ib_ix$. Es gilt $a_id_ib_ix = d_iax = 0$, also $d_ib_ix\in M_{a_i}$. Wir erhalten folglich \[ x = \sum d_ib_ix \in \sum M_{a_i}. \]
	Zeige nun noch $M_{a_i}\cap \sum_{j\neq i}M_{a_j} = \{0\}$. Sei $x\in M_{a_i}\cap\sum_{j \neq i}M_{a_j}$. Dann gilt $a_ix = 0$ und $b_ix = 0$, da $x = \sum_{j \neq i} x_j$ mit $x_j\in M_j$.
	
	Da $(a_i,b_i)= (1)$, existieren $c,d\in A$ mit $ca_i+db_i = 1$, also $x = ca_ix+db_ix = 0$.
\end{proof}

\begin{defi}
	Sei $A$ ein Hauptidealring und $p\in A$ prim. Definiere
	\[M(p) := \set{x\in M \given \exists r\ge 0: p^rx = 0} = \bigcup\limits_{r\ge 0} M_{p^r}, \]
	einen Untermodul von $M$. Falls $M$ endlich erzeugt ist, existiert ein $r\ge 0$ mit $M_{p^r} = M(p)$. Es folgt $p^r\in \Ann(M(p))$, also $\Ann(M(p))\supseteq (p^r)$, und es existiert ein $s\le r$ mit $\Ann(M) = (p^s)$, da $A$ ein Hauptidealring ist. In diesem Fall gilt $M_{p^{s-1}}\subsetneq M_{p^s} = M(p)$.
	
	$M$ heißt \emph{primär}, falls ein primes $p\in A$ mit $M = M(p)$ existiert.
\end{defi}	


\begin{satz}[Primärzerlegung von Torsionsmoduln über Hauptidealringen] \label{thm:primaerzerlegung}
	Sei $A$ ein Hauptidealring und $M$ endlich erzeugter Torsionsmodul über $A$. Dann existiert ein $a\neq 0$ mit $\Ann(M) = (a)$. Seien $p_1,\dots, p_n\in A$ prim mit $(p_i, p_j) = (1)$ für alle $i\neq j$ und $r_1,\dots, r_n\ge 1$ mit $ a = p_1^{r_1}\dots p_n^{r_n} $. Dann gilt
	\begin{enumerate}
		\item $M = M(p_1)\oplus\dots\oplus M(p_n)$ \label{thm:primaerzerlegung:i}
		\item $\Ann(M(p_i)) = (p_i^{r_i})$ \label{thm:primaerzerlegung:ii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:primaerzerlegung:\roman*}]
		\item Da die $p_1^{r_1},\dots, p_n^{r_n}$ paarweise teilerfremd sind, folgt $M = M_{p_1^{r_1}}\oplus\dots \oplus M_{p_n^{r_n}}$ nach \cref{lem:zerlegung ueber hir}. Es bleibt $M_{p_i^{r_i}} = M(p_i)$ zu zeigen.
		\begin{description}
			\item[\glqq$\subseteq$\grqq :] Klar.
			\item[\glqq$\supseteq$\grqq :] Sei $x\in M(p_i)$; es existiert also ein $r\ge 0$ mit $p_i^r = 0$. Ist $r \le r_i$, so gilt $p_i^{r_i}x = 0$, also $x \in M_{p_i^{r_i}}$. Sei umgekehrt $r>r_i$. Dann gilt $\gcd(p_i^r, a) = p_i^{r_i}$, es existieren also $c, d\in A$ mit $cp_i^r+da = p_i^{r_i}$. Damit folgt $p_i^{r_i}x = cp_i^rx+dax = 0$, also auch hier $x \in M_{p_i^{r_i}}$.
		\end{description}
		\item Es gilt $(p_i^{r_i})\subseteq \Ann(M_{p_i^{r_i}}) = \Ann(M(p_i))$ nach Teil \ref{thm:primaerzerlegung:i}. Somit gilt $\Ann(M(p_i)) = (p_i^{s_i})$ für $s_i\le r_i$. Da $M = M(p_1)\oplus \dots \oplus M(p_n)$, gilt $\Ann(M) = \bigcap \Ann(M(p_i))\ni p_i^{s_i}\dots p_n^{s_n}$, aber es gilt auch $\Ann(M) = (p_1^{r_1}\dots p_n^{r_n})$.
		
		Da $(p_i, p_j) = (1)$ für $i\neq j$, folgt $r_i\le s_i$.
		\qedhere
	\end{enumerate}
\end{proof}

\begin{beme}
	$M(p_i)$ im Satz ist nach \cref{lem:zerlegung ueber hir} von der Form $b_iM$, wobei $b_i = \frac{a}{p_i^{r_i}}$.
\end{beme}

\begin{defi}
	Ein $A$-Modul $M$ heißt \emph{zyklisch}, wenn ein $x\in M$ mit $M = \<x\>_A$ existiert.. Es gilt $M\cong \fak{A}{\Ann(x)}$ (siehe \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt4.pdf}{Übungsblatt 4}).
\end{defi}

\begin{satz}[Zerlegung von primären Moduln in zyklische Moduln] \label{thm:zerlegung primaer zyklisch}
	Sei $A$ ein Hauptidealring sowie $M$ ein primärer, endlich erzeugter $A$-Modul. Sei $p\in A$ mit $\Ann(M) = (p^r)$. Dann existieren ganze Zahlen $1\le s_1\le\dots \le s_l = r$ und  Untermoduln $M_1,\dots, M_l\subseteq M$ mit
	\begin{enumerate}
		\item $M = M_1\oplus\dots\oplus M_l$ und
		\item $M_j$ zyklisch mit $\Ann(M_j) =(p^{s_j})$.
	\end{enumerate}
\end{satz}
\begin{proof}
	Sei $n$ die maximale Anzahl von Erzeugern von $M$.
	\begin{description}
		\item[$n = 1$:] Klar.
		\item[$n-1\to n$:] Sei $\{x_1,\dots, x_n\}$ ein Erzeugendensystem von $M$. Nach \cref{lem:annullator} ist $(p^r) = \Ann(M)  = \bigcap \Ann(x_i)$. Es existieren also Elemente $t_i\le r$ mit $\Ann(x_i) = (p^{t_i})$, weshalb wiederum $x_i$ mit $\Ann(x_i) = (p_i^r)$ existieren. Setze $U := \<x_n\>$ und $N = \fak{M}{U}$. Betrachte $\pi\colon M\to N$. Da $\pi$ surjektiv ist, gilt $\Ann(M)\subseteq \Ann(N)$, und wir erhalten ein $s\le r$ mit $\Ann(N) = (p^s)$.
		
		Es gilt $N = \<\pi(x_1),\dots, \pi(x_{n-1})\>$. Nach Induktionsvoraussetzung existieren Untermoduln $N_1,\dots, N_k\subseteq N$ und Elemente $1\le t_1\le\dots \le t_k = s$ mit $N = N_1\oplus \dots \oplus N_k$ und $N_j$ zyklisch mit $\Ann(N_j) = (p^{t_j})$.
		
		\lecture{7. Mai 2018}
		
		Fixiere $j\in\{1,\dots, k\}$ und sei $y\in N_j$ mit $N_j = \<y\>$. Wähle $x\in M$ mit $\pi(x') = y$. Dann gilt $\pi(p^{t_j}x') = p^{t_j}y = 0$, also $x'' := p^{t_j}x'\in U$. Da aber $\Ann(M) = (p^r)$, folgt $0 = p^rx' = p^{r-t_j}x''$.
		
		\textbf{Lemma.} Sei $L$ ein zyklischer $A$-Modul mit $\Ann(L) = (p^r)$, $v\in L$ und $s\le r$. Falls $p^sv = 0$ gilt, so existiert ein $w\in L$ mit $v = p^{r-s}w$.
		\begin{proof}
			Sei $z\in L$ mit $L = \<z\>$ Dann existiert ein $a \in A$ mit $v = az$; es gilt also $0 = p^sv = p^saz$. Wir erhalten $p^sa\in \Ann(L) = (p^r)$, also existiert ein $b\in A$ mit $p^sa = p^rb$, woraus $a = p^{r-s}b$ und schließlich $v = p^{r-s}bz$ folgt.
		\end{proof}
			
		Wir wenden nun das Lemma auf $L = U$, $v = x''$ und $s = r-t_j$ an. Folglich existier ein $x'''\in U$ mit $x'' = p^{l_j}x'''$.
		
		Definiere nun $x := x'-x'''$. Dann gilt.
		\begin{gather*}
			\pi(x) = \pi(x')-\pi(x'') = y-0 \\
			p^{t_j}x = p^{t_j}x'-p^{t_j}x''' = x''-x'' = 0 \tag{*} \label{thm:zerlegung primaer zyklisch:eq}
		\end{gather*}
		Definiere $M_j := \<x\>$. Dafür gilt $\pi(M_j) = N_j$ und $\ker(\pi|_{M_j}) = \{0\}$. Denn sei $v\in M_j$ mit $\pi(v) = 0$. Es existiert ein $a\in A$ mit $v = ax$, also $0 = a\pi(x) = ay$ und damit $a \in \Ann(y) = \Ann(N_j) = (p^{t_j})$. Also existiert ein $b\in A$ mit $a = bp^{t_j}$ und somit $v = bp^{t_j}x  = 0$, wobei letzteres mit Eigenschaft \eqref{thm:zerlegung primaer zyklisch:eq} folgt.
		
		Folglich erhalten wir $\pi|_{M_j}\colon M_j\xrightarrow{\cong} N_j$. Wir zeigen nun $M_j\cap \sum_{j'\neq j} M_j' = \{0\}$. Sei hierzu $v\in M_j\cap\sum_{j'\neq j} M_j'$, also $\pi(v) \in N_j\cap\sum_{j'\neq j} N_{j'} = \{0\}$, also $v = 0$.
		
		Insgesamt haben wir gezeigt, dass $\sum M_j = \bigoplus M_j \eqqcolon M'$ und $\pi|_{M'}\colon M'\xrightarrow{\cong} N$ (das gilt auf allen direkten Summanden). Daraus folgt $M = M'\oplus U$. Wähle nun $l = k+1$, $s_j  = t_j$ ( für $j = 1,\dots, k$), $s_l = r$, $M_j = N_j$ (für $j = 1,\dots, k$) und $M_l = U$.
		\qedhere
	\end{description}
\end{proof}

Zusammenfassung: Sei $A$ ein Hauptidealring und $M$ endlich erzeugter $A$-Modul. Dann gibt es ein $r\ge 0$ sowie prime $p_1,\dots, p_n\in A$, sodass für alle $1 \le i \le n$ Zahlen $1 \le s_{i_1} \le \dots \le s_{i_{l_i}}$ mit
\[M\cong A^r\oplus \bigoplus_{i = 1}^n\bigoplus_{j = 1}^{l_i} \fak{A}{\left(p_i^{s_{i_j}}\right)}\]
existieren.

\subsection{Anwendung auf Matrizen}
Sei $k$ ein Körper, $V$ ein $k$-Vektorraum, $\dim V<\infty$, $\psi\in \End_k(V)$ und $M$ ein $k[t]$-Modul zu $(V,\psi)$.
\begin{beme} \label{bem:4.18}
	\leavevmode
	\begin{enumerate}
		\item $M$ ist ein Torsionsmodul (denn sonst hätte $M$ einen torsionsfreien Anteil, der insbesondere frei über $k[t]$ und damit unendlichdimensional über $k$ wäre).
		\item $M$ ist zyklisch, da ein $u\in V$ mit $\<u, \psi(u), \psi^2(u),\dots\>_k = V$ existiert.
	\end{enumerate}
\end{beme}
\begin{beme}
	$\Ann(M) = \set{p\in k[t] \given p(\psi) = 0 \text{ in } \End(V)} = (m_{\psi})$, wobei $m_{\psi}$ das Minimalpolynom von $\psi$ ist.
\end{beme}
\begin{defi}
	Sei $p(t) = t^n+a_{n-1}t^{n-1}+\dots + a_0\in k[t]$. Definiere $C(p) \in \M_{n\times n}(k)$ durch \[
		C(p) = \begin{cases*}
			(-a_0) & für $n = 1$, \\
			\begin{pmatrix}
				0 & \cdots & 0 & -a_0 \\ 
				1 & \ddots & \vdots & -a_1 \\ 
				& \ddots & 0 & \vdots \\ 
				0 &  & 1 & -a_{n-1}
			\end{pmatrix} & für $n > 1$.
		\end{cases*}
	\]
	$C(p)$ heißt \emph{Begleitmatrix} zu $p$ (\enquote{companion matrix}).
\end{defi}
\begin{beme}
	$\chi_{C(p)} = p$ (charakteristisches Polynom von $C(p)$ ist $p$).
\end{beme}
\begin{lem} \label{lem:4.22}
	Sei $M$ ein zyklischer $k[t]$-Modul.
	\begin{enumerate}
		\item $\dim V = \deg m_{\psi}$ \label{lem:4.22:i}
		\item Sei $n := \deg(m_{\psi})$ und $v\in V$ mit $M = \<v\>_{k[t]}$. Seien $p_0,\dots, p_{n-1}\in k[t]$ mit $\deg p_i<n$ und $p_0,\dots, p_{n-1}$ linear unabhängig über $k$. Dann ist $(p_0v, \dots, p_{n-1}v)$ eine Basis von $V$ über $k$. \label{lem:4.22:ii}
	\end{enumerate}
\end{lem}
\begin{proof}
	Sei $m_{\psi}(t) = t^n+a_{n-1}t^{n-1}+\ldots + a_0$.
	\begin{enumerate}[label=\alph*)]
		\item Wir zeigen $\<v, \psi(v),\dots, \psi^{n-1}(v)\>_k = V$. Nach \cref{bem:4.18} gilt \[\<v, \psi(v),\psi^2(v),\dots\>_k = V.\] Da $m_{\psi}(\psi) = 0$, ist $\psi^n(v)\in \<v, \psi(v),\dots, \psi^{n-1}(v)\>_k$ und durch Induktion ergibt sich $\psi^{n+i}(v) \in \<v, \psi(v), \dots, \psi^{n-1}(v)\>_k$. \label{lem:4.22:a}
		\item Wir zeigen, dass $(p_0v,\cdots, p_{n-1}v)$ linear unabhängig ist. Seien $b_0,\dots, b_{n-1}\in k$ mit $0 = \sum b_ip_iv$. Dann ist $p := \sum b_ip_i\in \Ann(v) = \Ann(M) = (m_{\psi})$.
		
		Da $\deg p_i<\deg m_{\psi}$ ist, folgt $p = 0$ und, da die $p_0,\dots, p_{n-1}$ linear unabhängig sind, ist $b_1 =\dots = b_{n-1} = 0$. \label{lem:4.22:b}
	\end{enumerate}
Aus \ref{lem:4.22:a} und \ref{lem:4.22:b} folgen nun \ref{lem:4.22:i} und \ref{lem:4.22:ii}.
\end{proof}
\begin{lem} \label{lem:4.23}
	Sei $M$ ein zyklischer $k[t]$-Modul.
	\begin{enumerate}
		\item Es gibt eine Basis $B$ von $V$ mit $\M_B(\psi) =C(m_{\psi})$. \label{lem:4.23:i}
		\item Falls $m_{\psi}(t) = (t-\lambda)^n$, so existiert eine Basis $B'$ von $V$ mit 
		\[\M_{B'}(\psi) = \begin{pmatrix}
		\lambda & 1 &  & 0 \\ 
		& \lambda & \ddots &  \\ 
		&  & \ddots & 1 \\ 
		0 &  &  & \lambda
		\end{pmatrix} = \Jn(\lambda)\] \label{lem:4.23:ii}
	\end{enumerate}
\end{lem}
\begin{proof}
	Sei $M = \<v\>_{k[t]}$.
	\begin{enumerate}[label=\ref{lem:4.23:\roman*}]
		\item Definiere $v_i = \psi^i(v)$ für $i = 0,\dots, n-1$. Nach \cref{lem:4.22} ist $(v_0,\dots, v_{n-1})$ eine Basis von $V$. Dabei gilt $\psi(v_{i}) = v_{i+1}$ für $i = 0,\dots, n-2$ und $\psi(v_{n-1}) =\psi^n(v) = -\sum_{i = 0}^{k-1}a_i\psi^i(v) = -\sum_{i = 0}^{k-1}a_iv_i$, da $m_{\psi}(\psi) = 0$. Dabei ist $m_{\psi}(t) = t^n+a_{n-1}t^{n-1}+\dots + a_0$.
		\item Definiere $v_i' := (t-\lambda)^{n-i}\cdot v = (\psi-\lambda)^{n-i}(v)$ für $i = 1,\dots, n$.
		
		Mit \cref{lem:4.22} folgt nun, dass $(v_1',\dots, v_n')$ eine Basis von $V$ ist.
		\begin{align*}
			\psi(v_i') &= t\cdot v_i' = t\cdot(t-\lambda)^{n-1}\cdot v\\
			&= (t-\lambda)^nv + \lambda (t-\lambda)^{n-1}v\\
			&= \lambda v_i'\\
			&= (t-\lambda)^{n-i+1}v +\lambda(t-\lambda)^{n-i}v = v_{i-1}' + \lambda v_i'
			\qedhere
		\end{align*}
	\end{enumerate}
\end{proof}

\begin{bem}
	Umgekehrt gilt: Falls eine Basis $B$ von $V$ sowie ein normiertes $p\in k[t]$ mit $\M_B(\psi) =C(p)$ existiert, so ist $M$ zyklisch.
\end{bem}

\begin{satz}[Rationale Normalform] Sei $V$ ein $k$-Vektorraum, $\dim V <\infty$ und $\psi\in\End_k(V)$. Sei $m_{\psi} = p_1^{r_1}\cdot\ldots\cdot p_n^{r_n}$ mit $p_i\in k[t]$ irreduzibel (und normiert) mit $p_i\neq p_j$. Dann existieren $1\le s_{i1}\le\dots\le s_{i{l_j}}  = r_i$ sowie eine Basis $B$ von $V$, sodass
	\[ \M_B(\psi) = \begin{pmatrix}
	C(p_1^{s_{i1}}) &  &  & 0 \\ 
	& C(p_1^{s_{i2}}) &  &  \\ 
	&  & \ddots &  \\ 
	0 &  &  & C(p_n^{s_{i{l_n}}})
	\end{pmatrix}. \]
\end{satz}
\begin{proof}
	Aus den \cref{thm:primaerzerlegung,thm:zerlegung primaer zyklisch} folgt, dass es eine Zerlegung $M = \bigoplus_{i = 1}^n\bigoplus_{j = 1}^{l_n} M_{ij}$, wobei $M_{ij}$ zyklisch mit $\Ann(M_{ij})  = (p_i^{s_{ij}})$. Da $M_{ij}$ ein Untermodul von $M$ ist, folgt ${}_k(M_{ij}) =: V_{ij}\subseteq V$ ist $k$-Untervektorraum und $\psi(V_{ij})\subseteq V_{ij}$.
	
	Mit \cref{lem:4.23} folgt daraus, dass $M_{ij}$ zyklisch ist und dass eine Basis $B_{ij}$ von $V_{ij}$ mit $M_{B_{ij}}(\psi|_{V_{ij}}) = C(p_i^{s_{ij}})$ existiert. Die Basis $B = B_{11}\cup B_{12}\cup \dots \cup B_{nl_n}$ ist nun eine geeignete Wahl.
\end{proof}

\begin{kor} \label{kor:4.25}
	Sei $m_{\psi} = p_1^{r_1}\cdot\ldots\cdot p_n^{r_n}$ mit normiertem und irreduziblem $p_i\in k[t]$ sowie $p_i\neq p_j$ für $i\neq j$. Dann existiert ein $s_i\ge r_i$ mit $\chi_{\psi} = p_1^{s_1}\cdot\ldots\cdot p_n^{s_n}$.
\end{kor}
\begin{proof}
	Übung.
\end{proof}

\begin{kor}[Cayley-Hamilton]
	$\chi_{\psi}(\psi) = 0$.
\end{kor}

\begin{satz}[Jordansche Normalform]
	Sei $V$ ein $k$-Vektorraum, $\dim V<\infty$ und $\psi\in\End(V)$. Dann sind äquivalent:
	\begin{enumerate}
		\item $m_{\psi}$ zerfällt über $k$. \label{thm:jordan normalform:i}
		\item $\chi_{\psi}$ zerfällt über $k$. \label{thm:jordan normalform:ii}
		\item Es existieren $\lambda_1,\dots, \lambda_n\in k$ und $1\le s_{i1}\le\dots\le s_{il_i}$ und eine Basis $B'$ von $V$ mit
		\[\M_{B'}(\psi) = \begin{pmatrix}
		J_{s_11}(\lambda_1) &  &  & 0 \\ 
		& J_{s_12}(\lambda_1) &  &  \\ 
		&  & \ddots &  \\ 
		0 &  &  & J_{s_{n}l_n}(\lambda_n)
		\end{pmatrix}.\] \label{thm:jordan normalform:iii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{thm:jordan normalform:i} $\Leftrightarrow$ \ref{thm:jordan normalform:ii}:] Folgt aus \cref{kor:4.25}.
		\item[\ref{thm:jordan normalform:iii} $\Rightarrow$ \ref{thm:jordan normalform:ii}:] Klar.
		\item[\ref{thm:jordan normalform:i} $\Rightarrow$ \ref{thm:jordan normalform:iii}:] Beweis analog zum Beweis der rationalen Normalform, statt \cref{lem:4.23} \ref{lem:4.23:i} nutze \cref{lem:4.23} \ref{lem:4.23:ii}.
		\qedhere
	\end{description}
\end{proof}

\lecture{14. Mai 2018}

\section{Lokalisation}
\begin{defi}
	Sei $A$ ein Ring. $S\subseteq A$ heißt \emph{multiplikative Teilmenge}, wenn
	\begin{itemize}
		\item $1\in S$ und
		\item aus $a,b\in S$ dann $a\cdot b \in S$ folgt.
	\end{itemize}
	Definiere auf $S\times A$ eine Äquivalenzrelation durch
	\[(s,a) \sim (t,b) \quad \Longleftrightarrow \quad \exists u\in S: u(ta-sb) = 0.\]
	Definiere $S^{-1}A = (S\times A)/\sim$. Dies wird zu einem Ring durch (definiere $\frac as$ als die Äquivalenzklasse von $(s,a)$)
	\[\frac as+\frac bt = \frac {at+bs}{st},\qquad \frac as\cdot \frac bt = \frac{ab}{st}\]
	(zur Wohldefiniertheit siehe Einführung in die Algebra).
	
	Die Abbildung $f\colon A\to S^{-1}A, a\mapsto \frac a1$ ist ein Ringhomomorphismus.
\end{defi}
\begin{bem}
	\leavevmode
	\begin{enumerate}
		\item $f(s)\in (S^{-1}A)^{\times}$ für alle $s\in S$.
		\item $\frac as = 0$ in $S^{-1}A\Leftrightarrow \exists u\in S: ua = 0$
		\item $\frac{ta}{ts} = \frac as$ für alle $a\in A, s,t\in S$.
	\end{enumerate}
\end{bem}
\begin{satz}
	Sei $S\subseteq A$ eine multiplikative Teilmenge, sei $g\colon A\to B$ ein Ringhomomorphismus mit $g(S) \subseteq B^{\times}$. Dann kommutiert das folgende Diagramm.
	\begin{center}
	\begin{tikzcd}
		A \arrow{d}[swap]{f} \arrow{r}{g} & B \\
		S^{-1}A \arrow[dashrightarrow]{ur}[swap]{\exists! g'}
	\end{tikzcd}
	\end{center}
\end{satz}
\begin{proof}
	Siehe Einführung in die Algebra oder \cite[Proposition 3.1]{atiyah-macdonald}.
\end{proof}

\begin{bsp}
	Sei $A$ ein Ring.
	\begin{enumerate}
		\item Ist $\fp\in \Spec A$, so ist $S := A\setminus \fp$ ist multiplikative Teilmenge. Definiere $A_\fp := S^{-1}A$.
		
		Spezialfall: Für einen Integritätsbereich $A$ gilt für $\fp = (0) \in \Spec A$ dann $A_{\fp} = \Quot(A)$.
		\item Für $t\in A$ ist $S := \set{t^n\given n\in\IZ_{\ge 0}}$ eine multiplikative Teilmenge. Definiere $A[t^{-1}] := S^{-1}A$ (in \cite{atiyah-macdonald} heißt dies $A_t$).
	\end{enumerate}
\end{bsp}

\begin{defi}
	Sei $S\subseteq A$ eine multiplikative Teilmenge sowie $M$ ein $A$-Modul. Definiere auf $S\times M$ Äquivalenzrelation durch
	\[(s,x)\sim (t,y) \quad \Longleftrightarrow \quad \exists u\in S: u(tx-sy) =0.\]
	Definiere damit $S^{-1}M := (S\times M)/\sim$ und bezeichne die Äquivalenzklasse von $(s,x)$ mit $\frac xs$. Dann wird $S^{-1}M$ zu einem $S^{-1}A$-Modul via
	\[\frac cs +\frac yt := \frac{tx+sy}{st},\qquad \frac{a}{s}\cdot \frac{y}{t} := \frac{ay}{st}.\]
	(Wohldefiniertheit und Modulaxiome gelten genauso wie für $S^{-1}A$.)
\end{defi}

\begin{bem}
	Diese Konstruktion ist natürlich: Sei $f\colon M\to N$ eine $A$-lineare Abbildung. Wir erhalten eine Abbildung $S^{-1}f\colon S^{-1}M\to S^{-1}N$ definiert durch
	\[S^{-1}f\left(\frac{x}{s}\right) := \frac{f(x)}{s}\]
	$S^{-1}f$ ist wohldefiniert und $S^{-1}A$-linear.
	\begin{proof}
		Wir beweisen beispielhaft die Wohldefiniertheit: Sei $\frac xs = \frac yt$ in $S^{-1}M$, es existiert also ein $u\in S$ mit $u(tx-sy) = 0$. Also gilt $0 = f(u(tx-sy)) = u(tf(x)-sf(y))$, also $\frac{f(x)}{s} = \frac{f(y)}{s}$.
	\end{proof}
	Für $A$-lineare Abbildungen $M\xrightarrow{f}N\xrightarrow{g}P$ gilt $S^{-1}(g\circ f) = (S^{-1}g)\circ(S^{-1}f)$.
\end{bem}

\begin{satz}
	Seien $M\xrightarrow{f}N\xrightarrow{g}P$ beide $A$-linear. Falls $\ker g = \im f$ gilt, dann ist $\ker(S^{-1}g) = \im (S^{-1}f)$.
\end{satz}
\begin{proof}
	Sei $\ker g = \im f$.
	\begin{description}
		\item[\glqq$\supseteq$\grqq:] $(S^{-1}g)\circ(S^{-1}f) = S^{-1}(g\circ f) = S^{-1}0 = 0$.
		\item[\glqq$\subseteq$\grqq:] Sei $\frac yt\in \ker(S^{-1}g)$, also $0 = (S^{-1}g)\left(\frac yt\right) = \frac{g(y)}t$. Es gibt also ein $u\in S$ mit $ug(y) = 0$. Damit wissen wir, dass $uy\in\ker g = \im f$ gilt. Wir finden folglich ein $x\in M$ mit $f(x) = uy$. Betrachte $\frac x{ut}$. Dafür gilt $(S^{-1}f)\left(\frac x{ut}\right) = \frac{f(x)}{ut} = \frac{uy}{ut} = \frac yt$.
		\qedhere
	\end{description}
\end{proof}

\begin{kor} \label{kor:lokalisation erhaelt exaktheit}
	Sei \[\ldots\to M_{i-1}\to M_i\to M_{i+1}\to\ldots\] eine exakte Sequenz von $A$-Moduln. Dann ist auch 
	\[\ldots \to S^{-1}M_{i-1}\to S^{-1}M_i\to S^{-1}M_{i+1}\to \ldots\]
	eine exakte Sequenz von $S^{-1}A$-Moduln.
\end{kor}
\begin{kor}
	Seien $M',M''\subseteq M$ Untermoduln. Dann ist $S^{-1}M'\hookrightarrow S^{-1}M$, also können wir $S^{-1}M'$ als $S^{-1}A$-Untermodul von $S^{-1}M$ auffassen.
	\begin{enumerate}
		\item $S^{-1}(M'+M'') = S^{-1}M'+S^{-1}M''$
		\item $S^{-1}(M'\cap M'') = S^{-1}M'\cap S^{-1}M''$
		\item $S^{-1}(\fak{M}{M'}) \cong \fak{S^{-1}M}{S^{-1}M'}$
	\end{enumerate}
\end{kor}
\begin{proof} Übung. (Nutze maßgeblich die Exaktheit.)
\end{proof}
\begin{prop} \label{prop:5.8}
	Sei $S\subseteq A$ eine multiplikative Teilmenge und $M$ ein $A$-Modul. Dann gibt es genau einen Isomorphismus von $S^{-1}A$-Moduln
	\begin{eqnarray*}
		\phi\colon S^{-1}A\tp_AM &\longto& S^{-1}M \\
		\frac as \tp x &\longmapsto& \frac{ax}s.
	\end{eqnarray*}
\end{prop}
\begin{proof}
	Die Abbildung \[S^{-1}A\times M\to S^{-1}M, \left(\frac as,x\right)\mapsto \frac{ax}s\]
	ist wohldefiniert und $A$-bilinear. Also erhalten wir das folgende kommutative Diagramm.
	\begin{center}
	\begin{tikzcd}
		S^{-1}A\times M \arrow{r} \arrow{d}& S^{-1}M  \\
		S^{-1}A\tp_AM\arrow[dashrightarrow]{ru}[swap]{\exists!\phi \text{ $A$-linear}} 
	\end{tikzcd}
	\end{center}
	Wir rechnen nach, dass $\phi$ auch  $S^{-1}A$-linear ist. Sei dazu $\frac bt \in S^{-1}M$ und $z\in S^{-1}A\tp_A M$. Dann gilt $z = \sum \frac {a_i}{s_i}\tp x_i$ für $a_i\in A, s_i\in S, x_i\in M$. Wir erhalten also
	\begin{align*}
		\phi\left(\frac{b}{t} z\right) &=\phi\left(\sum\frac{ba_i}{ts_i}\tp x_i \right) = \sum\phi(\frac{ba_i}{ts_i}\tp x_i) = \sum \frac{ba_ix_i}{ts_i} = \frac{b}{t} \cdot \sum \frac{a_ix_i}{s_i} \\
		&= \frac bt \cdot \phi\left(\sum\frac{a_i}{s_i}\tp x_i\right).
	\end{align*}
	Damit ist $\phi$ tatsächlich $S^{-1}A$-linear.
	
	Es bleibt zu zeigen, dass $\phi$ ein Isomorphismus ist. Die Surjektivität ist klar. Für die Injektivität zeigen wir zunächst, dass für alle $z\in S^{-1}A\tp_AM$ dann $x\in M, s\in S$ mit $z = \frac 1s\tp x$ existieren. Denn seien $a_i\in A, s_i\in S, x_i\in M$ mit $z = \sum\frac{a_i}{s_i}\tp x_i$, so definieren wir $s = \prod_i s_i, t_i = \prod_{j \neq i} s_j$, woraus \[z = \sum \frac{a_it_i}{s}\tp x_i = \sum \frac 1s \tp a_it_ix_i = \frac{1}{s}\tp\sum a_it_ix_i\]
	folgt. Sei nun $z\in S^{-1}A\tp_AM$ mit $\phi(z) = 0$. Wähle $s,x$ mit $z = \frac 1s\tp x$. Also gilt $0 = \frac xs$, und es exisiert somit ein $u\in S$ mit $ux = 0$. Damit gilt auch $0 = \frac 1{su}\tp ux = \frac{u}{su}\tp x = \frac{1}{s}\tp x = z$.
\end{proof}
\begin{kor}
	$S^{-1}A$ ist flach als $A$-Modul.
\end{kor}
\begin{proof}
	Dies folgt aus \cref{prop:5.8,kor:lokalisation erhaelt exaktheit}.
\end{proof}

\begin{satz}
	Seien $M,N$ zwei $A$-Moduln sowie $S\subseteq A$ eine multiplikative Teilmenge. Dann existiert genau ein Isomorphismus von $S^{-1}A$-Moduln
	\begin{eqnarray*}
		\phi\colon S^{-1}M\tp_{S^{-1}A}S^{-1}N &\longto& S^{-1}(M\tp_AN) \\
		\frac xs\tp \frac yt &\longmapsto& \frac{x\tp y}{st}.
	\end{eqnarray*}
\end{satz}
\begin{proof}
	Es gilt
	\begin{align*}
		S^{-1}M\tp_{S^{-1}A}S^{-1}N &\cong S^{-1}M \tp_{S^{-1}A}(S^{-1}A\tp_AN) \tag{\cref{prop:5.8}} \\
		&\cong S^{-1}M\tp_A N \tag{\cref{lem:3.11}} \\
		&\cong S^{-1}A\tp_AM\tp_AN \\ 
		&\cong S^{-1}(M\tp_AN).
	\end{align*}
	Verfolgen der Bilder von $\frac xs\tp \frac yt$ unter Komposition liefert tatsächlich $\phi\left(\frac xs\tp \frac yt\right) = \frac{x\tp y}{st}$.
\end{proof}

\subsection{Lokal-Global-Prinzipien}
\begin{satz} \label{thm:lokalglobal}
	Sei $M$ ein $A$-Modul. Dann sind äquivalent:
	\begin{enumerate}
		\item $M = 0$ \label{thm:lokalglobal:i}
		\item Für alle $\fp\in \Spec A$ gilt $M_\fp = 0$. \label{thm:lokalglobal:ii}
		\item Für alle $\fm\in\Max A$ gilt $M_\fm = 0$. \label{thm:lokalglobal:iii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{thm:lokalglobal:i} $\Rightarrow$ \ref{thm:lokalglobal:ii}:] Klar.
		\item[\ref{thm:lokalglobal:ii} $\Rightarrow$ \ref{thm:lokalglobal:iii}:] Klar.
		\item[\ref{thm:lokalglobal:iii} $\Rightarrow$ \ref{thm:lokalglobal:i}:] Angenommen, $M \neq 0$. Sei $x\in M\setminus \{0\}$. Dann ist $\Ann(x) \neq (1)$, es existiert also ein $\fm\in \Max A$ mit $\Ann(x)\subseteq \fm$. Aus \ref{thm:lokalglobal:iii} folgt dann, dass $M_\fm = 0$ ist, also $\frac x1 = 0$ in $M_\fm$; folglich gibt es ein $n\in A\setminus \fm$ mit $ nx = 0$ Dann folgt aber $n\in \Ann(x)\subseteq \fm$, was ein Widerspruch ist.
		\qedhere
	\end{description}
\end{proof}

\begin{satz}
	Sei $f\colon M\to N$ eine $A$-lineare Abbildung. Dann sind äquivalent:
	\begin{enumerate}
		\item $f$ ist injektiv respektive surjektiv. \label{thm:lokal-global-injsur:i}
		\item Für alle $\fp\in \Spec A$ gilt $f_\fp\colon M_\fp\to N_\fp$ ist injektiv respektive surjektiv. \label{thm:lokal-global-injsur:ii}
		\item Für alle $\fm\in \Max A$ gilt: $f_\fm\colon M_\fm\to N_\fm$ ist injektiv respektive surjektiv. \label{thm:lokal-global-injsur:iii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{thm:lokal-global-injsur:i} $\Rightarrow$ \ref{thm:lokal-global-injsur:ii}:] Folgt aus Exaktheit (\cref{kor:lokalisation erhaelt exaktheit}).
		\item[\ref{thm:lokal-global-injsur:ii} $\Rightarrow$ \ref{thm:lokal-global-injsur:iii}:] Klar.
		\item[\ref{thm:lokal-global-injsur:iii} $\Rightarrow$ \ref{thm:lokal-global-injsur:i}:] Betrachte die folgende exakte Sequenz
		\[0\longrightarrow \ker f \longrightarrow M \xlongrightarrow{f} N\longrightarrow \coker f \longrightarrow 0\]
		von $A$-Moduln. Sei $\fm\in \Max A$. Dann ist 
		\[0\longrightarrow (\ker f)_\fm \longrightarrow M_\fm \xlongrightarrow{f_\fm} N_\fm\longrightarrow (\coker f)_\fm \longrightarrow 0\]
		exakt nach \cref{kor:lokalisation erhaelt exaktheit}. Also ist $\ker(f_\fm) \cong (\ker f)_\fm$, und genauso folgt $\coker(f_\fm)\cong (\coker f)_\fm$.
		
		Da $f_\fm$ injektiv ist, ist $\ker (f_\fm) = 0$. Das impliziert, dass für alle $\fm\in \Max A$ gilt: $(\ker f)_\fm = 0$, und mit \cref{thm:lokalglobal} folgt $\ker f = 0$, also ist $f$ injektiv.
	\end{description}
	Der Beweis für Surjektivität verläuft analog.
\end{proof}

\begin{satz}
	Sei $M$ ein $A$-Modul. Dann sind äquivalent:
	\begin{enumerate}
		\item $M$ ist ein flacher $A$-Modul.
		\item Für alle $\fp\in\Spec A$ ist $M_\fp$ flacher $A_\fp$-Modul
		\item Für alle $\fp\in\Spec A$ ist $M_\fp$ flacher $A$-Modul
		\item Für alle $\fm\in\Max A$ ist $M_\fm$ flacher $A_\fm$-Modul
		\item Für alle $\fm\in\Max A$ ist $M_\fm$ flacher $A$-Modul.
	\end{enumerate}
	
\end{satz}
\begin{proof}
	\href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt6a.pdf}{Übungsblatt 6}.
\end{proof}


\subsection{Idealkorrespondenz}
Erinnerung: Für einen Ringhomomorphismus $f\colon A\to B$ gilt:
\begin{itemize}
	\item $J\subseteq B$ Ideal: $J\cap A = f^{-1}(J)\subseteq A$ Ideal
	
	$J\in \Spec B \Rightarrow J\cap A \in \Spec A$
	\item $I\subseteq A$ Ideal: $I\cdot B := (f(I)) \subseteq B$ Ideal
	\item $I \subseteq (I\cdot B) \cap A$, $J \supseteq (J\cap A)\cdot B$
\end{itemize}
\begin{satz} \label{thm:spektrumkorrespondenz}
	Sei $A$ ein Ring und $S\subseteq A$ multiplikative Teilmenge.
	\begin{enumerate}
		\item Sei $I\subseteq A$ ein Ideal. Dann gilt $I\cdot S^{-1}A = \set*{\frac{a}{s}\given a\in I, s\in S}$ und $(I\cdot S^{-1}A)\cap A = \set{a\in A\given \exists n\in S: na \in I}$.
		
		Insbesondere gilt $I\cdot S^{-1}A = (1)\Leftrightarrow I\cap S\neq \emptyset$. \label{thm:idealkorr:i}
		\item Ist $J\subseteq S^{-1}A$ ein Ideal, so folgt $(J\cap A)\cdot S^{-1}A = J$. \label{thm:idealkorr:ii}
		\item \label{thm:idealkorr:iii} Falls $\fp\in\Spec A$ mit $\fp\cap S = \emptyset$, so gilt $\fp\cdot S^{-1}A\in \Spec (S^{-1}A)$ und $(\fp\cdot S^{-1}A)\cap A = \fp$.
		\item Die Abbildungen
		\begin{eqnarray*}
			\Spec(S^{-1}A) &\xlongleftrightarrow{1:1}& \set{\fp\in \Spec A \given \fp\cap S = \emptyset} \\
			\fq &\longmapsto& \fq\cap A \\
			\fp\cdot S^{-1}A &\longmapsfrom& \fp
		\end{eqnarray*}
		sind wohldefiniert und zueinander inverse Bijektionen sowie inklusionserhaltend (für $\fp\subseteq \fp'$ gilt also $\fp\cdot S^{-1}A\subseteq \fp'\cdot S^{-1}A$ und für $\fq\subseteq \fq'$ gilt $\fq\cap A\subseteq \fq'\cap A$). \label{thm:idealkorr:iv}
	\end{enumerate}
\end{satz}

\lecture{17. Mai 2018}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:idealkorr:\roman*}]
		\item Wir zeigen zunächst $I\cdot S^{-1}A = \set*{\frac{a}{s}\given a\in I, s\in S}$.
		\begin{description}
			\item[\glqq $\supseteq$\grqq:] Sei $a\in I, s\in S$. Dann ist $\frac as = \frac 1s\cdot \frac a1\in I\cdot S^{-1}A$, denn für $f\colon A\to S^{-1}A$ ist $\frac a1 = f(a) \in f(I)$.
			\item[\glqq$\subseteq$\grqq:] Sei $x\in I\cdot S^{-1}A$. Somit existieren $a_i\in I, b_i\in A, s_i\in S_i$ mit $x = \sum \frac {b_{i}}{s_{i}}\cdot \frac{a_i}1$. Definiere nun $s := \prod s_i$ sowie $a := \sum_ib_i\prod_{j\neq i}s_ja_i\in I$. Damit ist $x = \frac a s$.
		\end{description}
		Wir zeigen nun noch, dass $(I\cdot S^{-1}A)\cap A = \set{a\in A \given \exists n\in S: na\in I}$. Sei $a\in A$.
		\begin{eqnarray*}
			a\in (I\cdot S^{-1}A)\cap A &\Leftrightarrow & \frac a1\in I\cdot S^{-1}A\\
			&\Leftrightarrow& \exists b \in I, t\in S: \frac a1 = \frac bt\\
			&\Leftrightarrow& \exists b\in I, t\in S: \exists s\in S: s(ta-b) =0\\
			&\Leftrightarrow& \exists u\in S: ua\in I
		\end{eqnarray*}
		Dabei gilt die letzte Äquivalenz, denn:
		\begin{description}
			\item[\glqq$\Rightarrow$\grqq:] $sta = sb\in I\Rightarrow u :=  st$
			\item[\glqq$\Leftarrow$\grqq:] $t := u, s = 1, b = ua$
		\end{description}
		\item Es genügt, $J\subseteq (J\cap A)\cdot S^{-1}A$ zu zeigen, da die andere Inklusion trivial gilt. Sei also $x = \frac as\in J$. Damit haben wir $\frac a1 = \frac s1\cdot \frac as \in J$. Folglich ist $a\in J\cap A$; das bedeutet aber nach \ref{thm:idealkorr:i}, dass $\frac as \in (J\cap a)\cdot S^{-1}A$ gilt.
		\item Sei $\fp\in\Spec A$ mit $\fp\cap S=\emptyset$. Seien $\frac as, \frac bt\in S^{-1}A\setminus (\fp\cdot S^{-1}A)$. Wir zeigen, dass dann auch $\frac as\cdot \frac bt\notin\fp\cdot S^{-1}A$ folgt. Es gilt $a,b\notin \fp$ nach \ref{thm:idealkorr:i}. Folglich haben wir $ab\notin \fp$. Angenommen $\frac{ab}{st}\in\fp\cdot S^{-1}A$, so existieren $c\in \fp,u\in S$ mit $\frac{ab}{st} = \frac cu$. Das bedeutet widerum, dass es ein $v\in S$ gibt, sodass $v(uab-stc) = 0$, also $vuab = vstc\in \fp$. Da $ab\notin \fp$, muss $vu\in\fp$ gelten. Es gilt aber $vu\in S$ und $S\cap\fp = \emptyset$. Das ist ein Widerspruch.
		
		Es verbleibt, $(\fp\cdot S^{-1}A)\cap  A = \fp$ zu zeigen. Wegen \ref{thm:idealkorr:i} gilt $(p\cdot S^{-1}A)\cap A = \set{a\in A\given\exists u\in S: na \in \fp} = \fp$, da $na\in \fp\Leftrightarrow a \in \fp$.
		\item Nichts zu zeigen. \qedhere
	\end{enumerate}
\end{proof}

\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Sei $\fp\in\Spec A$. Dann gibt es eine Bijektion
		\[\Spec A_{\fp} \xlongleftrightarrow{1:1} \set{\fp'\in \Spec A\given\fp'\cap(A\setminus \fp) = \emptyset}  = \set{\fp'\in \Spec A\given\fp'\subseteq \fp}.\]
		
		Damit folgt, dass $A_{\fp}$ ein lokaler Ring mit dem maximalem Ideal $\fp\cdot A_{\fp}$ ist.
		\item Sei $t\in A$. Dann erhalten wir die Bijektion
		\[\Spec A[t^{-1}] \xlongleftrightarrow{1:1}\set{\fp\in \Spec A\given\fp\cap\{t^0, t^1,\dots\} = \emptyset} = \set{\fp\in \Spec A\given\fp\not \ni t}. \]
	\end{enumerate}
\end{bsp}


\subsection{Lokalisation von Algebren}
\begin{beme}
	Sei $f\colon A\to B$ ein Ringhomomorphismus sowie sei $S\subseteq A$ eine multiplikative Teilmenge.
	\begin{enumerate}
		\item Da $S^{-1}B = S^{-1}({}_AB) \cong S^{-1}A\tp_A B$ nach \cref{prop:5.8} gilt, ist $S^{-1}B$ ein Ring und sogar eine $S^{-1}A$-Algebra.
		\item $f(S)\subseteq B$ ist eine multiplikative Teilmenge.
		\item Sei $s\in S$ und betrachte $f(s)$. Sei $g\colon B\to S^{-1}B$. Dann ist $g(f(s)) = \frac{f(s)}{1} \in (S^{-1}B)^{\times}$, da $\frac{f(s)}{1} \cdot \frac{1}{s} = 1$
		in $S^{-1}B$, da dies genau dann der Fall ist, wenn ein $u\in S$ mit $u(f(s)-s\cdot 1_B) = 0$ existiert. Letzteres gilt aber, denn $s\cdot 1_B = f(s)\cdot 1_B$.
		
		Also gilt $g(f(s)) \subseteq (S^{-1}B)^{\times}$. Damit kommutiert folgendes Diagramm.
		\begin{center}
		\begin{tikzcd}
			B \arrow{d} \arrow{r}{g} & S^{-1}B \\
			f(S)^{-1}B \arrow[dashrightarrow]{ur}[swap]{\exists!\phi\text{ Ringhom.}}	& 
		\end{tikzcd}
		\end{center}
		Für $x = \frac{b}{f(s)}\in f(S)^{-1}B$ folgt $\phi\left(\frac{b}{f(s)}\right) = \frac{b}{s}$.
		$f(S)^{-1}B$ ist eine $S^{-1}A$-Algebra via
		\begin{center}
			\begin{tikzcd}
				A \arrow{d} \arrow{r}{f} & B\arrow{d} \\
				S^{-1}A\arrow{r}	& f(S)^{-1}B.
			\end{tikzcd}
		\end{center}
		Man rechnet schnell nach, dass $\phi$ Homomorphismus von $S^{-1}A$-Algebren ist.
		\item $\phi$ ist Isomorphismus von $S^{-1}A$-Algebren.
		\begin{proof}
			Die Surjektivität ist klar nach der Definition von $\phi$. Weiterhin ist $\phi$ injektiv, denn sei $x = \frac{b}{f(s)}\in f(S)^{-1}B$ mit $\phi(x) = 0$. Dann erhalten wir $0 = \frac bs$; es existiert also ein $u\in S$ mit $0 = ub = f(u)\cdot b$, woraus $\frac{b}{f(s)} = 0$ folgt.
		\end{proof}
	\end{enumerate}	
\end{beme}
\begin{kor}
	Sei $I\subseteq A$ ein Ideal und $S\subseteq A$ eine multiplikative Teilmenge mit $I\cap S = \emptyset$. Sei $\pi\colon A \to \fak{A}{I}$. Dann existiert ein Isomorphismus
	\[\fak{S^{-1}A}{I\cdot S^{-1}A} \xlongrightarrow{\cong} \pi(S)^{-1}(\fak{A}{I})\]
	von $A$-Algebren.
\end{kor}
\begin{proof}
	Es gilt
	\[\pi(S)^{-1}(\fak{A}{I}) \cong S^{-1}(\fak AI) \cong S^{-1}A\tp_A(\fak AI) \cong \fak{S^{-1}A}{IS^{-1}A},\]
	wobei der letzte Isomorphismus sogar ein Isomorphismus von $A$-Algebren ist.
\end{proof}
\begin{kor} \label{kor:5.18}
	Sei $\fp\in \Spec A$ und $S = A\setminus \fp$. Dann gilt
	\[\fak{A_{\fp}}{\fp\cdot A_{\fp}}\cong \pi(A\setminus \fp)^{-1}(\fak{A}{\fp}) = \operatorname{Quot}(\fak{A}{\fp}) =: \kappa(\fp).\]
\end{kor}
\begin{kor} \label{kor:5.19}
Sei $f\colon A\to B$ ein Ringhomomorphismus und $S\subseteq A$ eine multiplikative Teilmenge. Dann erhalten wir die folgende Bijektion:
\begin{eqnarray*}
	\Spec S^{-1}B & \xlongleftrightarrow{1:1} & \set{\fq \in \Spec B \given (\fq \cap A)\cap S = \emptyset}\\
	\fq' & \longmapsto & \fq'\cap B\\
	\fq S^{-1}B & \longmapsfrom & \fq
\end{eqnarray*}
\end{kor}
\begin{proof}
	Es gilt \[
		\equalto{\Spec S^{-1}B}{\Spec f(S)^{-1}B} 
		\xleftrightarrow{1:1} 
		\equalto{\set{\fq \in \Spec B\given\fq\cap f(S) = \emptyset}}{\set{\fq \in \Spec B\given(\fq \cap A)\cap S = \emptyset}},
	\]
	 denn $\fq\cap f(S) = \emptyset \Leftrightarrow f^{-1}(\fq)\cap S = \emptyset$.
\end{proof}
Sei $f\colon A \to B$ ein Ringhomomorphismus. Betrachte $f^{*}\colon \Spec B \to \Spec A, f^{*}(\fq) = \fq\cap A$. Wir können mit den Resultaten von eben die Faser $(f^{*})^{-1}(\{\fp\})$ beschreiben.
\begin{kor}
	Sei $f\colon A \to B$, sei $\fp\in \Spec A$. Dann gilt
	\[\set{\fq\in \Spec B\given\fq\cap A = \fp}\xlongleftrightarrow{1:1}\Spec(B\tp_A\kappa(\fp)).\]
\end{kor}
\begin{proof}
	Es gilt
	\[\Spec(B\tp_A\kappa(\fp)) = \Spec(B\tp_A(\fak{A_{\fp}}{\fp A_{\fp}})) = \Spec((B\tp_A A_{\fp}) \tp_{A_{\fp}}(\fak{A_{\fp}}{\fp A_{\fp}}))\]
	nach \cref{kor:5.18,prop:3.12}. Wegen $B\tp_A A_{\fp} = (A\setminus \fp)^{-1}B = B_\fp$ erhalten wir also
	\[\Spec((B\tp_A A_{\fp}) \tp_{A_{\fp}}(\fak{A_{\fp}}{\fp A_{\fp}})) = \Spec(B_{\fp}\tp_{A_{\fp}}(\fak{A_{\fp}}{\fp A_{\fp}})) = \Spec(\fak{B_{\fp}}{(\fp A_{\fp})\cdot B_{\fp}})\]
	Dabei ist $(\fp A_{\fp})\cdot B_{\fp} = \fp B_{\fp}$, folglich haben wir eine Bijektion
	\[\set{\fq'\in \Spec B_{\fp}\given \fq'\supseteq \fp B_{\fp}} \xleftrightarrow{1:1} \set{\fq \in \Spec B\given\fq\cap A \supseteq \fp, \fq \cap A \subseteq \fp},\]
	da, unter Beachtung der Bijektion $\Spec B_{\fp} \xleftrightarrow{1:1} \set{q\in \Spec B\given (q\cap A)\cap(A\setminus \fp) = \emptyset} , \fq'\mapsto \fq'\cap B$ aus \cref{kor:5.19}, für $\fq' \in \Spec B_{\fp}$ dann $\fq' \supseteq \fp B_{\fp}$ genau dann gilt, wenn $\fq'\cap B \supseteq \fp B$, also genau dann, wenn $\fq' \cap A \supseteq \fp$.

	Damit erhalten wir
	\[\Spec(B\tp_A\kappa(\fp)) \xlongleftrightarrow{1:1} \set{\fq\in \Spec B\given\fq\cap  A = \fp}.\qedhere\]
\end{proof}



\section{Ganze Ringerweiterungen}
Sei $B$ eine $A$-Algebra.
\begin{defi}
	\leavevmode
	\begin{enumerate}
		\item Sei $b\in B$. $b$ heißt \emph{ganz} (\enquote{integral}) über $A$, wenn ein normiertes (\enquote{monic}) $p(t)\in A[t]$ mit $p(b) = 0$ existiert.
		\item Die Menge $\set{b\in B\given \text{$b$ ganz über $A$}}$ heißt \emph{ganzer Abschluss} (\enquote{integral closure}) von $A$ in $B$.
		\item $B$ heißt \emph{ganz} über $A$, wenn jedes $b\in B$ ganz über $A$ ist.
		\item $A$ heißt \emph{ganz abgeschlossen} in $B$, wenn $b\in B$ genau dann ganz ist, wenn  $b$ in $\im (A\to B)$ liegt.
		\item Ein Ringhomomorphismus $f : A \rightarrow B$ heißt \emph{ganz}, wenn $B$ ganz über $f(A)$ ist. 
	\end{enumerate}
\end{defi}
\begin{bsp}
	Sei $A = \IZ$, $B = \IQ$. Sei $x = \frac rs\in \IQ$ ganz über $\IZ$ und sei $(r,s) = (1)$. Dann existiert $p(t) = t^{n}+a_{n-1}t^{n-1}+\dots + a_0\in\IZ[t]$ mit 
	\begin{align*}
		 0 &= p(x) = \frac{r^n}{s^n}+a_{n-1}\frac{r^{n-1}}{s^{n-1}}+\dots+a_0\\
		 \Leftrightarrow \quad 0 &= r^n + a_{n-1}r^{n-1}s+\dots+ a_0s^{n}.
	\end{align*}
	Folglich gilt $s \mid r^n$; damit folgt $s\in \IZ^{\times}$ und $x\in\IZ$.
\end{bsp}

\medskip

Bezeichnungen. Sei $A\to B$ ein Ringhomomorphismus.
\begin{enumerate}
	\item Seien $b_1,\dots,b_n\in B$. Definiere $A[b_1,\dots, b_n]$ als die kleinste $A$-Unteralgebra, die $b_1,\dots, b_n$ enthält; also $A[b_1,\dots, b_n] = \im \ev_{(b_1,\dots, b_n)}\colon A[t_1,\dots, t_n]\to B$.
	\item $A\to B$ heißt \emph{endlich} genau dann, wenn ${}_AB$ ein endlich erzeugter $A$-Modul ist.
\end{enumerate}

\begin{lem} \label{lem:ganzheit}
	Sei $A\to B$ ein Ringhomomorphismus sowie $b\in B$. Dann sind äquivalent:
	\begin{enumerate}
		\item $b$ ist ganz über $A$. \label{lem:ganzheit:i}
		\item $A[b]$ ist endlich über $A$. \label{lem:ganzheit:ii}
		\item Es gibt eine endliche $A$-Unteralgebra $C\subseteq B$ mit $b\in C$. \label{lem:ganzheit:iii}
	\end{enumerate}
\end{lem}

\lecture{28. Mai 2018}

\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{lem:ganzheit:i} $\Rightarrow$ \ref{lem:ganzheit:ii}:] Seien $a_0,\dots, a_{n-1}\in A$ mit $b^n = -(a_{n-1}b^{n-1}+\dots+a_0)$. Sei $p(t) = t^n+a_{n-1}t^{n-1}+\dots + a_0$. Per Definition gilt $A[b] = \set{q(b)\given q\in A[t]}$. Sei also nun $q\in A[t]$. Es existieren folglich $c,r\in A[t]$ mit $q = c\cdot p +r $ und $\deg r < \deg p$. Also ist $A[b] = \set{r(b)\given r\in A[t], \deg r <n} = \<1, b, b^2,\dots, b^{n-1}\>_A$.
		
		\item[\ref{lem:ganzheit:ii} $\Rightarrow$ \ref{lem:ganzheit:iii}:] Klar.
		\item[\ref{lem:ganzheit:iii} $\Rightarrow$ \ref{lem:ganzheit:i}:] Sei $C = \<b_1, \dots, b_n\>_A$. Betrachte die $A$-lineare Abbildung $C\to C, c\mapsto bc$. Wähle $a_{ij}\in A$ mit 
		\[b\cdot b_j = \sum_{i=1}^{n}a_{ij}b_i.\]
		Betrachte $M = (b\cdot \delta_{ij}-a_{ij})$. Dann ist $M\cdot (b_1,\dots, b_n)^T = 0$. Wir multiplizieren mit der adjunkten Matrix zu $M$ und erhalten
		\[M^{\ad} M \cdot (b_1,\ldots,b_n)^T = \det M \cdot E_n \cdot (b_1,\dots, b_n)^T = 0.\]
		Wir erhalten also $(\det M)b_j = 0$ für alle $j\in\{1,\dots, n\}$; insbesondere $(\det M)c = 0$ für alle $c\in C$. Es gilt folglich $\det M  = 0$.
		
		Definiere nun $p(t) := \chi_{(a_{ij})}(t) = \det (t\cdot \delta_{ij}-a_{ij})$. Dann ist $p(t)\in A[t]$ normiert und $p(b) = 0$. Folglich ist $b$ ganz über $A$.
		\qedhere
	\end{description}
\end{proof}

\begin{lem} \label{lem:ganzheit2}
	Seien $A\to B\to C$ Ringhomomorphismen.
	\begin{enumerate}
		\item Ist $B$ eine endliche $A$-Algebra und $C$ eine endliche $B$-Algebra, so ist $C$ eine endliche $A$-Algebra. \label{lem:ganzheit2:i}
		\item Ist $B$ ganz über $A$ und $C$ ganz über $B$, so ist $C$ ganz über $A$. \label{lem:ganzheit2:ii}
	\end{enumerate}	
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:ganzheit2:\roman*}]
		\item Folgt sofort aus \cref{lem:endl erz transitiv}.
		\item Sei $c\in C$. Da $c$ ganz über $B$ ist, existieren $b_0, \dots, b_{n-1}\in B$ mit $c^n+b_{n-1}c^{n-1}+\dots +b_0 = 0$. Da die $b_0, \dots, b_{n-1}$ ganz über $A$ sind, ist $A[b_1,\dots, b_{n-1}]$ endlich über $A$, da die $b_i$ ganz über $A[b_0,\ldots,b_{n-1}]$ sind und dies dann mit \ref{lem:ganzheit2:i} induktiv folgt.
		
		Dann ist $c$ ganz über $A[b_1,\dots, b_{n-1}]$. Also ist $A[b_0,\dots, b_{n-1}, c]\subseteq C$ endlich über $A$ und enthält $c$. Nach \cref{lem:ganzheit} ist $c$ ganz über $A$.
		\qedhere
	\end{enumerate}
\end{proof}

\begin{kor} \label{kor:endl algebra}
	Sei $A\to B$ eine Ringhomomorphismus. Dann sind äquivalent:
	\begin{enumerate}
		\item $B$ ist eine endliche $A$-Algebra. \label{kor:endl algebra:i}
		\item Es existieren $b_1,\dots, b_n\in B$, welche ganz über $A$ sind, mit $B = A[b_1,\dots, b_n]$. \label{kor:endl algebra:ii}
		\item $B$ ist endlich erzeugt und ganz über $A$. \label{kor:endl algebra:iii}
	\end{enumerate}
\end{kor}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{kor:endl algebra:iii} $\Rightarrow$ \ref{kor:endl algebra:ii}:] Klar.
		\item[\ref{kor:endl algebra:ii} $\Rightarrow$ \ref{kor:endl algebra:i}:] Siehe \cref{lem:ganzheit} und \cref{lem:ganzheit2}.
		\item[\ref{kor:endl algebra:i} $\Rightarrow$ \ref{kor:endl algebra:iii}:] Endliche Algebren sind insbesondere endlich erzeugt und außerdem ganz nach \cref{lem:ganzheit}.
		\qedhere
	\end{description}
\end{proof}

\begin{kor}
	Sei $A\to B$ ein Ringhomomorphismus. Sei $\ol{A}$ der ganze Abschluss von $A$ in $B$. Dann ist $\ol{A}$ eine Unteralgebra von $B$.
\end{kor}
\begin{proof}
	Seien $b, b'\in B$ ganz über $A$. Es ist zu zeigen, dass $b+b'$ und $b\cdot b'$ ganz über $A$ sind. Es gilt aber $b+b', b\cdot b'\in A[b, b']$, wobei letzteres ganz ist.
\end{proof}

\subsection{Going up}
\begin{lem} \label{lem:6.7}
	Sei $A\hookrightarrow B$ eine ganze Ringerweiterung (also ein injektiver Ringhomomorphismus) sowie $A$ und $B$ Integritätsbereiche. Dann gilt: 
	\[B \text{ Körper}\Longleftrightarrow A\text{ Körper}.\]
\end{lem}
\begin{proof} Sei ohne Einschränkung $A\subseteq B$.
\begin{description}
	\item[\glqq$\Rightarrow$\grqq:] Sei $a\in A\setminus \{0\}$. Dann ist $a\in B\setminus\{0\} = B^{\times}$. Also gibt es ein $b\in B$ mit $ab = 1$. Da $b$ ganz über $A$ ist, gibt es $a_0,\dots, a_{n-1}\in A$, sodass $b^n = \sum_{i = 0}^{n-1}a_ib^i$ gilt. Also folgt
	\[ b = a^{n-1}b^n = \sum_{i = 0}^{n-1} a_ia^{n-1}b^i = \sum_{i = 0}^{n-1}a_ia^{n-1-i}\in A. \]
	Folglich gilt $b\in A$ und damit $a\in A^{\times}$.
	\item[\glqq$\Leftarrow$\grqq:] Sei $b\in B\setminus\{0\}$. Es gibt also $p(t) \in A[t]$ normiert mit $p(b) = 0$. Schreibe
	\[p(t) = t\cdot q(t) + a\]
	mit $q(t)\in A[t]$, $a\in A$. Insbesondere ist $q\neq 0$. Wähle $p$ von minimalem Grad. Dann folgt $\deg q < \deg p$, also $q(b) \neq 0$. Das bedeutet $0 = bq(b)+a$, wenn wir in obige Gleichung $b$ einsetzen, also $b\cdot q(b)  = -a$, wobei $b\cdot q(b) \neq 0$, da $B$ ein Integritätsbereich ist. Andererseits ist $b\cdot q(b) \in A$ und damit $b\cdot q(b) \in A^{\times}\subseteq B^{\times}$, also $b\in B^{\times}$.
	\qedhere
\end{description}	
\end{proof}
Für einen Ringhomomorphismus $f\colon A \to B$ erhalten wir eine Abbildung \[f^*\colon \Spec B\to \Spec A, \quad \fq\mapsto \fq\cap A.\]
\begin{prop} \label{prop:6.8}
	Sei $f\colon A \to B$ ganz.
	\begin{enumerate}
		\item Sei $\fq\in \Spec B$. Dann gilt $\fq\in \Max B \Leftrightarrow \fq\cap A\in \Max A$. \label{prop:6.8:i}
		\item Sei $f$ injektiv. Dann existiert ein $\fq \in \Spec B$ mit $\fq\cap A = \fp$ für jedes $\fp \in \Spec A$. \label{prop:6.8:ii}
		\item Seien $\fq_1,\fq_2\in\Spec B$ mit $\fq_1\subseteq \fq_2$ und $\fq_1\cap A = \fq_2\cap A$. Dann folgt bereits $\fq_1 = \fq_2$. \label{prop:6.8:iii}
	\end{enumerate}
\end{prop}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{prop:6.8:\roman*}]
		\item Betrachte $A\to B$. Dann erhalten wir vermöge des folgenden Diagramms $\fak{A}{\fq\cap A}\hookrightarrow \fak{B}{\fq}$ ganz.
		\begin{center}
			\begin{tikzcd}
				A \arrow{r}{f\text{ ganz}} \arrow{d}& B \arrow{d}[swap]{\text{ganz}} \\
				\fak{A}{\fq\cap A} \arrow[hookrightarrow]{r}	& \fak{B}{\fq}
			\end{tikzcd}
		\end{center}
		Mit \cref{lem:6.7} folgt die Behauptung.
		\item Sei $\fp\in\Spec A$. Betrachte $A\hookrightarrow B$. Dann ist $A_\fp\to B_\fp$ ganz. Also kommutiert das folgende Diagramm.
		\begin{center}
			\begin{tikzcd}
				A \arrow{r} \arrow{d}& B \arrow{d} \\
				A_\fp \arrow{r}	& B_\fp
				\end{tikzcd}
			\end{center}

		Wir beweisen zunächst das folgende
		
		\textbf{Lemma.} Sei $A\to B$ ein Ringhomomorphismus, $S\subseteq A$ eine multiplikative Teilmenge. Falls $A\to B$ ganz ist, dann ist $S^{-1}A\to S^{-1}B$ ganz.
		\begin{proof}
			Sei $\frac{b}{s}\in S^{-1}B$. Dann ist $b$ ganz über $A$, es gibt also $a_0,\dots, a_{n-1}$ mit $b^n + a_{n-1}b^{n-1}+\dots + a_0 = 0$ Nun folgt $0 = \frac{b^n}{s^n}+\frac{a_{n-1}}{s}\cdot \frac{b^{n-1}}{s^{n-1}}+\dots+\frac {a_0}{s^n}$, also ist $\frac bs$ ganz über $S^{-1}A$.
		\end{proof}
		
		Es gilt $B_\fp \neq 0$, denn $B_\fp\cong f(A\setminus \fp)^{-1}B$ und $f(A\setminus \fp)\not \ni 0$ (da $f$ injektiv). Da $B_\fp\neq 0$ ist, gibt es $n\in \Max B_\fp$. Nach \ref{prop:6.8:i} ist $n\cap A_\fp \in \Max(A_\fp)$, da wir eine ganze Ringerweiterung haben.
		
		Da $A_\fp$ lokaler Ring ist, ist $n\cap A_\fp = \fp\cdot A_\fp$. Definiere $\fq = n\cap B$. Also haben wir 
		\[\fq\cap A = (n\cap B)\cap A = (n\cap A_\fp)\cap A = (\fp\cdot A_\fp)\cap A = \fp,\]
		wobei die letzte Gleichheit aus \cref{thm:spektrumkorrespondenz} folgt.
		\item Sei $\fp := \fq_1\cap A = \fq_2\cap A$. Betrachte
		\begin{center}
		\begin{tikzcd}
			A \arrow{r}{f\text{ ganz}} \arrow{d}& B \arrow{d} \\
			A_\fp \arrow{r}{\text{ganz}}	& B_\fp.
		\end{tikzcd}
		\end{center}
		Definiere $\fq_i' := \fq_i\cdot B_\fp\in \Spec B_\fp$ für $i = 1,2$ (denn $\fq_i\cap f(A\setminus \fp) = \emptyset$). Es gilt \begin{align*}(\fq_i'\cap A_\fp)\cap A &= (\fq_i'\cap B) \cap A \\
									   &= ((\fq_i\cdot B_\fp)\cap B)\cap A\\
									   &= \fq_i \cap A = \fp.
		\end{align*}
		Also erhalten wir $\fp\cdot A_\fp = ((\fq_i'\cap A_\fp)\cap A)\cdot A_\fp = \fq_i'\cap A_\fp$ nach Primidealkorrespondenz (\cref{thm:spektrumkorrespondenz}).
		Dabei ist $\fp\cdot A_\fp\in \Max(A_\fp)$. Mit \ref{prop:6.8:i} können wir folglich $\fq_1'\cdot \fq_2'\in \Max(B_\fp)$ folgern. Da $\fq_1'\subseteq \fq_2'$ ist, muss damit bereits $\fq_1' = \fq_2'$ gelten.
		
		Wieder mit \cref{thm:spektrumkorrespondenz} können wir schließlich
		\[\fq_1 = (\fq_1\cdot B_\fp)\cap B = \fq_1'\cap B = \fq_2'\cap B = \fq_2\]
		schreiben.
		\qedhere
	\end{enumerate}
\end{proof}

\begin{satz}[Going up] \label{thm:going up}
	Sei $A\to B$ ganz. Seien $\fp_1,\fp_2\in \Spec A$ mit $\fp_1\subseteq \fp_2$ und $\fq_1\in \Spec B$ mit $\fq_1\cap A = \fp_1$. Dann existiert ein $\fq_2\in \Spec B$ mit $\fq_2\cap A = \fp_2$ und $\fq_1\subseteq \fq_2$.

	Merkbild:
	\begin{center}
		\begin{tikzcd}
			B & \fq_1 \arrow[mapsto]{d} \arrow[Subseteq]{r} & \exists\fq_2 \arrow[mapsto]{d} \\
			A \arrow{u}[swap]{\textup{ganz}} & \fp_1 \arrow[Subseteq]{r} & \fp_2
		\end{tikzcd}
	\end{center}
\end{satz}
\begin{proof}
	Betrachte \begin{center}
		\begin{tikzcd}
			A \arrow{r}{\text{ganz}} \arrow{d}{\tilde{\pi}}& B \arrow{d}{\pi} \\
			\fak{A}{\fp_1} \arrow{r}{\text{ganz}}	& \fak{B}{\fq_1}.
		\end{tikzcd}
	\end{center}
	Es existiert $\fq_2'\in\Spec (\fak{B}{\fq_1})$ mit $\fq_2'\cap(\fak{A}{\fp_1}) = \fak{\fp_2}{\fp_1}$.
	
	Definiere $\fq_2 := \pi^{-1}(\fq_2') = \fq_2'\cap B$. Dann gilt $\fq_1\subseteq \fq_2$ und
	\[\fq_2\cap A = \tilde{\pi}^{-1}(\fq_2'\cap \fak{A}{\fp_1}) = \tilde{\pi}^{-1}(\fak{\fp_2}{\fp_1}) = \fp_2.\qedhere\]
\end{proof}

\subsection{Going down}
\begin{defi}
	Sei $A\to B$ ein Ringhomomorphismus und $I\subseteq A$ Ideal. Sei $b\in B$. $b$ heißt \emph{ganz über $I$}, wenn es ein normiertes Polynom $p(t)$ mit
	\[p(t) = t^n+a_{n-1}t^{n-1}+\dots + a_0\in A[t]\]
	gibt, sodass $p(b) = 0$ und $a_0,\dots, a_{n-1}\in I$.
\end{defi}
\begin{lem} \label{lem:6.11}
	Sei $A\to B$ ein Ringhomomorphismus. Sei $C$ der ganze Abschluss von $A$ in $B$. Sei $I\subseteq A$ ein Ideal sowie $b\in B$. Äquivalent sind dann:
	\begin{enumerate}
		\item $b$ ist ganz über $I$. \label{lem:6.11:i}
		\item $b\in \sqrt{I\cdot C}$ \label{lem:6.11:ii}
	\end{enumerate}
\end{lem}

\lecture{4. Juni 2018}

\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{lem:6.11:i} $\Rightarrow$ \ref{lem:6.11:ii}:] Sei $b^n = a_{n-1}b^{n-1}+\dots+a_0$ mit $a_0,\dots, a_{n-1}\in I$. Da $b$ ganz über $I$ ist, ist $b$ insbesondere ganz über $A$. Folglich gilt $b\in C$ und damit auch $b^0,\dots, b^{n-1}\in C$. Also ist $b^n\in I\cdot C$ und $b\in\sqrt{I\cdot C}$.
		\item[\ref{lem:6.11:ii} $\Rightarrow$ \ref{lem:6.11:i}:] Sei $b\in\sqrt{I\cdot C}$. Nach Definition gibt es ein $n>0$, sodass $b^n\in I\cdot C$. Das bedeutet, es existieren $a_1,\dots, a_r\in I$, $c_1,\dots, c_r\in C$ mit $b^n = a_1c_1+\dots+a_rc_r$. Da $c_1,\dots, c_r$ ganz über $A$ sind, ist $A[c_1,\dots, c_r] = C'$ als $A$-Modul endlich erzeugt (\cref{kor:endl algebra}).
		
		Sei $\<b_1,\dots, b_m\>_A = C'$. Betrachte die folgende $A$-lineare Abbildung
		\[\phi\colon C'\longto C', c'\mapsto b^n\cdot c'.\]
		Es gilt $\im\phi\subseteq I\cdot C'$. Also gibt es $a_{ij}\in I$ mit
		\[b^n\cdot b_j = \sum_{i = 1}^{n}a_{ij}b_i .\]
		Definiere $p(t) = \chi_{(a_{ij})}= \det(t\delta_{ij}-a_{ij})$ (normiert). Es gilt (vgl. Beweis von \cref{lem:ganzheit}) $p(b^n) = 0$. Außerdem ist $p(t) -t^n \in I[t]$. Damit ist $b^n$ aber ganz über $I$, also ist auch schon $b$ ganz über $I$.
		\qedhere
	\end{description}
\end{proof}

\begin{defi}
	Sei $A$ ein Integritätsbereich. $A$ heißt \emph{normal} genau dann, wenn $A$ ganz abgeschlossen in $\Quot(A)$ ist.
\end{defi}
\begin{lem} \label{lem:6.13}
	Sei $A\subseteq B$ eine Ringerweiterung, $A$ und $B$ Integritätsbereiche, $A$ normal und $I\subseteq A$ ein Ideal. Sei $b\in B$ ganz über $I$. Sei
	\[m_b(t) = t^n+a_{n-1}t^{n-1}+\dots +a_0\in K[t]\]
	das Minimalpolynom von $b$ über $K := \Quot(A)$. Dann gilt $a_0,\dots, a_{n-1}\in\sqrt{I}$.
\end{lem}

\begin{proof}
	Sei $L/K$ eine Erweiterung von $K$, sodass $y_1,\dots, y_n\in L$ mit $m_b(t) = (t-y_1)\dots(t-y_n)$ existieren. Sei $f\in A[t]$ normiert mit $f(t) -t^{\deg(f)}\in I[t]$, sodass $f(b) = 0$. Dann ist $f$ ein Vielfaches von $m_b = m_{y_i}$. Also $f(y_i= 0)$ und damit sind $y_1,\dots, y_n$ ganz über $I$.
	
	Sei $C$ der ganze Abschluss von $A$ in $B$. Nach \cref{lem:6.11} ist $y_i\in\sqrt{I\cdot C}$.
	Sodann folgt \[a_{n-k} = (-1)^k\sum_{\mathclap{1\le i_1<\dots <i_k\le n}}y_{i_1}\dots y_{i_k}\in \sqrt{I\cdot C}\] für $k = 1,\dots, n$.
	Nach \cref{lem:6.11} sind damit auch $a_0,\dots, a_{n-1}$ ganz über $I$. Insbesondere sind $a_0,\dots, a_{n-1}$ ganz über $A$. Da $A$ normal ist, folgt bereits $a_0,\dots, a_{n-1}\in A$. Wende nun \cref{lem:6.11} mit $B = K$ an und erhalte $a_0,\dots, a_{n-1}\in \sqrt{I}$.
\end{proof}

\begin{satz}[Going down] \label{thm:going down}
	Sei $A\subseteq B$ eine ganze Ringerweiterung. $A$ und $B$ seien dabei Integritätsbereiche sowie $A$ normal.
	
	Seien $\fp_1,\fp_2\in \Spec A$ mit $\fp_1\subseteq \fp_2$ und sei $\fq_2\in\Spec B$ mit $\fq_2\cap A = \fp_2$. Dann gibt es $\fq_1\in\Spec B$ mit $\fq_1\cap A = \fp_1$ und $\fq_1\subseteq \fq_2$.
	
	Merkbild:
	\begin{center}
		\begin{tikzcd}
			B & \exists\fq_1 \arrow[mapsto]{d} \arrow[Subseteq]{r} & \fq_2 \arrow[mapsto]{d} \\
			A \arrow{u}[swap]{\textup{ganz}} & \fp_1 \arrow[Subseteq]{r} & \fp_2
		\end{tikzcd}
	\end{center}
\end{satz}
\begin{proof}
	Es genügt, \begin{equation}(\fp_1\cdot B_{\fq_2})\cap A = \fp_1 \tag{*}\label{eq:goingdown}\end{equation} zu zeigen, da daraus nach einer Übung ein $\fq_1' \in \Spec B_{\fq_2}$ mit $\fq_1'\cap A = \fp_1$ existiert und wir dann $\fq_1 := \fq_1'\cap B\in\Spec B$ mit $\fq_1\cap A = (\fq_1'\cap B)\cap A = \fp_1$ und $\fq_1\subseteq \fq_2$ definieren können.
	
	Wir zeigen nun also \eqref{eq:goingdown}.
	\begin{description}
		\item[\glqq$\supseteq$\grqq:] Klar.
		\item[\glqq$\subseteq$\grqq:] Sei $x\in (\fp_1\cdot B_{\fq_2})\cap A$. Angenommen, $x\notin \fp_1$. Da $x\in \fp_1\cdot B_{\fq_2} = (\fp_1\cdot B)\cdot B_{\fq_2}$, gibt es $y\in \fp_1\cdot B$, $s\in B\setminus \fq_2$ mit $x = \frac ys$. Mit \cref{lem:6.11} (setze $C = B$) ist $y$ ganz über $\fp_1$. Sei $K := \Quot(A)$. Betrachte das Minimalpolynom $m_y(t) \in K[t]$ von $y$ über $K$. Wir schreiben 
		\[m_y(t) = t^n+a_{n-1}t^{n-1}+\dots+a_0.\]
		Dann folgt mit \cref{lem:6.13}, dass $a_0,\dots, a_{n-1}\in\sqrt{\fp_1} = \fp_1$.
		
		Da $x = \frac ys\in A\setminus\{0\}$, ist $s = \frac yx$ (in $\Quot(B))$ und $\frac 1x \in K$. Damit ist
		\[m_s(t) = t^n+\frac{a_{n-1}}xt^{n-1}+\dots + \frac {a_0}{x^n}\]
		das Minimalpolynom von $s$ über $K$. Definiere $\tilde{a}_i := \frac{1}{x^{n-i}}a_i$. Es gilt $s\in B\setminus \fq_2\subseteq B$, also ist $s$ ganz über $A$; also folgt mit \cref{lem:6.13} (mit $I = A$), dass $\tilde{a}_0,\dots, \tilde{a}_{n-1}\in A$.
		
		Nach Annahme ist $x\notin \fp_1$. Aber $\tilde{a}_i\cdot x^{n-1} = a_i\in \fp_1$. Da $x^{n-1}$ nicht in $\fp_1$ ist, muss $\tilde{a_i}\in \fp_1$ gelten. Daraus folgt nun
		\[s^n = -(\tilde{a}_{n.1}s^{n-1}+\dots+\tilde{a}_1)\in \fp_1B\subseteq \fp_2\cdot B\subseteq \fq_2\]
		im Widerspruch zu $s\notin \fq_2$.
		\qedhere
	\end{description}
\end{proof}

\section{Kettenbedingungen}
\begin{defi}
	Sei $(I, \le)$ eine angeordnete Menge.
	\begin{enumerate}
		\item $(I,\le)$ erfüllt die \emph{aufsteigende Kettenbedingung} (\enquote{ascending chain condition}), wenn für jede Kette
		\[i_1\le i_2\le i_3\le \dots\]
		mit $i_j\in I$ für $j\in \IN$ ein $n\ge 1$ existiert, sodass $i_m = i_n$ für alle $m\ge n$ gilt:.
		\item Analog erfüllt $(I,\le)$ die \emph{absteigende Kettenbedingung} (\enquote{descending chain condition}), wenn für alle Ketten
		\[i_1\ge i_2\ge \dots \]
		ein $n\ge 1$ existiert, sodass $i_m = i_n$ für alle $m\ge n$ gilt ($(I,\ge)$ erfüllt also die aufsteigende Kettenbedingung).
	\end{enumerate}
\end{defi}
\begin{lem} \label{lem:acc}
	Sei $(I,\le)$ angeordnet. Dann sind äquivalent:
	\begin{enumerate}
		\item $(I,\le)$ erfüllt die aufsteigende Kettenbedingung. \label{lem:acc:i}
		\item Sei $J\subseteq I$ nicht leer. Dann hat $J$ ein maximales Element. \label{lem:acc:ii}
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{lem:acc:i} $\Rightarrow$ \ref{lem:acc:ii}:] Angenommen, es existiert ein nicht leeres $J\subseteq I$ ohne maximales Element. Dann existiert ein nicht maximales Element $i_1\in J$, weshalb wieder um ein $i_2\in J$ mit $i_2>i_1$ existiert. Induktiv erhalten wir einen Widerspruch zur aufsteigenden Kettenbedingung.
		\item[\ref{lem:acc:ii} $\Rightarrow$ \ref{lem:acc:i}:] Sei $i_1\le i_2\le\dots$ eine aufsteigende Kette. Die Menge $\{i_n\}_{n\ge 1}$ hat dann ein maximales Element.
		\qedhere
	\end{description}
\end{proof}
\begin{defi}
	Sei $A$ ein Ring und $M$ ein $A$-Modul. Definiere
	\[\mathcal{U}(M) = \set{N\given \text{$N$ ist $A$-Untermodul von $M$}}.\]
	$(\mathcal{U}, \subseteq)$ ist angeordnet.
	\begin{enumerate}
		\item $M$ heißt \emph{noethersch}, wenn $(\mathcal{U}(M),\subseteq)$ die aufsteigende Kettenbedingung erfüllt.
		\item $M$ heißt \emph{artinsch}, wenn $(\mathcal{U}(M), \subseteq)$ die absteigende Kettenbedingung erfüllt.
		\item $A$ heißt noethersch bzw. artinsch, wenn ${}_AA$ noethersch bzw. artinsch ist.
	\end{enumerate}
\end{defi}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Jeder Körper ist noethersch und artinsch.
		\item Für einen Körper $k$ ist $A = k[t]$ noethersch, aber nicht artinsch.
		\item $\IZ$ ist noethersch, aber nicht artinsch.
		\item $k[t_1,t_2,\dots]$ ist weder noethersch noch artinsch.
	\end{enumerate}
\end{bsp}
\begin{bem}
	\leavevmode
	\begin{enumerate}
		\item Artinsche Ringe sind noethersch; aus Zeitgründen können wir hier keinen Beweis geben.
		\item In der Vorlesung werden wir uns auf noethersche Ringe beschränken. Mehr zu artinschen Ringen findet man etwa in \cite[Kapitel 8]{atiyah-macdonald}.
	\end{enumerate}
\end{bem}
\subsection{Noethersche Ringe und Moduln}
\begin{satz}\label{thm:noethersch}
	Sei $A$ ein Ring und $M$ ein $A$-Modul. Dann sind äquivalent:
	\begin{enumerate}
		\item $M$ ist noethersch. \label{thm:noethersch:i}
		\item Alle $A$-Untermoduln von $M$ sind endlich erzeugt. \label{thm:noethersch:ii}
	\end{enumerate}
	Insbesondere ist also jeder noethersche Modul endlich erzeugt.
\end{satz}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{thm:noethersch:i} $\Rightarrow$ \ref{thm:noethersch:ii}:] Sei $N\subseteq M$ ein $A$-Untermodul. Definiere \[\Sigma := \set{N'\subseteq N \given \text{$N'$ ist $A$-Untermodul und endlich erzeugt} }\subseteq \mathcal{U}(M).\]
		Da $\Sigma \neq \emptyset$ existiert ein maximales $N'\in \Sigma$. Sei $x\in N$. Dann gilt $N'\subseteq N'+\<x\>_A\subseteq N$ und $N'+\<x\>_A$ ist endlich erzeugt. Damit folgt $x\in N'$. Da $N'$ maximal gewählt war, ist $N = N'$ und $N$ ist endlich erzeugt.
		\item[\ref{thm:noethersch:ii} $\Rightarrow$ \ref{thm:noethersch:i}:] Sei $N_1\subseteq N_2\subseteq \dots$ eine aufsteigende Kette in $\mathcal{U}(M)$. Definiere
		\[N = \bigcup\limits_{i = 1}^{\infty}N_i.\]
		$N$ ist ein Untermodul, es sei also etwa $N = \<x_1,\dots, x_n\>$. Für jedes $i$ existiert nun ein $m_i$ mit $x_i \in N_{m_i}$. Wähle $m\ge \max\{m_1,\dots, m_n\}$. Dann folgt
		$N = \<x_1,\dots, x_n\>\subseteq N_m\subseteq N$.
		\qedhere
	\end{description}
\end{proof}

\lecture{7. Juni 2018}

\begin{satz} \label{thm:7.6}
	Sei $A$ ein Ring.
	\begin{enumerate}
		\item \label{thm:7.6:i} Sei $0\to M'\xto{\iota} M\xto{\pi} M''\to 0$ eine kurze exakte Sequenz von $A$-Moduln. Dann gilt:
		\[\text{$M$ ist noethersch.} \quad \Longleftrightarrow\quad \text{$M'$ und $M''$ sind noethersch.}\]
		\item Sei $A$ noethersch und $M$ ein endlich erzeugter $A$-Modul. Dann ist $M$ noethersch.\label{thm:7.6:ii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:7.6:\roman*}]
		\item \begin{description}
			\item[\glqq$\Rightarrow$\grqq:] Sei $M_1''\subseteq M_2''\subseteq \dots$ eine Kette von Untermoduln von $M''$. Dann ist $\pi^{-1}(M_1'')\subseteq \pi^{-1}(M_2'')\subseteq \dots$ eine Kette in $M$. Es existiert also ein $n$, sodass $\pi^{-1}(M_m'') = \pi^{-1}(M_n'')$ für alle $m\ge n$ gilt. Da $\ker\pi\subseteq M_n''\subseteq M_m''$ ist, folgt $M_m'' = M_n''$. Für $M'$ ist der Beweis ähnlich.
			\item[\glqq$\Leftarrow$\grqq:] Sei $M_1\subseteq M_2\subseteq\dots$ eine Kette in $M$. Betrachte die Ketten
			\[\iota^{-1}(M_1)\subseteq \iota^{-1}M_2\subseteq\dots\qquad \text{in }M'\]
			und
			\[\pi(M_1)\subseteq \pi(M_2)\subseteq \dots \qquad \text{in }M''.\]
			Es gibt also ein $n$, sodass für alle $m\ge n$ gilt: $i^{-1}(M_m) = i^{-1}(M_n)$ und $\pi(M_m) = \pi(M_n)$.
			
			Damit gilt bereits $M_m = M_n$. Zum Beweis sei $x\in M_m$. Dann ist $\pi(x) \in \pi(M_m) = \pi(M_n)$, es existiert also ein $x'\in M_n$ mit $\pi(x) = \pi(x')$. Somit liegt $x-x'$ in $\ker \pi = \im  \iota$, weshalb wiederum ein $y \in M'$ mit $\iota(y) = x-x'\in M_m$ existiert. Daraus folgt $y\in \iota^{-1}(M_m) = \iota^{-1}(M_n)$, also $x = \iota(y) +x' \in M_n$.
		\end{description}
		\item Ist $M$ ein endlich erzeugter $A$-Modul, so existiert eine $A$-lineare surjektive Abbildung $\phi\colon A^n\to M$. $A^n$ ist noethersch (verwende die kurze exakte Sequenz $0\to A^{n-1}\to A^n\to A \to 0$ sowie Induktion). Nach \ref{thm:7.6:i} ist $M$ damit auch noethersch.
		\qedhere
	\end{enumerate}
\end{proof}

\begin{satz}
	Sei $A$ ein noetherscher Ring.
	\begin{enumerate}
		\item Für ein Ideal $I\subseteq A$ ist $\fak{A}{I}$ noethersch.
		\item Für eine multiplikative Teilmenge $S\subseteq A$ ist $S^{-1}A$ noethersch.
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}
		\item Folgt sofort aus \cref{thm:7.6} \ref{thm:7.6:i}.
		\item Für ein Ideal $J\subseteq S^{-1}A$ gilt $(J\cap A) \cdot S^{-1}A = J$.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{satz}[Hilberts Basissatz] \label{thm:hilberts basissatz}
	Sei $A$ ein noetherscher Ring. Dann ist auch $A[t_1,\dots, t_n]$ noethersch.
\end{satz}
\begin{proof}
	Wir können ohne Einschränkung $n = 1$ annehmen. Wir zeigen, dass jedes Ideal $J\subseteq A[t]$ endlich erzeugt ist.
	
	Angenommen, ein Ideal $J\subseteq A[t]$ ist nicht endlich erzeugt. Wähle $f_1\in J\setminus\set{0}$ mit $d_1 := \deg f_1$ minimal. Dabei gilt $(f_1) \subsetneq J$. Wähle $f_2\in J\setminus (f_1)$ von minimalem Grad $d_2$ usw.
	
	Wir erhalten eine Folge $f_1,f_2,f_3,\dots \in J$ mit $f_n\notin (f_1,\dots, f_{n-1})$ und minimalem $d_n = \deg f_n$. Insbesondere gilt
	\[d_1\le d_2\le d_3 \le \dots.\]
	Sei $a_n\in A$ der Leitkoeffizient von $f_n$.
	Definiere $I := (a_1,a_2,\dots)$. Da $A$ noethersch ist, ist $I$ endlich erzeugt. Folglich existiert ein $n$, sodass $I = (a_1,\dots, a_n)$.
	
	Betrachte nun $a_{n+1} \in (a_1,\dots, a_n)$. Es existieren folglich Elemente $u_i$ mit $a_{n+1} = \sum_{i = 1}^n u_ia_i$. Definiere nun
	\[g := \sum_{i = 1}^n u_if_it^{d_{n+1}-d_i} \in J.\]
	Damit gilt $\deg g = d_{n+1} = \deg f_{n+1}$ und der Leitkoeffizient von $g$ ist $\sum_{i = 1}^n u_ia_i = a_{n+1}$.
	Wir haben $f_{n+1}\notin (f_1,\dots, f_n)\ni g$, also $f_{n+1}-g\notin (f_1,\dots, f_n)$ und $\deg(f_{n+1}-g)<d_{n+1}$ im Widerspruch zur Konstruktion.
\end{proof}

\subsection{Minimale Primideale}
\begin{defi} Sei $A$ ein Ring. $\fp\in \Spec A$ heißt \emph{minimales Primideal}, wenn für alle $\fp'\in \Spec A$ mit $\fp'\subseteq \fp$ schon $\fp' = \fp$ gilt. Wir bezeichnen die Menge aller minimalen Primideale mit \[\MinSpec A := \set{\fp\in\Spec A\given \text{$\fp$ minimal}}.\]
\end{defi}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Falls $A$ ein Integritätsbereich ist, so gilt $ \MinSpec A = \set 0$.
		\item Sei $k$ ein Körper. Betrachte $A = \fak{k[x,y]}{(xy)}$. Dann gilt $\MinSpec A = \set{(x), (y)}$.
		
		Denn wir haben die Bijektion \[\Spec A \xlongleftrightarrow{1:1}\set {\fp\in\Spec k[x,y]\given p\supseteq (xy)}.\]
		Für $\fp\in \Spec k[x,y]$ mit $\fp\supseteq (xy)$ folgt aus  $xy\in \fp$ aber $ x\in \fp$ oder $y \in\fp$, also $(x)\subseteq \fp$ oder $(y)\subseteq \fp$. Falls $\fp$ minimal ist, so folgt $(x) = \fp$ oder $(y) = \fp$.
	\end{enumerate}
\end{bsp}
\begin{satz}
	Sei $A$ ein noetherscher Ring. Dann ist $\abs{\MinSpec A}<\infty$.
\end{satz}
\begin{proof}
	Sei \[\Sigma = \set{I\given \text{$I \subsetneq A$ Ideal, $\MinSpec(\fak AI) = \emptyset$}}.\] Es genügt, $\Sigma = \emptyset$ zu zeigen. Angenommen, $\Sigma \neq \emptyset$. Da $A$ noethersch ist, existiert ein maximales $I\in \Sigma$. Es gilt also $I\notin \Spec A$, da sonst $\MinSpec(\fak{A}I) = \set {(0)}$ gelten würde. 
	
	Also existieren $a,b\in A\setminus I$ mit $ab\in I$. Folglich gilt $I+(a), I+(b)\supsetneq I$, also $I+(a), I+(b)\notin \Sigma$. Damit folgt, dass $\MinSpec(\fak A{I+(a)})$ und $ \MinSpec(\fak A{I+(b)})$ endlich sind.
	
	Sei $\fq\in\MinSpec(\fak AI)$. Dann gilt $\pi^{-1}(\fq)\in \Spec A$ mit $I\subseteq \pi^{-1}(\fq)$, also $ab\in \pi^{-1}(\fq) =: \fp$. Also gilt $a\in \fp$ oder $b\in \fp$; sei ohne Einschränkung $a\in \fp$. Es folgt $\fp\supseteq I+(a)$, also $\pi_a(\fp) \in\Spec(\fak{A}{I+(a)})$ und sogar $\pi_{a}(\fp) \in \MinSpec(\fak A{I+(a)})$ (wobei $\pi_a\colon A\to \fak A{I+(a)}$ ist).
	
	Also haben wir
	INSERT \glqq DIAGRAMM\grqq\ (spuriöse Anführungszeichen) HIER. % TODO: einfügen
	
	Das ist ein Widerspruch.
\end{proof}

\subsection{Transzendenzbasen}
\begin{defi} Sei $K\subseteq L$ eine Körpererweiterung. Eine Familie $(x_i)_{i\in I}$ in $L$ heißt \emph{Transzendenzbasis} von $L$ über $K$, falls
\begin{enumerate}
	\item $(x_i)_{i\in I}$ algebraisch unabhängig über $K$ und
	\item $K(x_i)_{i\in I}\subseteq L$ algebraisch ist.
\end{enumerate}
\end{defi}
\begin{satz}
	Sei $K\subseteq L$ Körpererweiterung, seien $x_i\in L$ mit $i\in I$.
	\begin{enumerate}
		\item Ist $(x_i)_{i\in I}$ algebraisch unabhängig und maximal, so ist $(x_i)_{i\in I}$ eine Transzendenzbasis.
		\item Ist $K(x_i)_{i\in I}\subseteq L$ algebraisch und $(x_i)_{i\in I}$ minimal mit dieser Eigenschaft, so ist $(x_i)_{i\in I}$ eine Transzendenbasis. 
		\item $K\subseteq L$ hat eine Transzendenbasis.
	\end{enumerate}
\end{satz}
\begin{proof} Ähnlich wie bei Basen von Vektorräumen über Körpern.
\end{proof}

\begin{satz}
	Seien $(x_i)_{i\in I}$, $(y_j)_{j\in J}$ Transzendenbasen von $K\subseteq L$. Dann existiert eine Bijektion zwischen $I$ und $J$.
\end{satz}
\begin{proof}
	Wir beweisen nur den Fall $\abs I, \abs J <\infty$. Es genügt zu zeigen, dass für über $K$ algebraisch unabhängige $(x_1,\dots, x_m)$ und algebraische $(y_1,\dots, y_n)$ mit $K(y_1,\dots, y_n)\subseteq L$ dann $m\le n$ gilt und Elemente $1\le j_{m+1}<\dots < j_n\le n$ mit \[K(x_1,\dots, x_m, y_{j_{m+1}},\dots, y_{j_n})\subseteq L\] algebraisch existieren. Dies beweisen wir per Induktion nach $m$.
	\begin{description}
		\item[$m = 1$:] Wähle $s$ minimal, sodass $1\le i_1<\dots <i_s\le n$ und $f(t_0,t_{i_1}, \dots, t_{i_j})\in K[t_0, t_{i_1},\dots, t_{i_j}]\setminus \set 0$ mit $f(x_1, y_{i_1}, \dots, y_{i_j}) = 0$ existieren. Es gilt $s\ge 1$ (da $x_1$ transzendent). Schreibe
		\[f(t_0, t_{i_1},\dots, t_{i_j}) = \sum_{d\ge 0} f_d(t_0, t_{i_2}, \dots, t_{i_j})t_{i_1}^d.\]
		Es existiert also ein $d\ge 1$ mit $f_d \neq 0$ (sonst wäre $f = f_0$, ein Widerspruch zur Minimalität von $s$) und $f_d(x_1, y_{i_1},\dots, y_{i_j}) \neq 0$ (wieder aufgrund der Minimalität von $s$). Damit ist $y_{i_1}$ algebraisch über $K(x_1, y_{i_2},\dot, y_{i_j})\subseteq K(x_1,y_1,\dots, \hat{y_{i_1}},\dots, y_n)$.
		\item[$m-1\to m$:] Insbesondere ist $(x_1,\dots, x_{m-1})$ algebraisch unabhängig. Nach Induktionsvoraussetzung ist $m-1\le n$ und ohne Einschränkung $K(x_1,\dots, x_{m-1}, y_m,\dots, y_n)\subseteq L$ algebraisch. Außerdem ist $x_m$ transzendent über $K(x_1,\dots, x_{m-1})$. Nach dem Induktionsanfang ist $1\le n-m+1$ und (nach eventuellem Umnummerieren) $K(x_1,\dots, x_{m-1})(y_m, y_{m+1}, \dots , y_n)\subseteq L$ algebraisch.
		\qedhere
	\end{description}
\end{proof}
\begin{defi}
	Sei $K\subseteq L$ Körpererweiterung. Sei $(x_i)_{i\in I}$ eine Transzendenzbasis von $L$ über $K$. Dann heißt 
	\[\trdeg(L\mid K) := \abs I\in\IZ_{\ge 0}\cup \{\infty\}\]
	der \emph{Transzendenzgrad} von $K\subseteq L$.
\end{defi}

\subsection{Noether-Normalisierung}
\begin{satz}[Noether-Normalisierung] \label{thm:noether-normalisierung}
	Sei $k$ ein Körper und $A$ eine endlich erzeugte $k$-Algebra. Seien $I_1\subseteq \dots \subseteq I_m\subsetneq A$ Ideale. Dann existiert ein $n\ge 0$ und $a_1,\dots, a_n\in A$ sowie $0\le h_1\le\dots \le h_m\le n$, sodass die folgenden Aussagen gelten. 
	\begin{enumerate}
		\item $a_1,\dots, a_n$ sind algebraisch unabhängig über $k$.
		\item $k[a_1,\dots, a_n]\subseteq A$ endlich (hier äquivalent zur Ganzheit).
		\item $I_l\cap k[a_1,\dots, a_n] = (a_1,\dots, a_{h_l})$
	\end{enumerate}
	Zusätzlich gilt
	\[n = \max_{\mathclap{\fp\in\Spec A}} \trdeg(\Quot(\fak A\fp)\mid k) = \max_{\mathclap{\fp \in \MinSpec A}}\trdeg(\Quot(\fak A\fp)\mid k).\]
\end{satz}

\lecture{11. Juni 2018}

\begin{proof}
	\leavevmode
	\begin{description}
		\item[Schritt 1:] Sei $A = k[t_1,\dots, t_n]$ der Polynomring sowie $a\in A\setminus(A^{\times}\cup \{0\})$. Wir beweisen nun, dass Elemente $a_2,\dots, a_n\in A$ existieren, sodass $k[a, a_2,\dots, a_n]\subseteq A$ endlich ist.
		\begin{proof}
			Mit $\lambda = (\lambda_1,\dots, \lambda_n)\in\IZ_{\ge 0}^n$ schreiben wir $t^{\lambda} = t_1^{\lambda_1}\dots t_n^{\lambda_n}$. Sei $a = \sum_{\lambda\in\IZ_{\ge 0}^n} c_{\lambda}t^{\lambda}$ für gewisse $c_{\lambda}\in k$. Definiere
			\[\Lambda_a := \set*{\lambda\in\IZ_{\ge 0}^n \given c_{\lambda}\neq 0}.\]

			Nun gibt es $r_2,\dots, r_n\in\IZ_{\ge 0}$, sodass für alle $\lambda, \mu\in \Lambda_a$ mit $\lambda\neq \mu$ dann
			\[\lambda_1+r_2\lambda_2+\dots +r_n\lambda_n\neq \mu_1+r_2\mu_2+\dots + r_n\mu_n\]
			gilt. Um dies zu sehen, setzen wir \[R := \max\limits_{\lambda\in\Lambda_a}\max_{1\le i \le n}\lambda _i\] und definieren $r_i := (R+1)^{i-1}$. Es seien also $\lambda,\mu \in \Lambda_a$ mit $\lambda\neq\mu$. Sei \[m := \max\set{1\le i \le n \given \lambda_i \neq \mu_i},\] also insbesondere $m\ge 1$. Wir nehmen ohne Einschränkung $\lambda_m < \mu_m$ an. Somit erhalten wir \begin{align*}
				\sum_{i = 1}^nr_i\mu_i-r_i\lambda_i &= r_m(\mu_m-\lambda_m)+\sum_{i = 1}^{m-1}r_i(\mu_i-\lambda_i)\ge r_m-\sum_{i = 1}^{m-1}r_iR \\ &= (R+1)^{m-1}-\sum_{i = 1}^{m-1} R(R+1)^{i-1} = 1\neq 0.
			\end{align*}
			
			Definiere nun $a_i = t_i-t_i^{r_i}$ für $i = 2, \dots, n$. Es gilt $k[a,a_2,\dots, a_n][t_1] = k[t_1,\dots, t_n]$. Es genügt zu zeigen, dass $t_1$ ganz über $k[a,a_2,\dots, a_n]$ ist. Sei $\mu\in\Lambda_a$ das eindeutig bestimmte Element, für welches
			\[\mu_1+r_2\mu_2+\dots+r_k\mu_k = \max\limits_{\lambda\in\Lambda_a}(\lambda_1+r_2\lambda_2+\dots+r_n\lambda_n) =: s\] gilt.
			Es folgt \begin{align*}
				0 &= a-a = \sum_{\lambda\in\Lambda_a}c_{\lambda}t^{\lambda}-a = \sum c_{\lambda}t_1^{\lambda_1}(a_2+t_2^{r_2})^{\lambda_2}\dots (a_n+t_n^{r_n})^{\lambda_n} -a \\ &= b_st_i^s+b_{s-1}t_{i-1}^{s-1}+\dots +b_0
			\end{align*}
			für gewisse $b_0,\dots, b_s\in k[a, a_2,\dots, a_n]$ und $b_s = c_{\mu} \in k\setminus \set{0} = A^{\times}$.
			
			Damit ist $t_1$ ganz über $k[a, a_2,\dots, a_n]$.
		\end{proof}

		\item[Schritt 2:] Der Satz ist richtig für $A = k[t_1,\dots, t_n]$ und $m = 1$.
		\begin{proof}[Beweis durch Induktion nach $n$]
			Sei $I=I_1$. Da der Fall $n=0$ klar ist, wenden wir uns dem Induktionsschritt von $n-1$ nach $n$ zu.
		
			Für $I = (0)$ ist die Aussage klar. Sei also $I \neq (0)$. Sei $a_1\in I\setminus\set{0}$. Dann ist aber $a_1\notin A^{\times}\cup\{0\}$. Nach Schritt 1 existieren $a_2', \dots, a_n'\in A$ mit $k[a_1, a_2',\dots, a_n']\subseteq A$ endlich. Die $a_i'$ sind algebraisch unabhängig über $k$, da $\trdeg(k[a_1,a_2',\dots, a_n']\mid k) = n$. Damit ist $k[a_1, a_2',\dots, a_n']$ ein Polynomring. Betrachte $I' = I\cap k[a_2',\dots, a_n']$. Nach Induktionsvoraussetzung gibt es $a_2,\dots, a_n\in k[a_2',\dots, a_n']$ und $1 \le h \le n$ mit $k[a_2,\dots, a_n]\subseteq k[a_2',\dots, a_n']$ ganz (endlich) und $I'\cap k[a_2,\dots, a_n] = (a_2,\dots, a_h)$.
			Automatisch sind $a_2,\dots, a_n$ algebraisch unabhängig über $k$. Wir erhalten
			\[k[a_1,a_2,\dots, a_n]\subseteq k[a_1,a_2',\dots, a_n']\subseteq A,\]
			wobei beide Inklusionen ganz sind. Außerdem gilt wegen $a_i\in I$
			\begin{align*}
				I\cap k[a_1,a_2,\dots, a_n] &= (I\cap k[a_2,\dots, a_n]) + (a_i) = (a_2, \dots, a_k) + (a_1) \\ &= (a_1,\dots, a_k).
			\end{align*}
			Denn sei $A$ eine $k$-Algebra, $x,y\in A$ und $I\subseteq A$ ein Ideal mit $x\in I$. Dann gilt $I\cap k[x,y] = (x) + (I\cap k[y])$: \glqq$\supseteq$\grqq\ ist dabei klar. Für \glqq$\subseteq$\grqq\ sei $f\in I\cap k[x,y]$. Dann gibt es $a_{ij}\in k$ mit
			\[f = \sum_{i,j\ge 0}a_{ij}x^iy^j = \sum_{i>0, j\ge0}a_{ij}x^{i}y^j + \sum_{j\ge 0} a_{0j}y^j\]
			und damit ist $\sum_{j\ge 0}a_{0j}y^j\in I\cap k[y]$.
		\end{proof}
		
		\item[Schritt 3:] Der Satz ist richtig für $ A = k[t_1,\dots, t_n]$.
		\begin{proof}[Beweis durch Induktion nach $m$]
			Da der Induktionsanfang gerade Schritt 2 ist, betrachten wir nun den Induktionsschritt von $m-1$ nach $m$.

			Betrachte die Idealkette $I_1\subseteq\dots\subseteq I_{m-1}$. Nach Induktionsvoraussetzung gibt es $b_1,\dots, b_n\in A$ und $0\le h_1\le\dots\le h_{m-1}\le n$ mit $k[b_1,\dots, b_n]\subseteq A$ ganz und $I_l\cap k[b_1,\dots, b_n] = (b_1,\dots, b_{n_l})$ für $l = 1,\dots, m-1$. Definiere $s := h_{m-1}$ und $J := I_m\cap k[b_{s+1},\dots, b_n] \subsetneq k[b_{s+1},\dots, k_n]$. Aus dem vorherigen Schritt folgt, dass $a_{s+1}, \dots, a_n\in k[b_{s+1},\dots, b_n]$ und $h_m\in \{s,\dots, n\}$ existieren, sodass $k[a_{s+1},\dots, a_n]\subseteq k[b_{s+1},\dots, b_n]$ ganz und $J\cap k[a_{s+1},\dots, a_n] = (a_{s+1},\dots, a_{h_m})$ ist. Definiere nun $a_i := b_i$ für $i = 1,\dots, s$. Dann folgt
			\[k[a_1,\dots, a_n] \subseteq k[b_1,\dots, b_n]\subseteq A,\]
			wobei beide Inklusionen ganz sind. Außerdem gilt
			\[I_l\cap k[a_1,\dots, a_n] = (I_l\cap k[b_1,\dots, b_n])\cap k[b_1,\dots, b_s, a_{s+1},\dots, a_n] = (b_1,\dots, b_{h_l})\]
			für $l = 1,\dots, m-1$. Weiterhin haben wir 
			\[I_m\cap k[a_1,\dots, a_n] = (a_1,\dots, a_s)+(I_k\cap k[a_{s+1},\dots, a_n]) = (a_1,\dots, a_{h_l}).\qedhere\]
		\end{proof}
		
		\item[Schritt 4:] Der Satz gilt allgemein.
		\begin{proof}
			Sei $A$ eine endlich erzeugte $k$-Algebra; es existiert also ein surjektiver $k$-Algebrenhomomorphismus
			\[f\colon k[t_1,\dots, t_N]\longto A\]
			Betrachte die Idealkette 
			\[J_0 := \ker f\subseteq J_1 := f^{-1}(I_1)\subseteq \cdots \subseteq J_m := f^{-1}(I_m)\subseteq k[t_1,\dots, t_N].\]
			Aus Schritt 3 folgt, dass $b_1,\dots, b_N\in k[t_1,\dots, t_N]$ und $0\le j_0\le\dots\le j_m\le N$ mit $k[b_1,\dots, b_N]\subseteq k[t_1,\dots, t_N]$ ganz und $J_l\cap k[b_1,\dots, b_N] = (b_1,\dots, b_{j_l})$ für $l = 0,\ldots,m$ existieren.
			
			Definiere $a_i = f(b_{j_0+i})$ für $1\le i \le n = N-j_0$. Dann sind $a_1,\dots, a_n$ algebraisch unabhängig über $k$, da das Diagramm
			\begin{center}
				\begin{tikzcd}
					k[t_{j_0+1},\dots, t_N] \arrow{r}{t_i\mapsto b_i}\arrow{d}{\ev_{a_i}} & k[t_1,\dots, t_N] \arrow{dl}{f} \\
					A	& 
				\end{tikzcd}
			\end{center}
			kommutiert und $\ker f = (b_1,\dots, b_{j_0})$, also $\ev_{(a_i)}$ injektiv ist.
			
			Betrachten wir weiterhin das Diagramm
			\begin{center}
				\begin{tikzcd}
					k[a_1,\ldots,a_n] \arrow[Subseteq]{r} & A \\
					k[b_1,\ldots,b_N] \arrow[Subseteq]{r}{\substack{\text{ganz}\\~}} \arrow[twoheadrightarrow]{u}{\ol f} & k[t_1,\ldots,t_N] \arrow[twoheadrightarrow]{u}{f},
				\end{tikzcd}
			\end{center}
			so folgt, dass $k[a_1,\ldots,a_n] \subseteq A$ ganz, also endlich ist. Da $J_t \supseteq \ker f$, gilt \begin{align*}
				I_l\cap k[a_1,\dots, a_n] &= \ol{f}(\ol{f}^{-1}(I_1\cap k[a_1,\dots, a_n])) = \ol{f}(J_l\cap k[b_1,\dots, b_N]) \\ &= \ol{f}(b_1,\dots, b_{j_l}) = (a_1,\dots, a_{h_l}),
			\end{align*}
			wobei $h_l = j_l-j_0$.
		\end{proof}
		
		\item[Schritt 5:] Wir zeigen nun noch den Zusatz. Definiere \[m_1 := \max_{\mathclap{\fp\in \Spec A}}\trdeg(\Quot(\fak A\fp)\mid k) \quad\text{und}\quad m_2 := \max_{\mathclap{\fp\in\MinSpec A}} \trdeg(\Quot(\fak A\fp)\mid k).\]
		Wir zeigen nun $n\ge m_1\ge m_2\ge n$.
		\begin{description}
			\item[$m_1 \le n$:] Setze $B := k[a_1,\dots, a_n] \subseteq A$. Dann ist $B\subseteq A$ endlich. Sei $\fp\in\Spec A$. Dann ist $\Quot(\fak B{\fp\cap B})\hookrightarrow \Quot(\fak A\fp)$ eine algebraische Körpererweiterung. Dann ist
			\[\trdeg(\Quot(\fak B\fp\cap B)\mid k) = \trdeg(\Quot(\fak A\fp)\mid k).\]
			Da $\Quot(\fak B{\fp\cap B}) = k(\ol{a_1},\dots, \ol{a_n})$, ist $\trdeg(\Quot(\fak B{\fp\cap B}))\le n$, also $m_1\le n$.
			\item[$m_2 \le m_1$] Klar.
			\item[$n \le m_2$:] Da $B\subseteq A$ ganz ist und $B$ ein Integritätsbereich ist, gibt es nach \cref{prop:6.8} ein $\fp\in \Spec A$ mit $\fp\cap B = (0)$. Insbesondere gibt es ein $\fp' \in \MinSpec A$ mit $\fp'\cap B = (0)$. Das bedeutet, dass
			\[\Quot(B) = \Quot(\fak B{\fp'\cap B})\subseteq \Quot(\fak A{\fp'}),\]
			wobei die letzte Erweiterung algebraisch ist. Dadurch erhalten wir
			\[ n = \trdeg(\Quot(B)\mid k) = \trdeg(\Quot(\fak A{\fp'})\mid k) \le m_2.\qedhere\]
		\end{description}
	\end{description}
\end{proof}

\lecture{14. Juni 2018}

\begin{kor} \label{kor:7.17}
	Sei $A \subseteq B$ eine endlich erzeugte Ringerweiterung sowie $A$ ein Integritätsbereich. Dann gilt: 
	\begin{enumerate}
		\item \label{kor:7.17:i} Es existieren $s \in A \setminus \{0\}$ und $b_1, \dots , b_n \in B$ mit
		\begin{itemize}
			\item $b_1, \dots , b_n$ algebraisch unabhängig über $\Quot(A)$ und
			\item $A[s^{-1}][b_1,\dots , b_n] \subseteq B[s^{-1}]$ endlich.\footnote{Man beachte $A[b_1, \dots b_n][s^{-1}]=A[s^{-1}][b_1, \dots , b_n]$.}
		\end{itemize}
		\item \label{kor:7.17:ii} Für alle $\fp\in\Spec A [s^{-1}]$ existiert ein $\fq \in \Spec B[s^{-1}]$ mit $\fq \cap A[s^{-1}]=\fp$. 
		\item \label{kor:7.17:iii}  Für dieses $\fp$ und $\fq$ gilt \[\Quot\left( \fak A {\fp \cap A} \right)=\Quot \left( \fak {A[s^{-1}]}\fp \right) \subseteq \Quot(\fak{B[s^{-1}]}\fq)=\Quot(\fak B {\fq \cap B}).\]
	\end{enumerate}
\end{kor}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{kor:7.17:\roman*}]
		\item Sei $S := A \setminus \{0\}$. Erhalte $\Quot(A)=S^{-1}A \subseteq S^{-1}B$ endlich erzeugt. Nach der \namereff{thm:noether-normalisierung} existieren über $\Quot A =: K$ algebraisch unabhängige $b_1',\dots , b_n' \in S^{-1}B$ mit $K[b_1', \dots b_n'] \subseteq S^{-1}B$ ganz. 
		
		Wir schreiben $b_i'=\frac{b_i}{s_i}$ mit $b_i \in B,s_i \in S$. Dann sind die $b_1, \dots , b_n$ ebenfalls algebraisch unabhängig über $K$ und es gilt $K[b_1, \dots , b_n] = K[b_1', \dots , b_n']$.
		
		Seien $c_1, \dots c_N \in B$ mit $B=A[c_1, \dots c_N]$. Da $S^{-1}B$ ganz über $K[b_1, b_n]$ ist, existieren normierte $f_i \in K[b_1, \dots b_n][t]$ mit $f_i(\frac{c_i}{1})=0$. Wähle $u \in S$ so, dass die Koeffizienten aller $f_1, \dots , f_N$ im Bild von $A[u^{-1}][b_1, \dots , b_n] \to K[b_1, \dots , b_n]$ liegen, und wähle dann normierte $g_i \in A[u^{-1}][b_1, \dots , b_n]$ als Urbilder der $f_i$. Betrachte $g_i(c_i) \in B[u^{-1}]$. Dann gilt $g_i(c_i) \in \ker(B[u^{-1}] \to S^{-1}B)$ (denn $g_i(c_i) \mapsto f_i(c_i)=0$). 
		
		Somit existieren $v_i \in A \setminus \{0\}$ mit $v_i \cdot g_i(c_i)=0 \in B[u^{-1}]$. Definiere $v := v_1 \dots v_n \in A \setminus \{0\}$. Wir setzen $s := uv$. Betrachte nun die Bilder $h_i$ von $g_i$ unter $A[u^{-1}][b_1, \dots , b_n][t] \to A[s^{-1}][b_1, \dots b_n][t]$.
		
		Es ist $h_i(c_i)=0$ (denn $v \cdot h_i(c_i) = 0$ in $B[s^{-1}]$). Außerdem sind die $h_i$ normiert, da die $g_i$ normiert sind. Also sind die $c_i$ ganz über $A[s^{-1}][b_1, \dots b_n]$ und somit ist $A[s^{-1}][b_1, \dots , b_n] \subseteq B[s^{-1}]$ endlich. 
		\item Da die $b_1, \dots b_n$ algebraisch unabhängig über $A[s^{-1}]$ sind, ist $A[s^{-1}][b_1, \dots , b_n]$ isomorph zum Polynomring. Sei $\fp \in \Spec A[s^{-1}]$, betrachte $\fp' \in \fp \cdot A[s^{-1}][b_1, \dots , b_n]+(b_1, \dots , b_n)$. Dann ist $\fp' \cap A = \fp$. Außerdem ist $\fak{A[s^{-1}][b_1, \dots , b_n]}{\fp'} \cong \fak{A[s^{-1}]}\fp$. Also ist $\fp' \in \Spec (A[s^{-1}][b_1, \dots , b_n])$.  
		
		Nach \cref{prop:6.8} existiert ein $\fq \in \Spec B[s^{-1}]$ mit $\fq \cap A[s^{-1}][b_1, \dots , b_n]=\fp'$, woraus $\fq \cap A[s^{-1}]=\fp' \cap A[s^{-1}]=\fp$ folgt.
		\item Wir betrachten das folgende Diagramm.
		\begin{center}
			\begin{tikzcd} 
				A[s^{-1}][b_1, \dots , b_n] \arrow{d} \arrow[Subseteq]{r}{\substack{\text{endlich}\\~}} & B[s^{-1}] \arrow{d} \\
				\fak{A[s^{-1}]}\fp \cong \fak{A[s^{-1}][b_1, \dots b_n]}{\fp'} \arrow[hookrightarrow]{r} & \fak{B[s^{-1}]}\fq
			\end{tikzcd}
		\end{center}
		Also ist auch $\fak{A[s^{-1}]}\fp \hookrightarrow \fak{B[s^{-1}]}\fq$ endlich.
		
		Außerdem ist damit $\Quot(A[s^{-1}]) \hookrightarrow \Quot(B[s^{-1}]/q)$ eine endliche Körpererweiterung. Zum Beweis sei $R := \fak{A[s^{-1}]}\fp$ und $S := \fak{B[s^{-1}]}\fq$ (Integritätsbereiche). Dann ist $R \subseteq S$ endlich, und $\Quot R \subseteq \Quot S$ ist endlich erzeugt. Sei nun $T := R \setminus \set 0$. Es ist $T^{-1}R \hookrightarrow T^{-1}S$ ganz. Also ist $T^{-1}S$ ein Körper und es folgt $T^{-1}S = \Quot S$. Dann ist $\Quot R \hookrightarrow \Quot S$ algebraisch.
		
		Schließlich gilt $\Quot(\fak{A[s^{-1}]}\fp) \cong \Quot(\fak A{\fp \cap A})$ wegen $s \notin \fp \cap A$ und \[\Quot(\fak{A[s^{-1}]}\fp) \cong \fak{A[s^{-1}]\fp}{\fp \cdot A[s^{-1}]\fp} \cong \fak{A_{\fp \cap A}}{\fp \cap A} \cdot A_{\fp \cap A} \cong \Quot(\fak A{\fp \cap A}). \qedhere \]
	\end{enumerate}
\end{proof}

\subsection{Jacobson-Ringe}
\begin{defi}
	Ein Ring $A$ heißt \emph{Jacobson-Ring}, wenn \[\fp = \bigcap_{\mathclap{\substack{\fm \in \Max A,\\ \fm \supseteq \fp}}} \fm\] für alle $\fp \in \Spec A$ gilt.
\end{defi}
\begin{beme} \label{bem7.19}
	Sei $A$ ein Ring. Dann sind äquivalent:
	\begin{enumerate}
		\item $A$ ist Jacobson.
		\item Für alle $\fp \in \Spec A$ und $a \in A \setminus \fp$ existiert ein $\fm \in \Max A$ mit $\fp \subseteq \fm$ und $a \notin \fm$.
		\item Für alle Ideale $I$ in $A$ gilt \[\sqrt{I}=\bigcap_{\mathclap{\substack{\fm \in \Max A,\\ \fm \supseteq I}}} \fm.\]
	\end{enumerate}
\end{beme}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Jeder Körper ist Jacobson.
		\item $\IZ$ ist Jacobson
		\item $\IZ_{(p)}$ für $p$ prim ist nicht Jacobson. Allgemeiner sind lokale Ringe, die ein Integritätsbereich, aber kein Körper sind, nicht Jacobson.
	\end{enumerate}
\end{bsp}
\begin{prop}
	Sei $A$ ein Jacobson-Ring sowie $B$ ganz über $A$. Dann ist $B$ Jacobson.
\end{prop}
\begin{proof}
	Sei $\fq \in \Spec B$ und definiere \[J := \bigcap_{\mathclap{\substack{\fn \in \Max B,\\ \fn \supseteq \fq}}} \fn \supseteq \fq.\] Wir zeigen nun $\fq=J\cap A$. Definiere $\fq \cap A =: \fp \in \Spec A$. Per Definition gilt $\fp=\bigcap_{\fm \in \Max A, \fm \supseteq \fp} \fm$. Sei also $\fm \in \Max A$ mit $\fm \supseteq \fp$. Nach \namereff{thm:going up} existiert ein $\fn \in \Spec B$ mit $\fn \cap A = \fm$ und $\fn \supseteq \fq$. Mit \cref{prop:6.8} folgt $\fn \in \Max B$. Da $\fm$ beliebig war, gilt $J \cap A=\fp$.
	
	Wir betrachten den Ringhomomorphismus $A_\fp \to B_\fp$. Dann ist $\fq \cdot B_\fp \in \Spec B_\fp$, da $\fq \cap A = \fp$. Außerdem $\fq \cdot B_\fp \cap A_\fp = \fp \cdot A_\fp \in \Max(A_\fp)$. Nach \cref{prop:6.8} gilt dann $\fq \cdot B_\fp \in \Max(B_\fp)$, da $A_\fp \to B_\fp$ ganz.
	
	Da $(J \cap A)  \cap (A \cap \fp)= \emptyset$, haben wir $J \cdot B_\fp \subsetneq B_\fp$. Andererseits gilt $J \supseteq \fq$, also $J \cdot B_\fp \supseteq \fq \cdot B_\fp$ und damit $J \cdot B_\fp = \fq \cdot B_\fp$. Es folgt $J \subseteq (J \cdot B_\fp) \cap B = (\fq \cdot B_\fp) \cap B = \fq$.
\end{proof}
\begin{satz} \label{thm:7.22}
	Sei $A$ ein Jacobson-Ring und $B$ endlich erzeugte $A$-Algebra. Dann gilt:
	\begin{enumerate}
		\item $B$ ist Jacobson. \label{thm:7.22:i}
		\item Für alle $\fn \in \Max B$ gilt $\fn \cap A \in \Max A$ und $\fak A{\fn \cap A} \hookrightarrow \fak B\fn$ ist endlich. \label{thm:7.22:ii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:7.22:\roman*}]
		\item Wir zeigen, dass $B$ Jacobson ist. Sei dazu $\fq \in \Spec B$ und $b \in B \setminus \fq$. Es ist zu zeigen, dass ein $\fn \in \Max B$ mit $\fq \subseteq \fn$ und $b \notin \fn$.
		
		Wir betrachten die Ringerweiterung $A' := \fak A{\fq \cap A} \hookrightarrow \fak B\fq \hookrightarrow (\fak B \fq)[b^{-1}] =: B'$. Es ist $A'$ ein Integritätsbereich und $B'$ eine endlich erzeugte $A'$-Algebra. Nach \cref{kor:7.17} existiert ein $s' \in A' \setminus \{0\}$ mit der folgenden Eigenschaft: Für alle $\fp' \in \Spec A'$ und $s' \notin \fp'$ existiert ein $\fq' \in \Spec B'$, sodass $\fq' \cap A' = \fp'$ gilt und $\Quot(\fak{A'}{\fp'}) \hookrightarrow \Quot(\fak{B'}{\fq'})$ endlich ist.
		
		Wähle ein Urbild $s$ von $s'$ unter $A \to A' = \fak A{\fq \cap A}$, also $s \notin \fq \cap A$. Da $A$ Jacobson ist, existiert ein $\fm \in \Max A$ mit $\fq \cap A \subseteq \fm$ und $s \notin \fm$. Dann ist $s' \notin \fm \cdot A' =: M' \in \Max A'$. Wir wenden nun die obige Eigenschaft auf $\fp'=\fm'$ an und erhalten ein $\fn' \in \Spec B'$ mit $\fn' \cap A = \fm'$ sowie 
		\begin{center}
			\begin{tikzcd}
				\Quot(\fak{A'}{\fm'}) \arrow[equal]{d}[swap]{\fm' \in \Max A'} \arrow[hookrightarrow]{r}{\text{endl.}} & \Quot(\fak{B'}{\fn'}) \arrow[equal]{d} \\
				\fak{A'}{\fm'} \arrow[equal]{d}  & \Quot(\fak B\fn) \arrow[equal]{d} \\
				\fak A\fm \arrow[hookrightarrow]{r} & \fak B\fn,
			\end{tikzcd}
		\end{center}
		wobei $\fn := \fn' \cap B \in \Spec B$. Also ist $\fak B\fn$ ein Körper nach \cref{lem:6.7} und $\fn \in \Max B$.
		Es gilt $\fq \subseteq \fn$ (da $\fn \cap A = \fm \supseteq \fq \cap A$) und $b \notin \fn$, da wir die folgende Bijektion haben. \begin{eqnarray*}
			\Spec((\fak B\fq)[b^{-1}]) &\xlongleftrightarrow{1:1}& \set{\tilde \fq \in \Spec B \given \fq \subseteq \tilde \fq \text{ und } b \notin \tilde \fq} \\
			\fq'& \mapsto &\fq' \cap B
		\end{eqnarray*}

\lecture{18. Juni 2018}

		\item Nun zum Beweis des Zusatzes. Wähle $\fq\in\Max B$ und $b = 1$. Wende die Konstruktion von eben an. Dann folgt, dass ein $\fm\in\Max A$ mit $\fm\supseteq \fq\cap A$ und ein $\fn\in \Max B$ mit $\fn\cap A = \fm$ sowie $\fn\supseteq \fq$ existieren. Da $\fq$ maximal ist, ist $\fq = \fn$. Also gilt $\fm\supseteq \fq\cap A = \fn\cap A = \fm\in\Max A$. 

		Außerdem ist $\Quot(\fak{A'}{\fm'})\hookrightarrow \Quot(\fak{B'}{\fn'})$ eine endliche Körpererweiterung, aber es gilt $\Quot(\fak{A'}{\fm'}) = \fak A\fm = \fak A{\fq\cap A}$ und $\Quot(\fak{B'}{\fn'}) = \fak B\fn = \fak B\fq$.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{kor} \label{kor:7.23}
	Sei $k$ ein Körper und $A$ endlich erzeugte $k$-Algebra. Dann gilt:
	\begin{enumerate}
		\item $A$ ist Jacobson. \label{kor:7.23:i}
		\item Für alle $\fm\in\Max A$ ist $k\hookrightarrow \fak A\fm$ endlich. \label{kor:7.23:ii}
		\item $\Max A = \set{\fp\in\Spec A\given k\hookrightarrow \Quot(\fak A\fp) \text{ endlich}}$ \label{kor:7.23:iii}
		\item Sei $f\colon A \to B$ ein Homomorphismus von endlich erzeugten $k$-Algebren sowie $\fn\in\Max B$; dann ist $\fn\cap A \in\Max A$. \label{kor:7.23:iv}
	\end{enumerate}
\end{kor}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{kor:7.23:\roman*}]
		\item Folgt direkt aus \cref{thm:7.22} \ref{thm:7.22:i}.
		\item Folgt direkt aus \cref{thm:7.22} \ref{thm:7.22:ii}.
		\item Die Inklusion von links nach rechts folgt aus \ref{kor:7.23:ii}; die andere Inklusion folgt daraus, dass $\fak A\fp$ ein Zwischenring zwischen $k$ und $\Quot(\fak A\fp)$ ist und damit schon ein Körper sein muss, weil die Erweiterung $\fak A\fp\hookrightarrow \Quot(\fak A\fp)$ endlich sein muss.
		\item Wende \cref{thm:7.22} \ref{thm:7.22:ii} auf die endlich erzeugte $A$-Algebra $B$ an.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{kor}[Schwacher Nullstellensatz] \label{thm:schwacher nullstellensatz}
	Sei $k$ ein algebraisch abgeschlossener Körper. Betrachte den Polynomring $k[t_1,\dots, t_n]$. Für $x = (x_1,\dots, x_n)\in k^n$ definiere $\fm_x := (t_1-x_1,\dots, t_n-x_n)$. Dann ist $\fm_x\in \Max k[t_1,\dots, t_n]$ und die Abbildung
	\[k^n\longto \Max k[t_1,\dots, t_n],\quad x\longmapsto \fm_x\]
	ist bijektiv.
\end{kor}
\begin{proof}
	Sei $A := k[t_1,\dots, t_n]$. Es gilt $\fm_x\in\Max A$, da $\fak A{\fm_x}\cong k$ und $\fm_x\neq \fm_y$ für $x\neq y$. Es ist noch die Surjektivität zu zeigen. Sei $\fm\in\Max A$. Nach \cref{kor:7.23} ist $k\hookrightarrow \fak A\fm$ eine endliche Körpererweiterung. Da $k$ algebraisch abgeschlossen ist, muss damit bereits $k\cong \fak{A}{\fm}$ gelten. Betrachte das Bild $x_i$ von $t_i$ unter der Abbildung $A\to \fak A\fm\cong k$. Dabei ist $t_i-x_i\in\ker(A\to \fak A\fm\cong k) = \fm$. Also gilt $\fm_x = (t_1-x_1,\dots, t_n-x_n)\subseteq \fm$. Da $\fm_x$ maximal ist, muss schon $\fm_x= \fm$ gelten.
\end{proof}


\section{Affine Varietäten}
Im ganzen folgenden Kapitel sei $k$ ein algebraisch abgeschlossener Körper.
\begin{defi}
	\leavevmode
	\begin{enumerate}
		\item Sei $n\ge 0$. $\IA^n= \IA^n (k) := k^n$ heißt \emph{$n$-dimensionaler affiner Raum}.
		\item Sei $T\subseteq k[t_1,\dots, t_n]$ eine Teilmenge. Definiere 
		\[\Z(T) := \set{x = (x_1,\dots, x_n)\in\IA^n\given \forall f\in T: f(x_1,\dots, x_n) = 0}.\]
		Eine Teilmenge der Form $\Z(T)$ heißt \emph{algebraische Teilmenge} von $\IA^n$. 
	\end{enumerate}
\end{defi}
\begin{beme} \label{bem:8.2}
	\leavevmode
	\begin{enumerate}
		\item Seien $T_1\subseteq T_2\subseteq k[t_1,\dots, t_n]$. Dann ist $\Z(T_1)\supseteq \Z(T_2)$. \label{bem:8.2:i}
		\item Sei $T\subseteq k[t_1,\dots, t_n]$ und $I := (T)$. Dann folgt $\Z(T) = \Z(I)$. \label{bem:8.2:ii}
		\begin{proof}
			Die Inklusion $\Z(T) \supseteq \Z(I)$ ist klar. Sei umgekehrt $x \in \Z(T)$ und $f\in I$. Dann gibt es Elemente $g_i \in k[t_1,\ldots,t_n]$ und $h_i\in T$ mit $f=\sum g_ih_i$. Es folgt $f(x) = \sum g_i(x)h_i(x) = 0$. Da $k[t_1,\ldots,t_n]$ nach \namereff{thm:hilberts basissatz} noethersch ist, existieren schließlich $f_1,\ldots,f_m \in I$ mit $\Z(T) = \Z(I) = \Z(\set{f_1,\ldots,f_m})$.
		\end{proof}
	\end{enumerate}
\end{beme}
\begin{bsp}
	Wir betrachten $\IA^2$. Es gilt:
	\begin{enumerate}
		\item $\Z(t_1^2+t_2^2-1) = \set{(x_1,x_2)\in k^2 \given x_1^2+x_2^2 = 1}$
		\item $\Z(t_1\cdot t_2) = \set{(x_1,x_2)\in k^2\given x_1 = 0\text{ oder }x_2 = 0}$
		\item $\Z(t_1^2\cdot t_2^2) = \set{(x_1,x_2)\in k^2\given x_1 = 0\text{ oder }x_2 = 0}$
		\item $\Z(t_1-x, t_2-y) = \set{(x,y)}$
	\end{enumerate}
\end{bsp}
\begin{bsp} 
	Betrachte $\IA^1$. Was sind die algebraischen Teilmengen? Sei $I\subseteq k[t]$ ein Ideal. Falls $I = (0)$, dann ist $\Z(I) = \IA^1$. Sei also $I\neq 0$. Sei $f\in k[t]$ mit $I = (f)$. Dann ist $\Z(I) = \Z(f) = \set{x\in k\given f(x) = 0}$. Da $f$ etwa zu $f(t) = c(t-x_1)\dots (t-x_n)$ für gewisse $c \neq 0, x_i\in k$ faktorisiert, folgt $\Z(f) = \set{x_1,\dots, x_n}$. Damit erhalten wir
	\[\set{\text{Algebraische Teilmengen von }\IA^1} = \set{\text{Endliche Teilmengen von $\IA^1$}}\cup \set{\IA^1}.\]
\end{bsp}
\begin{lem} \label{lem:8.5}
	Seien $I,J, I_{\nu}\subseteq k[t_1,\dots, t_n]$ mit $\nu\in V$ Ideale. Dann gilt
	\begin{align*}
		\Z\left(\sum_{\nu\in V} I_{\nu}\right) &= \bigcap_{\nu\in V} \Z(I_{\nu}) \tag{i}\label{lem:8.5:i} \\\intertext{und}
		\Z(I\cdot J) &= \Z(I\cap J) = \Z(I)\cup Z(J). \tag{ii}\label{lem:8.5:ii}
	\end{align*}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\eqref{lem:8.5:\roman*}]
		\item $\Z(\sum I_{\nu}) \subseteq \bigcap \Z(I_{\nu})$ ist klar nach \cref{bem:8.2} \ref{bem:8.2:i}. Für die andere Inklusion sei $x\in\bigcap \Z(I_{\nu})$. Für $f\in\sum I_{\nu}$. Dann gibt es Elemente $f_{\nu}\in I_{\nu}$ (nur endlich viele ungleich $0$) mit $f = \sum f_{\nu}$, woraus $f(x) = \sum f_{\nu}(x) = 0$, also $f\in \Z(\sum I_{\nu})$ folgt.
		\item Nach \cref{bem:8.2} \ref{bem:8.2:i} ist $\Z(I\cdot J) \supseteq \Z(I\cap J)\supseteq \Z(I)\cup \Z(J)$. Sei $x\in \Z(I\cdot J)$ und angenommen, $x\notin \Z(I)$. Dann existiert ein $f\in I$ mit $f(x) \neq 0$. Sei $g\in J$. Dann ist $fg\in I\cdot J$, also $0 = f(x)\cdot g(x)$, wobei $f(x)\neq 0$, also $g(x) = 0$ und damit $x \in \Z(J)$.
		\qedhere
	\end{enumerate}
\end{proof}
\begin{prop} Es ist
	\[\set{\IA^n\setminus \Z(T)\given T\subseteq k[t_1,\dots, t_n]}\]
	eine Topologie auf $\IA^n$, genannt \emph{Zariski-Topologie}.
\end{prop}
\begin{defi}
	Sei $X$ ein topologischer Raum.
	\begin{enumerate}
		\item $X$ heißt \emph{irreduzibel}, falls für alle abgeschlossenen $Y_1, Y_2\subsetneq X$ dann $Y_1\cup Y_2 \neq X$ folgt.
		\item Sei $Y\subseteq X$ eine Teilmenge. $Y$ heißt irreduzibel, wenn $Y$ mit der Relativtopologie irreduzibel ist. 
	\end{enumerate}
\end{defi}
\begin{bsp}
	$\IA^1$ ist irreduzibel, denn echte abgeschlossene Teilmengen von $\IA^1$ sind endlich, aber $\abs{\IA^1} = \abs k = \infty$.
\end{bsp}
\begin{defi}
	Eine irreduzible algebraische Teilmenge $X\subseteq \IA^n$ heißt \emph{affine Varietät}.
	
	Achtung: Die abgeschlossene Einbettung $X\subseteq \IA^n$ gehört zum Datum einer Varietät.
\end{defi}
\subsection{Hilberts Nullstellensatz}
\begin{defi}
	Sei $Y\subseteq \IA^n$ eine Teilmenge. Definiere
	\[\I(Y) := \set{f\in k[t_1,\dots, t_n]\given \forall x\in Y: f(x) = 0}.\]
\end{defi}
\begin{beme}
	\leavevmode
	\begin{enumerate} 
		\item $\I(Y) \subseteq k[t_1,\dots, t_n]$ ist ein Ideal.
		\item Aus $Y_1\subseteq Y_2$ folgt $\I(Y_1)\supseteq \I(Y_2)$.
		\item $\I(Y_1\cup Y_2) = \I(Y_1)\cap \I(Y_2)$
	\end{enumerate}
\end{beme}

\noindent
\paragraph{Beispiel.}
	Betrachte $\IA^2 \supseteq Y = \set {(x_1,x_2)\given x_1 = 0\text{ oder } x_2 = 0} = \Z(t_1\cdot t_2) = \Z(t_1^it_2^j)$ für $i,j>0$. Was ist dann $\I(Y)$?
	
	Sei $f\in \I(Y)\subseteq k[t_1,t_2]$, schreibe $f(t_1,t_2) = \sum_{i,j\ge 0}a_{ij}t_1^it_2^j$. Es gilt für alle $x\in k$ nun $0 = f(x,0) = \sum_{i\ge0}a_{i0}x^i$ und $0 = f(0,x) = \sum_{j\ge 0} a_{0j}x^j$. Da $\abs k = \infty $ ist, folgt $f(0,t_2) = f(t_1,0) = 0$. Damit erhalten wir
	\[f(t_1,t_2) = \sum_{i,j>0}a_{ij}t_1^it_2^j\in (t_1\cdot t_2).\]
	Andererseits folgt aus $t_1\cdot t_2\in \I(Y)$ dann $(t_1\cdot t_2)\subseteq \I(Y)$; und es gilt $\I(Y) = (t_1\cdot t_2)$.

\begin{lem} \label{lem:8.12}
	Sei $Y\subseteq \IA^n$ eine Teilmenge. Dann ist $\Z(\I(Y)) = \ol{Y}$ (Abschluss in $\IA^n$).
\end{lem}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\glqq$\supseteq$\grqq:] Es gilt $Y\subseteq \Z(\I(Y))$, da für $x\in Y$ und $f\in \I(Y)$ dann $f(x) = 0$ folgt. Zusammen mit der Abgeschlossenheit von $\Z(\I(Y))$ folgt $\ol{Y}\subseteq \Z(\I(Y))$.
		\item[\glqq$\subseteq$\grqq:] Da $\ol{Y}$ abgeschlossen ist, existiert ein Ideal $\ol{I}\subseteq k[t_1,\dots, t_n]$ mit $\Z(\ol{I}) = \ol{Y}$. Da $Y\subseteq \ol{Y} = \Z(\ol{I})$, gilt für alle $x\in Y$ und alle $f\in\ol{I}$ dann $f(x) = 0$. Deshalb ist $\ol{I}\subseteq \I(Y)$ und es folgt $\ol{Y} = \Z(\ol{I}) \supseteq \Z(\I(Y))$.
		\qedhere
	\end{description}
\end{proof}
\begin{satz}[Hilberts Nullstellensatz] \label{thm:hilberts nullstellensatz}
	Sei $I\subseteq k[t_1,\dots, t_n]$ ein Ideal. Dann gilt \[\I(\Z(I)) = \sqrt{I}.\]
\end{satz}
\lecture{21. Juni 2018}

\begin{proof}
	Nach Definition gilt $\Z(I) = \set{x\in\IA^n\given \forall f\in I: f(x) = 0}$. Dabei ist $f(x) = 0$ genau dann, wenn $f\in \ker(\ev_x\colon k[t_1,\dots, t_n]\to k) =: \fm_x$ gilt. Also können wir auch \[\Z(I) = \set{x\in\IA^n\given I\subseteq \fm_x}\] schreiben. Daraus folgt nun
	\begin{align*}
		\I(\Z(I)) &= \set{f\in k[t_1,\dots, t_n]\given \forall x \in \Z(I): f(x) = 0} \\
		&= \set{f\in k[t_1,\dots, t_n] \given \forall x\in\IA^n: I\subseteq \fm_x\Rightarrow f\in \fm_x}\\
		&= \bigcap_{\mathclap{\substack{x\in\IA^n,\\I\subseteq \fm_x}}}\fm_x. \\
	\intertext{Nach dem \hyperreff[thm:schwacher nullstellensatz]{schwachen Nullstellensatz} gilt dabei weiter}
		&= \bigcap_{\mathclap{\substack{\fm\in\Max k[t_1,\dots,t_n],\\I\subseteq \fm}}}\fm \\
	\intertext{Da $k[t_1,\dots, t_n]$ Jacobson ist, folgt ferner}
		&= \bigcap_{\mathclap{\substack{\fp\in\Spec k[t_1,\dots,t_n],\\I\subseteq \fp}}}\fp = \sqrt I.
		\\[-\normalbaselineskip]\tag*{\qedhere}
	\end{align*}
\end{proof}

\begin{bem}
	Sei $I\subsetneq k[t_1,\dots, t_n]$. Dann gilt $\Z(I)\neq \emptyset$.
	\begin{proof}
		Wir haben $\sqrt{I}\subsetneq k[t_1,\dots, t_n]$, also existiert ein $\fm\in\Max k[t_1,\dots, t_n]$ mit $\sqrt{I} \subseteq \fm$. Weiter existiert ein $x\in\IA^n$ mit $\fm = \fm_x$, wobei wir hierbei nur den \hyperreff[thm:schwacher nullstellensatz]{schwachen Nullstellensatz} verwenden.  Daraus folgt
		\[\set{x} = \Z(\fm_x) \subseteq \Z(\sqrt{I}) \subseteq \Z(I),\]
		wobei im letzten Schritt schon Gleichheit gilt, denn für $y\in \Z(I)$ und $f\in\sqrt {I}$ existiert ein $n>0$ mit $f^n\in I$, und es folgt $0 = f^n(y) = f(y)^n$, also $f(y) = 0$.
	\end{proof}
\end{bem}
\begin{kor} \label{kor:8.14}
	\leavevmode
	\begin{enumerate}
		\item \label{kor:8.14:i} Die Abbildung
		\begin{eqnarray*}
			\set{\text{Algebraische Teilmengen }Y\subseteq \IA^n}&\xlongleftrightarrow{1:1}&\set{I\subseteq k[t_1,\dots, t_n]\given I\text{ Ideal}, I = \sqrt{I}} \\
			Y &\longmapsto& \I(Y) \\
			\Z(I) &\longmapsfrom& I
		\end{eqnarray*}
		ist eine inklusionsumkehrende (\enquote{inclusion reversing}) Bijektion.
		\item \label{kor:8.14:ii} Die Bjektion beschränkt sich sich zu
		\[\set{\text{Abgeschlossene irreduzible Teilmengen }Y\subseteq \A^n}  \xlongleftrightarrow{1:1}\Spec k[t_1,\dots, t_n]\]
		bzw. zu 
		\[\set{\set{x}\given x\in\IA^n}\xlongleftrightarrow{1:1}\Max k[t_1,\dots, t_n].\]
	\end{enumerate}
\end{kor}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{kor:8.14:\roman*}]
		\item Klar nach \namereff{thm:hilberts nullstellensatz} und \cref{lem:8.12}.
		\item Sei $Y\subseteq \IA^n$ eine abgeschlossene irreduzible Teilmenge. Seien $f,g\in k[t_1,\dots, t_n]$ mit $f,g\notin \I(Y)$ und $f\cdot g \in \I(Y)$. Dann folgt $\Z(\I(Y)+(f))\supsetneq Y \subsetneq \Z(\I(Y)+(g))$, da aus $\Z(\I(Y)+(f)) = Y$ dann $f(y) = 0$ für alle $y \in Y$, also $f\in \I(Y)$ gelten würde. Aufgrund der Irreduzibilität von $Y$ folgt weiter
		\[\Z(\I(Y)+(f)) \cup \Z(\I(Y)+(g)) \subsetneqq Y,\]
		wobei $\Z(\I(Y)+(f))\cup \Z(\I(Y)+(g)) = \Z((\I(Y)+(f))\cdot (\I(Y)+(g)))$ ist. Andererseits gilt
		\[(\I(Y)+(f))\cdot (\I(Y)+f(g))\subseteq \I(Y)+(fg)= \I(Y)\]
		nach Annahme. Das heißt, dass $Y\supsetneq \Z(\I(Y)+(f))\cup \Z(\I(Y)+(g))\supseteq \Z(\I(Y)+(fg)) = \Z(\I(Y)) = Y$, was ein Widerspruch ist. Also ist $\I(Y)$ prim.
		
		Für die umgekehrte Richtung sei $\fp \in \Spec k[t_1,\dots, t_n]$. Seien $Z_1,Z_2\subseteq \Z(\fp)$ abgeschlossen mit $Z_1\cup Z_2 = \Z(\fp)$. Schreibe $Z_i = \Z(I_i)$ ($i= 1,2$) für Ideale $I_i\subseteq k[t_1,\dots, t_n]$ mit $\fp\subseteq I_i$. Dann gilt
		\[\Z(\fp) = \Z(I_1)\cap \Z(I_2) = \Z(I_1\cdot I_2).\]
		Wir wenden \ref{kor:8.14:i} an und erhalten $\fp = \sqrt{\fp} = \sqrt{I_1\cdot I_2}\supseteq I_1\cdot I_2$ und mit Aufgabe 3 von \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt7b.pdf}{Übungsblatt 7} (\enquote{prime avoidance}) folgt $\fp \supseteq I_1$ oder $\fp\supseteq I_2$. Dann ist aber $\Z(\fp) \subseteq \Z(I_1)$ oder $\Z(\fp)\subseteq \Z(I_2)$, wobei jedes Mal bereits Gleichheit gälte. Damit ist $\Z(\fp)$ irreduzibel.
		
		Zu den maximalen Idealen: Für $\fm\in\Max k[t_1,\dots, t_n]$ ist $\fm = \fm_x$ für ein $x\in\IA^n$. Es gilt $\Z(\fm_x) = \set{x}$, da für $y\in \Z(\fm_x)$ dann $f(y) = 0$ für alle $f\in \fm_x$, also insbesondere $f(y) = 0$ für $f = t_i-x_i$ gilt, und demnach $y_i = x_i$, also $y = x$ folgt. Andersherum ist für $x\in\IA^n$ dann $\I(\set{x}) = \set{f\in k[t_1,\dots, t_n]\given f(x) = 0} = \fm_x$.
		\qedhere
	\end{enumerate}	
\end{proof}

\begin{defi}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge. Der Ring
	\[\A(X) := \fak{k[t_1,\dots, t_n]}{\I(X)}\]
	heißt \emph{affiner Koordinatenring} von $X$.
	
\end{defi}
\begin{beme}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge.
	\begin{enumerate}
		\item $\A(X)$ ist \emph{reduziert}, für alle $f\in \A(X)$ bedeutet die Existenz eines $n\ge 0$ mit $f^n = 0$ also bereits $f = 0$.
		
		$\A(X)$ ist eine endlich erzeugte $k$-Algebra.
		\item $X$ ist genau dann irreduzibel, wenn $\A(X)$ ein Integritätsbereich ist.
	\end{enumerate}
\end{beme}
\begin{defi}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge. Versieh $X$ mit der Relativtopologie von $\IA^n$. Diese Topologie auf $X$ heißt die \emph{Zariski-Topologie}.
\end{defi}
\begin{kor}
	Sei $X\subseteq\IA^n$ eine algebraische Teilmenge. Dann induzieren $\Z$ und $\I$ aus \cref{kor:8.14} die folgenden Bijektionen.
	\begin{eqnarray*}
		\set{\text{Abgeschlossene Teilmengen }Y\subseteq X} &\xlongleftrightarrow{1:1}&\set{I\subseteq \A(X) \text{ Ideal}\given \sqrt{I} = I}\\
		\set{\text{Abgeschlossene irreduzible Teilmengen }Y\subseteq X}&\xlongleftrightarrow{1:1}&\Spec \A(X)\\
		\set{\set{x}\given x\in X}&\xlongleftrightarrow{1:1}&\Max \A(X)
	\end{eqnarray*}
\end{kor}
\begin{defi}
	Sei $X$ ein topologischer Raum. Eine abgeschlossene irreduzible Teilmenge $C\subseteq X$ heißt \emph{irreduzible Komponente} von $X$, wenn für alle abgeschlossenen, irreduziblen $Z\subseteq X$ aus $C\subseteq Z$ bereits $C = Z$ folgt.
\end{defi}
\begin{kor}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge Dann liefern $\Z$ und $\I$ die Bijektion
	\[\set{\text{Irreduzible Komponenten }C\subseteq X}\xlongleftrightarrow{1:1} \MinSpec\A(X).\]
	Insbesondere hat $X$ nur endlich viele irreduzible Komponenten (da $\A(X)$ noethersch), aber mindestens eine.
\end{kor}

\paragraph{Beispiel.}
Betrachte $X = \Z(t_1t_2)\subseteq \IA^2$. Dann gilt \[\A(X) = \fak{k[t_1,t_2]}{(t_1t_2)}\quad\text{und}\quad\MinSpec\A(X) = \set{(t_1),(t_2)}.\] Damit folgt \[\set{\text{Irreduzible Komponenten}} = \set{\Z(t_1) = \text{$t_2$-Achse, } \Z(t_2) = \text{$t_1$-Achse}}.\]


\subsection{Morphismen}
\begin{defi}
	Seien $X\subseteq \IA^n$ und $Y\subseteq \IA^m$ algebraische Teilmengen. Eine Abbildung $f\colon X\to Y$ heißt \emph{Morphismus von algebraischen Teilmengen}, falls es $f_1,\dots, f_m\in k[t_1,\dots, t_n]$ gibt, sodass \[f(x) = (f_1(x),\dots, f_m(x)) \] für alle $x = (x_1,\dots, x_n)\in X$ gilt. Wir erhalten also das folgende Diagramm.
	\begin{center}
		\begin{tikzcd}[column sep=large]
			\IA^n \arrow{r}{\exists(f_1,\dots, f_m)} &\IA^m\\
			X\arrow[Subseteq]{u}\arrow{r}{f} & Y \arrow[Subseteq]{u} 
		\end{tikzcd}
	\end{center}
	Wir schreiben $\Hom(X,Y) := \set{f\colon X\to Y\given f\text{ Morphismus}}$.
\end{defi}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Sei $X=  \Z(t_1^3-t_2^2)\subseteq \IA^2$ %TODO: hier und unten skizzen einfügen
		
		Betrachte Abbildung $f\colon \IA^1\to X, x\mapsto (x^2,x^3)$. $f$ ist ein Morphismus, da
		\begin{center}
			\begin{tikzcd}
				\IA^1 \arrow{r}{(x^2,x^3)} &\IA^2\\
				\IA^1\arrow[Subseteq]{u}\arrow{r}{f} & X \arrow[Subseteq]{u} 
			\end{tikzcd}
		\end{center}
		gilt. $f$ ist bijektiv.
		\item Sei $Y = \Z(t_1^2-t_2)\subseteq \IA^2$.
		
		Betrachte Abbildungen $g\colon \IA^1\to Y, x\mapsto(x, x^2)$ und $g'\colon Y\to \IA^1, (x_1, x_2)\mapsto x_1$. Beides sind Morphismen (klar) und $g'\circ g = \id_{\IA^1}$, $g\circ g' = \id _Y$.
	\end{enumerate}
\end{bsp}
\begin{beme} \label{bem:8.23}
	Sei $X\subseteq \IA^n$ algebraische Teilmenge. Dann ist 
	\[\Hom(X, \IA^1)\subseteq \Abb(X,k) := \set{f\colon X\to k\given f\text{ Abbildung}}\]
	ein Unterring, wobei die Ringstruktur durch $(f+g)(x) = f(x) +g(x)$ und $(f\cdot g)(x) = f(x) \cdot g(x)$ gegeben ist. Falls $f,g\in\Hom(X,\IA^1)$, sind dann auch $f+g,f\cdot g\in\Hom(X,\IA^1)$.
	
	Betrachte den Ringhomomorphismus
	\begin{eqnarray*}
		\alpha\colon k[t_1,\dots, t_n] &\longrightarrow& \Abb(X,k), \\
		f &\longmapsto& \alpha(f)\colon X\to k, x\mapsto f(x).
	\end{eqnarray*}
	Es gilt $\im \alpha = \Hom(X,\IA^1)$ und $\ker \alpha = \I(X)$. Somit induziert $\alpha$ einen Isomorphismus $\beta$.
	\begin{center}
		\begin{tikzcd}
			k[t_1,\dots, t_n] \arrow{r}{\alpha}\arrow{d} &\Abb(X,k)\\
			\A(X)\arrow{r}{\beta}[swap]{\cong} & \Hom(X,\IA^1) \arrow[Subseteq]{u} 
		\end{tikzcd}
	\end{center}
	Für $f\in \A(X)$ schreiben wir $f(x) := (\beta(f))(x)$ für $x\in X$.
\end{beme}
\begin{beme}
	Seien $X\subseteq \IA^n, Y\subseteq \IA^m, Z\subseteq \IA^l$ algebraische Teilmengen, Seien $X\xto{f}Y\xto{g}Z$ Morphismen. Dann ist $g\circ f\colon X\to Z$ ein Morphismus. Außerdem: $\id_X\colon X\to X$ ist ein Morphismus.
\end{beme}
\begin{defi}
	Ein Morphismus $f\colon X\to Y$ zwischen algebraischen Teilmengen $X\subseteq \IA^n, Y\subseteq \IA^m$ heißt \emph{Isomorphismus}, wenn es einen Morphismus $g\colon Y\to X$ mit $g\circ f = \id_X$ und $f\circ g = \id_Y$ gibt.
\end{defi}

\medskip

In der nächsten Vorlesung betrachten wir $\Hom(X,Y)\xleftrightarrow{1:1}\Hom_{k-\text{Alg.}}(\A(Y),\A(X))$. Es bleibt also spannend, bleibt dran!

\lecture{25. Juni 2018}

\begin{bem}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge sowie $A := \A(X)$. Wir haben zum einen die Zariski-Topologie auf $X$
	\[\set{\text{abgeschlossene Teilmengen von } X} = \set{\Z(J)\given \I(X) \subseteq J\subseteq k[t_1,\dots, t_n]}\]
	und die Zariski-Topologie auf $\Spec A$
	\[\set{\text{abgeschlossene Teilmengen von }\Spec A} = \set{\V(I)\given I\subseteq A \text{ Ideal}}\]
	wobei $\V(I) = \set{\fp\in \Spec A\given I\subseteq \fp}$.
	Betrachte die bijektive Abbildung
	\begin{eqnarray*}
		\phi\colon X & \longrightarrow &\Max A \subseteq \Spec A,\\
		x & \longmapsto & \fak{\fm_x}{\I(X)}.
	\end{eqnarray*}
	Betrachte die algebraische Teilmenge $\Z(J)\subseteq X$. Dann ist \[\phi(\Z(J)) = \set{\fak{\fm_x}{\I(X)}\given \forall f\in J: f(x) = 0},\]
	wobei $\forall f\in J: f(x) = 0$ äquivalent zu $J\subseteq \fm_x$ ist. Mit dem \hyperreff[thm:schwacher nullstellensatz]{schwachen Nullstellensatz} folgt
	\begin{align*}
		\phi(\Z(J)) &= \set{\fak{\fm}{\I(X)}\given J\subseteq \fm\in\Max k[t_1,\dots, t_n]}\\
		&= \set{ \fn \given \fn\in \Max A, \fn\supseteq \fak J{\I(X)}}\\
		&= \V(\fak J{\I(X)})\cap \Max A.
	\end{align*}
	Also ist die auf $\Max A$ von $X$ via $\phi$ gegebene Topologie identisch zur Relativtopologie von $\Spec A$ auf $\Max A$.
\end{bem}

Erinnerung: Sei $X\subseteq \IA^n$ abgeschlossen. Wir hatten dann: 
	\begin{center}
	\begin{tikzcd}
		k[t_1,\dots, t_n] \arrow{r}{\alpha_X}\arrow{d} &\Abb(X,k)\\
		\A(X)\arrow{r}{\beta_X}[swap]{\cong} & \Hom(X,\IA^1) \arrow[Subseteq]{u} 
	\end{tikzcd}
	\end{center} 

\begin{beme} \label{bem:8.26}
	\leavevmode
	\begin{enumerate}
		\item
		Seien $X\subseteq \IA^n$, $Y\subseteq \IA^m$ algebraische Teilmengen. Sei $f\colon X\to Y$ ein Morphismus. Definiere $f^*\colon \A(Y)\to \A(X)$ durch
		\begin{center}
			\begin{tikzcd}[column sep=2cm]
				\A(Y) \arrow[bend right=15]{rrr}{f^*} \arrow{r}{\beta_X} & \Hom(Y,\IA^1) \arrow{r}{h \mapsto h \circ f} &\Hom(X,\IA^1) \arrow{r}{\beta_X^{-1}} & \A(X).
			\end{tikzcd}
		\end{center}
		$f^*$ ist ein Ringhomomorphismus, da $h\mapsto h\circ f$ ein Ringhomomorphismus (und sogar ein $k$-Algebrenhomomorphismus) ist. Für einen weiteren Morphismus $g: Y \to Z$ gilt $(g\circ f)^* = f^*\circ g^*$.
		\item \label{bem:8.26:ii}
		Sei $\phi\colon \A(Y)\to \A(X)$ ein $k$-Algebrenhomomorphismus. Dann gilt
		\begin{center}
			\begin{tikzcd}
				k[s_1,\dots, s_m] \arrow[dashrightarrow]{r}{\exists \Phi}\arrow[twoheadrightarrow]{d} &k[t_1,\dots, t_n]\arrow[twoheadrightarrow]{d}\\
				\A(Y)\arrow{r}{\phi} & \A(X),
			\end{tikzcd}
		\end{center}
		wobei $\Phi$ ein $k$-Algebrenhomomorphismus ist. Dazu betrachten wir das Bild $\ol{f_i}$ von $s_i$ unter der Abbildung $k[s_1,\ldots,s_m] \twoheadrightarrow \A(Y) \xto{\phi} \A(X)$ und wählen ein Urbild $f_i$ von $\ol{f_i}$ unter $k[t_1,\ldots,t_n] \twoheadrightarrow \A(X)$. Setze nun $\Phi := \ev_{(f_1,\ldots,f_m)}$ (nicht eindeutig bestimmt!).
		
		Betrachte $F\colon \IA^n\to \IA^m, x = (x_1,\dots, x_n)\mapsto (f_1(x),\dots, f_m(x))$. Wir zeigen $F(X)\subseteq Y$. Sei $x\in X$ und $g\in \I(Y)$. Es gilt \[g(F(x)) = g(f_1(x),\dots, f_m(x)) \xeq{!} g(f_1,\dots, f_m)(x),\] da 
		\begin{center}
			\begin{tikzcd}[column sep=2cm]
				k[s_1,\dots, s_m]\arrow{r}{\ev_{(f_1,\dots, f_m)}}\arrow{rd}[swap]{\ev_{(f_1(x),\dots, f_m(x))}}& k[t_1,\dots, t_n]\arrow{d}{\ev_{(x_1,\dots, x_n)}}\\
							& k
			\end{tikzcd}
		\end{center}
		kommutiert und folglich
		\begin{align*}
			\ev_{(x_1,\dots, x_n)}\circ \ev_{(f_1,\dots, f_m)}(s_i) &= \ev_{(x_1,\dots, x_n)}(f_i) = f_i(x_1,\dots, x_n) \\ &= f_i(x) = \ev_{(f_1(x), \dots, f_m(x))}(s_i)
		\end{align*} gilt.
		Also haben wir $g(F(x)) = (g(f_1,\dots, f_m))(x)$, wobei \[g(f_1,\dots, f_m) = \ev_{(f_1,\dots, f_m)}(g) = \Phi(g)\] ist, also $g(F(x)) = (\Phi(g))(x) = 0$, da $\Phi(\I(Y))\subseteq \I(X)$. Das bedeutet nun:
		\begin{center}
			\begin{tikzcd}
				\IA^n \arrow{r}{F}&\IA^m\\
				X\arrow[Subseteq]{u}\arrow[dashrightarrow]{r}{\exists !f} & Y \arrow[Subseteq]{u} 
			\end{tikzcd}
		\end{center}
		Nach Konstruktion von $F$ ist $f$ ein Morphismus
		
		Wir zeigen noch, dass $f$ unabhängig von den Wahlen der $f_i$ ist. Seien dazu $f_i'$ weitere Urbilder von $\ol{f_i}$. Dann gilt insbesondere $f_i-f_i'\in \I(X)$. Nun folgt $f_i(x) = f_i'(x)$ für alle $x \in X$, also $F(x) = F'(x) := (f_1'(x),\dots, f_m'(x))$.
		
		Wir schreiben $\phi^{\#} := f$. Für $k$-Algebrenhomomorphismen $\psi\colon \A(Z)\to\A(Y)$ gilt weiterhin $(\phi\circ \psi)^{\#} = \psi^{\#}\circ \phi ^{\#}$.
	\end{enumerate}
\end{beme}

\begin{prop} \label{prop:8.27}
	\leavevmode
	\begin{enumerate}
		\item Seien $X\subseteq \IA^n, Y\subseteq \IA^m$ algebraische Teilmengen. Dann sind
		\begin{eqnarray*}
			\Hom(X,Y) & \longleftrightarrow & \Hom_{k-\text{Alg.}}(\A(Y),\A(X))\\
			f & \longmapsto &f^*\\
			\phi^{\#}&\longmapsfrom & \phi
		\end{eqnarray*}
		zueinander inverse Bijektionen. \label{prop:8.27:i}
		\item Zu jeder endlich erzeugten, reduzierten $k$-Algebra $A$ existiert eine algebraische Teilmenge $X\subseteq \IA^n$ mit $\A(X)\cong A$. $X$ ist bis auf Isomorphie eindeutig bestimmt und $A$ genau dann ein Integritätsbereich, wenn $X$ eine Varietät ist. \label{prop:8.27:ii}
	\end{enumerate}
\end{prop}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{prop:8.27:\roman*}]
		\item Sei $f\in\Hom(X,Y)$. Wir zeigen zunächst $(f^*)^{\#} = f$. Definiere $\phi := f^*$. Betrachte das Diagramm
		\begin{equation}
			\begin{tikzcd}
				k[s_1,\dots, s_m]\arrow{r}{\Phi}\arrow{d}& k[t_1,\dots, t_n]\arrow{d}\\
				\A(Y)\arrow{r}{\phi}& \A(X),
			\end{tikzcd} \tag{*}\label{eq:8.27:1}
		\end{equation}
		wobei wir $\Phi$ so wählen, dass \eqref{eq:8.27:1} kommutiert.
		
		Sei $F\colon \IA^n\to \IA^m$ die Abbildung konstruiert wie in \cref{bem:8.26} \ref{bem:8.26:ii}. Es gilt $\phi^{\#}(x) = F(x)$ für alle $x\in X$. Wir wenden das $\beta$ aus \cref{bem:8.23} auf das Diagramm \eqref{eq:8.27:1} an und erhalten
		\begin{center}
			\begin{tikzcd}[column sep=0.8cm]
				\Hom(\IA^m,\IA^1) \arrow{ddd}{h \mapsto h|_Y} \arrow{rrr}[swap]{h \mapsto h \circ F} && &\Hom(\IA^n,\IA^1) \arrow{ddd}[swap]{h \mapsto h|_X} \\
				&k[s_1,\dots, s_m] \arrow{lu}{\cong} \arrow{r}{\Phi}\arrow{d} &k[t_1,\dots, t_n]\arrow{ru}[swap]{\cong}\arrow{d}\\
				&\A(Y)\arrow{r}{\phi=f^*}\arrow{ld}[swap]{\cong} & \A(X)\arrow{rd}{\cong} \\
				\Hom(Y,\IA^1) \arrow{rrr}{h\mapsto h \circ f} && &\Hom(X,\IA^1).
			\end{tikzcd}
		\end{center}
		Hierin kommutieren alle Teildiagramme, also insbesondere auch der äußere Weg, was gerade \[ (h \circ F)|_X = h|_Y \circ f \quad\text{und}\quad h(F(x))  = h(f(x)) \] für alle $h \in \Hom(\IA^m ,\IA^1)$ und $x \in X$ bedeutet.
		
		Wir wählen nun konkret $h\colon \IA^m\to \IA^1, (y_1,\dots, y_m)\mapsto y_i$. Dann ist $F(x)_i$ die $i$-te Koordinate von $F(x) = f(x)_i$. Da $i$ beliebig ist, gilt schon $F(x) = f(x)$.
		
		Sei umgekehrt $\phi\colon \A(Y)\to \A(X)$ ein Homomorphismus von $k$-Algebren. Wir wählen einen Lift, sodass das Diagramm \eqref{eq:8.27:1} kommutiert, und erhalten so $F\colon \IA^n\to \IA^m$. Es gilt $\phi^{\#}(x) = F(x)$ für alle $x\in X$. Es reicht zu zeigen, dass
		\begin{center}
			\begin{tikzcd}[column sep=2cm]
				\Hom(Y,\IA^1)\arrow{r}{h\mapsto h\circ \phi^{\#}}& \Hom(X,\IA^1)\\
				\A(Y)\arrow{u}{\cong}[swap]{\beta_Y}\arrow{r}{\phi} & \A(X) \arrow{u}{\cong}[swap]{\beta_X}
			\end{tikzcd}
		\end{center}
		kommutiert. Seien dazu $g\in \A(Y)$ und $x\in X$; und wir zeigen $(\beta_Y(g)\circ\phi^{\#})(x) = (\beta_X(\phi(g)))(x)$. Zunächst gilt
		\begin{align*}
			(\beta_Y(g)\circ\phi^{\#})(x)  &=  (\beta_Y(g))(\phi^{\#}(x)), \\
		\intertext{und wir wählen ein Urbild $\ol g$ unter $k[s_1,\ldots,s_m] \to \A(Y)$. Weiter erhalten wir}
			&= \ol{g}(\phi^{\#}(x)) = \ol{g}(F(x)) = (\Phi(\ol{g}))(x),
		\intertext{und wählen wieder ein Urbild $\ol{\phi(g)}$ von $\phi(g)$ unter $k[t_1,\ldots,t_n]$. Schließlich gilt}
			&= (\ol{\phi(g)})(x) = (\beta_Y(\phi(g)))(x).
		\end{align*}		
		\item Sei $A$ eine reduzierte, endlich erzeugte $k$-Algebra; es existiert also eine Surjektion $\phi\colon k[t_1,\dots, t_n]\to A$ von $k$-Algebren. Definiere $X := \Z(\ker\phi)\subseteq \IA^n$ (algebraisch). Dann gilt \[\A(X) = \fak{k[t_1,\dots, t_n]}{\I(X)} = \fak{k[t_1,\dots, t_n]}{\sqrt{\ker\phi}}.\] Da $A$ reduziert ist, folgt $\fak{k[t_1,\dots, t_n]}{\sqrt{\ker\phi}} = \fak{k[t_1,\dots, t_n]}{\ker \phi} \cong A$.
		\qedhere
	\end{enumerate}
\end{proof}

\begin{lem}
	Seien $X\subseteq \IA^n$ und $Y\subseteq \IA^m$ algebraische Teilmengen sowie $f\colon X \to Y$ ein Morphismus. Sei $x\in X$ und $\fm_x\in\Max \A(X)$ das zugehörige maximale Ideal. Dann ist $\fm_x\cap \A(Y) = \fm_{f(x)}$ (via $f^*\colon \A(Y)\to \A(X)$). 
\end{lem}
\begin{proof}
	Unter $\beta_X\colon \A(X)\xto{\cong}\Hom(X, \IA^1)$ ist $\beta_X(\fm_x) = \set{h\in\Hom(X,\IA^1)\given h(x) =0}$. Betrachte das folgende kommutative Diagramm.
	\begin{center}
		\begin{tikzcd}[column sep=1.5cm]
			\A(Y) \arrow{r}{f^*}\arrow{d}{\beta_Y}[swap]{\cong} & \A(X)\arrow{d}{\beta_X}[swap]{\cong}\\
			\Hom(Y,\IA^1)\arrow{r}{\Phi}[swap]{h\mapsto h\circ f} & \Hom(X,\IA^1)
		\end{tikzcd}
	\end{center}
	Damit gilt
	\begin{align*}
		\Phi^{-1}(\beta_X(\fm_x)) &= \set{h\in \Hom(Y,\IA^1\given h\circ f \in\beta_X(\fm_x)} \\
		&= \set{h\in\Hom(Y,\IA^1)\given h(f(x)) = 0} = \beta_Y(\fm_{f(x)}). \qedhere
	\end{align*}
\end{proof}


\lecture{28. Juni 2018}

\begin{defi}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge und $h\in \A(X)$. Dann heißt \[\D(h) := \set{x\in X\given h(x) \neq 0} = X\setminus \Z(h)\] die \emph{offene Hauptmenge} von $X$ (\enquote{principal open subset}).
\end{defi}
\begin{beme}
	Offene Hauptmengen lassen sich als algebraische Teilmengen realisieren. Für $X\subseteq \IA^n$ ist $\D(h)\subseteq \IA^{n+1}$ abgeschlossen. Es gilt $\A(\D(h))\cong \A(X)[h^{-1}]$. 
\end{beme}
\begin{lem} \label{lem:8.31}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge und $U\subseteq X$ offen. Dann gibt es $h_1,\dots, h_m\in \A(X)$ mit \[U = \bigcup_{i = 1}^m \D(h_1).\]
\end{lem}
\begin{proof}
	Sei $Z = X\setminus U\subseteq X$ abgeschlossen. Dann gibt es ein Ideal $I\subseteq \A(X)$, sodass $Z = \Z(I) = \set{x\in X\given \forall f\in I, f(x) = 0}$. Da $\A(X)$ noethersch ist, gibt es $h_1,\dots, h_m\in I$ mit $I = (h_1,\dots, h_m)$. Dann ist
	\[Z  = \set{x\in X\given h_1(x) = \ldots = h_m(x)= 0}\]
	und
	\[U = X\setminus Z = \set{x\in X\given \exists i: h_i(x) \neq 0} = \bigcup_{i = 1}^m \D(h_m).\qedhere\]
\end{proof}
\begin{prop}
	Seien $X\subseteq\IA^n$ und $Y\subseteq \IA^m$ algebraische Teilmengen sowie $f\colon X\to Y$ ein Morphismus. Dann ist $f$ stetig.
\end{prop}
\begin{proof}
	Nach \cref{lem:8.31} genügt es zu zeigen, dass $f^{-1}(\D(h))\subseteq X$ für alle $h\in \A(Y)$ offen ist. Es gilt aber $f^{-1}(\D(h)) = \set{x\in X\given h(f(x))\neq 0} = \set{x\in X\given (f^*(h))(x)\neq 0} = \D(f^*(h))$.
\end{proof}
\begin{beme}
	Seien $X = \Z(t_1^3-t_2^2) = \set{(x_1,x_2)\given x_1^3 = x_2^2}\subseteq \IA^2$ und $Y = \IA^1$. Dann ist $f\colon \IA^1\to X, x\mapsto (x^2, x^3)$ ein Morphismus und offensichtlich bijektiv. Wir zeigen, dass $f$ offen (d.h. Bilder offener Teilmengen sind offen) ist. Sei dazu $h\in \A(\IA^1) = k[t]$. Wir betrachten $\D(h)$. Sei ohne Einschränkung $h(t) = (t-x_1)\dots (t-x_n)$. Also ist $\D(h) = \IA^1\setminus\set{x_1,\dots, x_n}$. Damit haben wir $f(\D(h)) = \set{f(x)\given x\in \D(h)} = X\setminus\set{f(x_1),\dots, f(x_n)}$, wobei wir hier ausnutzen, dass $f$ bijektiv ist. Da aber endliche Teilmengen sind abgeschlossen sind, ist $f(\D(h))$ offen. Folglich ist $f$ ein Homöomorphismus.
	
	Aber: $f$ ist kein Isomorphismus. Betrachte $f^*\colon \A(X)\to \A(\IA^1)$, wobei $\A(\IA^1) = k[t]$ und $\A(X) = k[t_1,t_2]/(t_1^3-t_2^2)$, da $t_1^3-t_2^2$ irreduzibel ist.
	\[f^*\colon k[t_1,t_2]/(t_1^3-t_2^2) \longto k[t],\quad t_1\longmapsto t^2, t_2\longmapsto t^3\]
	$f^*$ ist kein Isomorphismus, da $t\notin \im f^*$. Nach \cref{prop:8.27} ist damit auch $f$ kein Isomorphismus.
	
	Außerdem sind $\IA^1$ und $X$ sind nicht isomorph. Betrachte $(0,0)$ in $X$. Dieser Punkt entspricht dem maximalen Ideal $(t_1,t_2)/(t_1^3-t_2^2) =: \fm$ von $\A(X)$. Es gilt
	\[\fak{\fm}{\fm^2} \cong \fak{(t_1,t_2)}{(t_1^2, t_1t_2, t_2^2, t_1^2-t_2^2)} = \<t_1,t_2\>_k \]
	und $t_1, t_2$ in $\fak{\fm}{\fm^2}$ sind linear unabhängig.
	
	Aber für $x\in\IA^1$ gilt $\fm_x = (t-x)$, und es folgt $\fak{\fm_x}{\fm_x^2}\cong \<t-x\>_k$. Somit kann es keinen Isomorpismus $\IA^1\to X$ geben.
\end{beme}

\section{Dimensionstheorie}
\begin{defi}
	Sei $X$ ein topologischer Raum. Definiere $\dim X \in \IZ_{\ge 0}\cup \set{\pm \infty}$ als 
	\[\dim X := \sup \set{l\given \exists X_0\subsetneq X_1\subsetneq\dots \subsetneq X_l \neq \emptyset,\enspace X_i\subseteq X\text{ abgeschlossen und irreduzibel}}.\]
	Formal gilt $\dim\emptyset = -\infty$.
\end{defi}

\medskip

Falls $X \subseteq \IA^n$ eine algebraische Teilmenge, also insbesondere eine Varietät ist, so haben wir die Bijektion
\[\set{\text{abgeschlossene irreduzible Teilmenge }Z\subseteq X}\xlongleftrightarrow{1:1}\set{\text{Primideale von }\A(X)}\]
Dies führt zu der folgenden
\begin{defi}
	Sei $A$ ein Ring. Definiere $\dim A\in \IZ_{\ge 0}\cup\set{\pm\infty}$ als
	\[\dim A := \sup \set{l\in\IZ_{\ge 0}\given \exists \fp_0\subsetneq \dots \subsetneq \fp_l,\enspace \fp_i\in\Spec A}\]
	Formal gilt $\dim 0 = -\infty$.
\end{defi}
\begin{bsp}
	\leavevmode
	\begin{enumerate}
		\item Körper haben Dimension $0$.
		\item Sei $A$ ein Hauptidealring, der kein Körper ist. Dann folgt $\dim A = 1$. Beispielsweise ist $\dim\IZ = 1$ oder $\dim k[t] = 1$ (geometrisch $\dim \IA^1 = 1$).
		\item In $k[t_1,\dots, t_n]$ können wir die Primidealkette
		\[(0)\subsetneq (t_1)\subsetneq \dots \subsetneq (t_1,\dots, t_n)\]
		betrachten. Deshalb folgt $\dim k[t_1,\dots, t_n]\ge n$, also $\dim\IA^n \ge n$. Tatsächlich gilt Gleichheit, wie wir später sehen werden.
	\end{enumerate}
\end{bsp}

\begin{beme}
	Sei $A$ ein Ring mit $\dim A = d \in\IZ_{\ge 0}$. Dann existiert eine Primidealkette $\fp_0\subsetneq \dots \subsetneq \fp_d$ in $A$. Dann ist diese Kette maximal, das heißt, es gibt kein $\fp $ in $\Spec A$ mit $\fp\subsetneq \fp_0$ oder $\fp_i\subsetneq \fp\subsetneq \fp_{i+1}$ und $\fp_d\subsetneq \fp$. Insbesondere gilt also:
	\begin{enumerate}
		\item $\fp_0\in\MinSpec A\Rightarrow \dim A= \max_{\fp\in \MinSpec A}\dim \fak A{\fp}$
		\item $\fp_d\in \Max A\Rightarrow \dim A = \max_{\fm\in \Max A} A_\fm$
	\end{enumerate}
\end{beme}
\begin{beme}
	Sei $X\subseteq \IA^n$ eine algebraische Teilmenge.
	\begin{enumerate}
		\item $\dim X = \max_{i = 1,\dots, r} \dim C_i$, wobei $C_1,\dots, C_r$ die irreduziblen Komponenten sind.
		\item $\dim X = \max_{x\in X}\dim \A(X)_{\fm_x}$ (falls $X$ irreduzibel, dann folgt $\dim \A(X)_{\fm_x} = \dim \A(X)$ für alle $x \in X$, was wir später zeigen werden).
	\end{enumerate}
\end{beme}
\begin{bsp}
	Sei $X  = \Z(t_1t_3, t_2t_3) = \set{(x_1,x_2,x_3)\given x_1x_3 = 0\text{ und } x_2x_3 = 0}$, also $x_3 = 0$ oder $x_1 = x_2 = 0$.
	%TODO: Skizze davon einfügen
	Irreduzible Komponenten sind $C_1 = \set{(x_1,x_2, 0)\given x_1,x_2 \in k}\cong \IA^2$, $C_2 = \set{(0,0,x_3)\given x_3\in k}\cong \IA^1$. Dann ist $\dim X = \dim C_1 = \dim \IA^2 = 2$.
\end{bsp}
\begin{prop} \label{prop:ganz dim}
	Sei $A\subseteq B$ eine ganze Ringerweiterung. Dann gilt:
	\begin{enumerate}
		\item $\dim A = \dim B$ \label{prop:ganz dim:i}
		\item Für alle $\fq\in\Spec B$ ist $\dim A_{\fq\cap A}\ge \dim B_{\fq}$. \label{prop:ganz dim:ii}
		\item Falls $A\subseteq B$ die Voraussetzungen von \namereff{thm:going down} erfüllt (also $\forall \fp_1, \fp_2\in \Spec A, \fp_1\subseteq \fp_2\forall \fq_2\in\Spec B, \fq_2\cap A = \fp_2\exists \fq_1\in\Spec B: \fq_1\subseteq \fq_2, \fq_1\cap A = \fp_1$), so folgt bereits Gleichheit in \ref{prop:ganz dim:ii}; es gilt also $\dim A_{\fq\cap A} =\dim B_{\fq}$ für alle $\fq \in \Spec B$. \label{prop:ganz dim:iii}
	\end{enumerate}
\end{prop}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{prop:ganz dim:\roman*}]
		\item \begin{description}
			\item[$\dim A \ge \dim B$:] Sei $\fq_0\subsetneq \dots \subsetneq \fq_l$ eine Primidealkette in $B$. Dann erhalten wir die Primidealkette $\fq_0\cap A \subseteq \dots \subseteq \fq_l\cap A$ von $A$. Nach \cref{prop:6.8} \ref{prop:6.8:iii} sind die Inklusionen dabei alle tatsächlich echt.
			\item[$\dim A \le \dim B$:] Sei $\fp_0\subsetneq\dots\subsetneq \fp_d$ eine Primidealkette in $A$. Da $A\hookrightarrow B$ injektiv ist, folgt mit \cref{prop:6.8} \ref{prop:6.8:ii}, dass es $\fq_0\in \Spec B$ gibt mit $\fq_0\cap A = \fp_0$. Wir haben also folgende Situation:
			\begin{center}
				\begin{tikzcd}
					B & \fq_0\arrow[mapsto]{d}&\\
					A\arrow[Subseteq]{u}& \fp_0 \arrow[Subsetneq]{r} & \cdots \arrow[Subsetneq]{r}& \fp_d
				\end{tikzcd}
			\end{center}
			Mit \namereff{thm:going up} folgt, dass es $\fq_1\subsetneq\dots \subsetneq \fq_d$ gibt mit $\fq_i\cap A = \fp_i$.
		\end{description}
		\item Sei $\fq_0\subsetneq \dots \subsetneq \fq_l = \fq$ eine Primidealkette in $B$. Nach \cref{prop:6.8} \ref{prop:6.8:ii} gilt dann $\fq_0\cap A\subsetneq \dots \subsetneq \fq_l\cap A = \fq \cap A$.
		\item Sei $\fp_0\subsetneq \dots \subsetneq \fp_l = \fq \cap A$. Wir haben also folgende Situation:
		\begin{center}
			\begin{tikzcd}
				B & \fq\arrow[mapsto]{d}&\\
				A\arrow[Subseteq]{u}& \fq\cap A=\fp_l& \cdots\arrow[Subsetneq]{l} & \fp_0 \arrow[Subsetneq]{l}
			\end{tikzcd} % inklusionen iwie drehen?
		\end{center}
		Nach \namereff{thm:going down} existieren dann passende Primideale in $B$.
		\qedhere
	\end{enumerate}
\end{proof}

\subsection{Krulls Hauptidealsatz}
\begin{defi}
	Sei $A$ ein Ring und $\fp\in\Spec A$ sowie $n\ge 0$. Dann heißt
	\[\fp^{(n)} := (\fp^n\cdot A_{\fp})\cap A\]
	die \emph{$n$-te sympolische Potenz} von $\fp$.
\end{defi}
\begin{lem} \label{lem:9.9}
	Sei $A$ ein Ring und $\fp\in\Spec A$ sowie $n\ge 0$.
	\begin{enumerate}
		\item $\fp^{(n)} = \set{ a\in A\given \exists s\in A\setminus \fp: sa \in \fp ^n}$ \label{lem:9.9:i}
		\item $\fp^{(0)}\supseteq \fp^{(1)}\supseteq \fp^{(2)}\supseteq \dots$, wobei $\fp^{(0)} = A$ und $\fp^{(1)} = \fp$ \label{lem:9.9:ii}
		\item $\fp^n \subseteq \fp^{(n)}$ \label{lem:9.9:iii}
		\item $\fp^{(n)}\cdot A_{\fp} = \fp^n\cdot A_{\fp} = (\fp\cdot A_{\fp})^n$ \label{lem:9.9:iv}
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:9.9:\roman*}]
		\item \begin{description}
			\item[\glqq$\supseteq$\grqq:] Sei $a\in A$, sodass ein $s\in A\setminus \fp$ mit $sa\in \fp^n$ existiert. Dann ist $\frac a1 = \frac {sa}s\in \fp^n\cdot A_{\fp}$, also $a\in (\fp^n\cdot A_{\fp})\cap A = \fp^{(n)}$.
			\item[\glqq$\subseteq$\grqq:] Sei $a \in (\fp^n\cdot A_{\fp})\cap A$. Dann ist $\frac a1\in \fp^n\cdot A_{\fp}$. Es gibt also $b \in \fp^n$ und $t\in A\setminus \fp$ mit $\frac a1 = \frac bt$. Somit existiert ein $u\in A\setminus \fp$ mit $s := uta = ub \in \fp^n$. Dann folgt $s\in A\setminus \fp$.
		\end{description}
		\item Klar.
		\item Klar.
		\item Wir haben $\fp^{(n)}\cdot A_{\fp} = ((\fp^n\cdot A_{\fp})\cap A)\cdot A_{\fp} = \fp^n \cdot A_{\fp}$, da sogar allgemein $((I\cdot B)\cap A)\cdot B = I\cdot B$ gilt. Es bleibt also $\fp^n\cdot A_{\fp} = (\fp\cdot A_{\fp})^n$ zu zeigen.
		\begin{description}
			\item[\glqq$\subseteq$\grqq:] Sei $b\in \fp^n$. Dann existieren $b_{ij}\in \fp$ mit $b = \sum b_{i1}\dots b_{in}$. Für $s\in A\setminus \fp$ folgt $\frac bs = \sum \frac{b_{i1}}{s}\cdot \frac{b_{i2}}{1}\dots \frac{b_{in}}{1}\in (\fp\cdot A_{\fp})^n$.
			\item[\glqq$\supseteq$\grqq:] Sei $c \in (\fp\cdot A_\fp)^n$. Dann existieren $b_{ij}\in\fp$ und $s_{ij}\in A\setminus \fp$ mit $c = \sum \frac{b_{i1}}{s_{i1}}\cdots \frac{b_{in}}{s_{in}}$. Definiere \[s := \prod_{i,j}s_{ij} \quad\text{und}\quad b := \sum_i\left(\left(\prod_{{\substack{j = 1,\dots, n\\j \neq i}}}s_{ij}\right)\left(\prod_{j = 1}^n b_{ij}\right)\right).\]
			Dann gilt $s\in A\setminus \fp$ und $b\in \fp^{(n)}$ und folglich liegt $c = \frac bs\in \fp^n\cdot A_{\fp}$.
			\qedhere
		\end{description}
	\end{enumerate}
\end{proof}

\lecture{2. Juli 2018}

\begin{satz}[Krulls Hauptidealsatz] \label{thm:krulls hauptidealsatz}
	Sei $A$ ein noetherscher Ring, $x\in A$ und $\fp\in\Spec A$ mit $x\in\fp$ minimal (es existiert also kein $\fq \in\Spec A$ mit $x\in\fq\subsetneq \fp$). Dann ist $\dim A_{\fp}\le 1$.
\end{satz}
\begin{proof}
	Sei $\fq\in \Spec A$ mit $\fq\subsetneq \fp$. Wir zeigen $\fq\in \MinSpec A$. Ohne Einschränkung sei ein $A$ lokaler Ring mit maximalem Ideal $\fp$ (gehe sonst zur Lokalisation $A_{\fp}$ über). Betrachte den Ring $\fak A{(x)}$. Es gilt $\Spec \fak{A}{(x)} = \set{\fp}$. Also ist $\fak A{(x)}$ ein noetherscher Ring, in dem jedes Primideal maximal ist. Nach \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt8.pdf}{Übungsblatt 8} wissen wir damit, dass $\fak A{(x)}$ artinsch ist.
	
	Wir betrachten nun die Idealkette \[\fak{(\fq^{(0)}+(x))}{(x)} \supseteq \fak{(\fq^{(1)}+(x))}{(x)}\supseteq \dots \] in $\fak A{(x)}$. Da $\fak A{(x)}$ artinsch ist, gibt es ein $n\ge 0$ mit \[\fak{(\fq^{(n)}+(x)}{(x)} = \fak{(\fq^{(n+1)}+(x)}{(x)} = \dots .\]
	Insbesondere folgt $\fq^{(n)}+(x) = \fq^{(n+1)}+ (x)$. Damit existiert für alle $f \in \fq^{(n)}$ Elemente $g\in \fq^{(n+1)}$ und $a\in A$ mit $f = g+ax$, also $ax = f-g\in \fq^{(n)}$. Nach \cref{lem:9.9} existiert nun ein $s\in A\setminus \fq$ mit $sax\in\fq^n$.
	
	Wegen der Minimalität von $\fp$ folgt $x\notin \fq$, also $a\in\fq^{(n)}$. Mit anderen Worten haben wir $\fq^{(n)} = (x)\fq^{(n)}+ \fq^{(n+1)}$. Nach \cref{kor:2.19} mit $M=\fq^{(n)}$, $I=(x)$, $N'=\fq^{(n)}$ und $N=\fq^{(n+1)}$ erhalten wir $\fq^{(n)} = \fq^{(n+1)}$.
	
	Wir gehen jetzt zur Lokalisation $A_{\fq}$ über: \[(\fq\cdot A_{\fq})^n = \fq^{(n)} \cdot A_{\fq} = \fq^{(n+1)}A_{\fq} = (\fq\cdot A_{\fq})^{n+1}\]
	Wir wenden nun \cref{lem:nakayama} auf $M = (\fq\cdot A_{\fq})^n$ und $I = \fq\cdot A_{\fq} = \Jac(A_{\fq})$ an. Damit folgt $(\fq\cdot A\fq)^n = 0$. \cref{lem:9.11} impliziert nun $\Spec A_{\fq} = \set{\fq\cdot A_{\fq}}$, also $\dim A_{\fq} = 0$. Das bedeutet aber $\fq\in\MinSpec A$.
\end{proof}
\begin{lem} \label{lem:9.11}
	Sei $(B, \fm)$ ein lokaler Ring, für den ein $k\ge 0$ mit $\fm^k = 0$ existiert. Dann ist schon $\Spec B = \set{\fm}$.
\end{lem}
\begin{proof}
	Sei $\fp\in\Spec B$. Zeige $\fp = \fm$. Die Inklusion $\fp\subseteq \fm$ ist klar. Sei umgekehrt $b\in \fm$. Dann ist $b^k \in \fm^k = 0 \subseteq \fp$, also $b\in\fp$.
\end{proof}

\subsection{Dimension von noetherschen lokalen Ringen}
\begin{defi}
	Sei $(A, \fm)$ ein noetherscher lokaler Ring sowie $I\subsetneq A$ ein Ideal. Dann sind äquivalent:
	\begin{enumerate}
		\item Es existiert ein $n\ge 0$ mit $\fm^n\subseteq I$. \label{def:9.12:i}
		\item Für alle $\fp \in \Spec A$ folgt aus $I\subseteq \fp$ bereits $\fp = \fm$. \label{def:9.12:ii}
		\item $\dim \fak AI = 0$ \label{def:9.12:iii}
		\item $\fak AI$ ist artinsch. \label{def:9.12:iv}
	\end{enumerate}
	Falls diese äquivalenten Bedingungen erfüllt sind, heißt $I$ \emph{Definitionsideal} (\enquote{ideal of definition}).
\end{defi}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[\ref{def:9.12:i} $\Rightarrow$ \ref{def:9.12:ii}:] Da das maximale Ideal von $\fak AI$ nilpotent ist, können wir \cref{lem:9.11} auf $\fak AI$ anwenden.
		\item[\ref{def:9.12:ii} $\Rightarrow$ \ref{def:9.12:iii}:] Es gilt $\Spec \fak AI = \set{\fak \fm I}$, also folgt $\dim \fak AI = 0$.
		\item[\ref{def:9.12:iii} $\Rightarrow$ \ref{def:9.12:iv}:] $\fak AI$ ist noethersch und es gilt $\Spec \fak AI = \Max \fak AI$. Nach Aufgabe 4 von \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt8.pdf}{Übungsblatt 8} ist $\fak AI$ artinsch.
		\item[\ref{def:9.12:iv} $\Rightarrow$ \ref{def:9.12:i}:] Nach Aufgabe 3 von \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt8.pdf}{Übungsblatt 8} ist $\Jac(\fak AI)$ nilpotent, da $A$ artinsch ist. Somit existiert ein $n\ge0$ mit $(\fak \fm I)^n = 0$. Also gilt $\fm^n \subseteq I$.
		\qedhere
	\end{description}
\end{proof}
\begin{satz}
	Sei $(A, \fm)$ ein noetherscher lokaler Ring.
	\begin{enumerate}
		\item Falls $I = (a_1,\dots, a_l)$ ein Definitionsideal ist, so gilt $\dim A \le l$. Insbesondere folgt $\dim A <\infty$. \label{thm:9.13:i}
		\item Sei $\dim A = d$. Dann existiert ein Definitionsideal $I$ von $A$, das von $d$ Elementen erzeugt wird. \label{thm:9.13:ii}
	\end{enumerate}
\end{satz}
\begin{proof}
	Wir führen in beiden Fällen einen Induktionsbeweis.
	\begin{enumerate}[label=\ref{thm:9.13:\roman*}]
		\item \begin{description}
			\item[$l = 0$:] Klar.
			\item[$l = 1$:] \namereff{thm:krulls hauptidealsatz}.
			\item[$l-1\to l$:] Sei $\fq\in \Spec A$ mit $\fq \subsetneq \fm$ und ohne dazwischenliegende Primideale. Dann ist $(a_1,\dots, a_l)\nsubseteq \fq$. Ohne Einschränkung sei $a_1\notin \fq$. Dann ist $(a_1)+\fq$ ein Definitionsideal, und somit existiert ein $n>0$ mit $\fm^n \subseteq (a_1)+\fq$. Also gilt $a_i^n \in (a_1)+\fq$ für alle $i$. Demnach gibt es Elemnte $g_2,\dots, g_l\in\fq$ und $c_2,\dots, c_l\in A$ mit $a_i^n = c_ia_1+g_i$.
			
			Wir zeigen nun, dass $(a, g_2,\dots, g_l)$ ein Definitionsideal ist. Es gilt mit $r := ln$ dann $I^r \subseteq (a_1,g_2,\ldots,g_l)$, da für $x \in I^r$ dann etwa $x= \sum_\nu c_\nu a_{i_1,\nu}\ldots a_{i_r,\nu}$ gilt und in diesem Ausdruck mindestens eines der $a_i$ mit Potenz $\ge n$ vorkommen muss. Somit ist $I$ aber ein Definitionsideal, und es existiert ein $s \ge 0$ mit $\fm^s \subseteq I$, also $\fm^rs \subseteq I^r \subseteq (a_1,g_2,\ldots,g_l)$.
			
			Betrachte nun den Ring $\fak A{(g_2,\dots, g_l)}$ sowie Primideale $\fak{\fq}{(g_2,\dots, g_l)}\subsetneq \fak{\fm}{(g_2,\dots, g_l)}$ und das Bild $\ol a_1$ von $a_1$ unter $A\to \fak A{(g_2,\dots, g_l)}$. Da $\fak{\fq}{(g_2,\dots, g_l)}$ kein Primoberideal von $\ol a_1$ ist (denn $(a_1,g_2,\dots, g_l)$ ist ein Definitionsideal), können wir \namereff{thm:krulls hauptidealsatz} anwenden. Demnach folgt $\dim \fak A{(g_2,\dots, g_l)}\ge 1$, also $\dim \fak{A_{\fq}}{(g_2,\dots, g_l)} = 0$. Also ist $(g_2,\dots, g_l)$ ein Definitionsideal von $A_{\fq}$. Nach der Induktionsvoraussetzung folgt $\dim A_{\fq}\le l-1$. Sei nun \[\fp_0\subsetneq \dots \subsetneq \fp_{d-1}\subsetneq\fp_d\] eine Primidealkette der Länge $d = \dim A$. Dann ist $\fp_d = \fm$ und $\fp_{d-1}$ ist ein $\fq$ wie oben. Schließlich folgt wegen $d-1\le \dim A_{\fp_{d-1}} \le l-1$ dann $d\le l$.
		\end{description}
		\item \begin{description}
			\item[$d = 0$:] $(0)$ ist offensichtlich ein Definitionsideal.
			\item[$d-1 \rightarrow d$:] Sei $\fq\in \Spec A$. Dann ist $\dim A_\fq = d-1$. Hierzu wählen wir eine Primoberidealkette $\fp_0 \subsetneq \ldots \subsetneq \fp_{d-1} \subsetneq \fp_d$. Dann ist $\fp_d = \fm$ und $\dim A_{\fp_{d-1}} \le d-1$, da aus $\dim A_{\fp_{d-1}}\ge d$ dann $\dim A \ge d+1$ folgen würde.
			
			Nach der Induktionsvoraussetzung existieren Elemente $b_1,\ldots,b_{d-1} \in A_\fq$, sodass $(b_1,\ldots,b_{d-1})$ ein Definitionsideal von $A_\fq$ ist. Weiterhin existieren $u_i \in A,s_i \in A \setminus \fq$ mit $b_i = \frac{a_i}{s_i}$. Dann gilt \[ (b_1,\ldots,b_{d-1}) = \left(\frac{a_1}1 ,\ldots , \frac{a_{d-1}}1 \right), \] und $\fq$ ist somit in minimales Primideal von $(a_1,\ldots,a_{d-1})$.
			
			Seien $\fq_1,\ldots,\fq_r$ die (wegen noethersch endlich vielen) Primoberideale von $(a_1,\ldots,a_{d-1})$. Wir zeigen nun $\fm \nsubseteq \fq_1 \cup \ldots\cup \fq_r$. Wir nehmen das Gegenteil an. Nach \enquote{prime avoidance} existiert ein $i$ mit $\fm \subsetneq \fq_i$, also sogar $\fm = \fq_i$. Somit ist $\fm$ ein minimales Primideal über $(a_1,\ldots,a_{d-1})$, weshalb $(a_1,\ldots,a_{d-1})$ ein Definitionsideal von $A$ ist und nach \ref{thm:9.13:i} dann $\dim A \le d-1$ folgt, was ein Widerspruch ist.

			Wir wählen nun ein $a_d \in \fm \setminus (q_1 \cup \ldots \cup q_r)$. Dann ist $(a_1,\ldots,a_{d-1},a_d)$ ein Definitionsideal von $A$, da sonst ein $\fp \in \Spec A$ mit $\fq \subsetneq \fp \subsetneq \fm$ existieren würde.
			\qedhere
		\end{description}
	\end{enumerate}
\end{proof}

\lecture{5. Juli 2018}

\begin{kor}
	Sei $A$ ein noetherscher Ring (nicht notwendigerweise lokal) sowie $a_1,\dots, a_l\in A$ und $\fp\in\Spec A$ ein minimales Primoberideal von $(a_1,\dots, a_l)$. Dann folgt $\dim A_{\fp}\le l$. 
\end{kor}
\qedhere

\subsection{Dimension von endlich erzeugten $k$-Algebren}
\begin{lem} \label{lem:9.15}
	Sei $k$ ein Körper. Dann ist $\dim k[t_1,\dots, t_n] = n$.
\end{lem}
\begin{proof}
	Nach den vorherigen Überlegungen ist $n\le \dim A$ mit $A := k[t_1,\dots, t_n]$ klar. Wir zeigen nun $\dim A\le n$. Sei $\fp_0\subsetneq \dots \subsetneq \fp_l$ eine Primidealkette in $A$. Nach der \namereff{thm:noether-normalisierung} existieren über $k$ algebraisch unabhängige $a_1,\dots, a_l\in A$ und $0\le h_0\le \dots \le h_l\le n$ mit
	\begin{itemize}
		\item $C := k[a_1,\dots, a_l]\subseteq A$ ganz und
		\item $\fp_i\cap C= (a_1,\dots, a_{h_i})$ für $i = 0,\dots, l$.
	\end{itemize}
	Da $\fp_i\subsetneq\fp_{i+1}$ und $A\subseteq C$ ganz, folgt mit \cref{prop:6.8} \ref{prop:6.8:iii} schon $\fp_i\cap C\subsetneq \fp_{i+1}\cap C$, also $h_i<h_{i+1}$ und damit $ l\le n$.
\end{proof}
\begin{satz} \label{thm:9.16}
	Sei $A$ eine endlich erzeugte $k$-Algebra und ein Integritätsbereich. Dann gilt:
	\begin{enumerate}
		\item $\dim A = \trdeg(\fak{\Quot(A)}k)$ \label{thm:9.16:i}
		\item Für eine maximale (also nicht verlängerbare) Primidealkette $\fp_0\subsetneq\dots \subsetneq \fp_l$ gilt $l = \dim A$. \label{thm:9.16:ii}
	\end{enumerate}
\end{satz}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{thm:9.16:\roman*}]
		\item Nach der \namereff{thm:noether-normalisierung} existieren über $k$ algebraisch unabhängige Elemente $a_1,\dots, a_n\in A$ mit $k[a_1,\dots, a_n]\subseteq A$ ganz. Dann folgt mit $n := \trdeg(\fak{\Quot(A)}k)$ nach \cref{prop:ganz dim} $\dim A = \dim k[a_1,\dots, a_n] = n$ (vergleiche \cref{lem:9.15}).
		\item Sei eine maximale Primidealkette $\fp_0\subsetneq \dots \subsetneq \fp_l$ gegeben. Wieder nach der \namereff{thm:noether-normalisierung} gibt es über $k$ algebraisch unabhängige $a_1,\dots, a_n\in A$ und $0\le h_0\le \dots \le h_l\le n$ mit
		\begin{itemize}
			\item $C = k[a_1,\dots, a_n]\subseteq A$ ganz und
			\item $\fp_i\cap C = (a_1,\dots, a_{h_i})$ für $i = 0,\dots, l$.
		\end{itemize}
		Wegen \ref{thm:9.16:i} muss $\dim A = n$ sein, also $l\le n$.
		
		Wir zeigen nun $h_i = i$ für alle $i = 0,\dots, l$.
		
		\begin{proof}
			Wegen der Ganzheit von $C\subseteq A$ und $\fp_i\subsetneq \fp_{i+1}$ gilt bereits $h_i<h_{i+1}$. Wir führen nun eine Induktion nach $i$.
			\begin{description}
				\item[$i = 0$:] Angenommen, $h_0\neq 0$. Dann ist $(a_1,\dots, a_{h_0}) \neq (0)$. Da die Erweiterung ganz ist, folgt $\fp_0 \neq (0)$ Also ist $\fp_0\notin \MinSpec(A)$ im Widerspruch zur Maximalität der Kette.
				
				Man vergleiche hierzu auch das folgende Bild, wobei $A$ ein Integritätsbereich und $k[a_1,\dots, a_n]$ normal ist.
				\begin{center}
					\begin{tikzcd}
						A  & (0) \arrow[mapsto]{d}\arrow[Subseteq]{r}& \fp_0\arrow[mapsto]{d}\\
						C\arrow[Subseteq]{u}{\text{ganz}\;\;} & (0) \arrow[Subseteq]{r}& (a_1,\dots, a_{h_0}) \\
						k[a_1,\dots, a_n] \arrow[Equals]{u}
					\end{tikzcd}
				\end{center}				
				\item[$i\to i+1$:] Angenommen, $h_i+1 < h_{i+1}$. Definiere $r := h_i$ und $s := h_{i+1}$. \namereff{thm:going down} impliziert nun, dass es ein $\ol{\fp}\in \Spec \fak A{\fp_i}$ mit $(0)\subsetneq \ol{\fp} \subsetneq \fak{\fp_{i+1}}{\fp_i}$ gibt. Betrachte das Urbild $\fp$ von $\ol{\fp}$ unter $A\to \fak{A}{\fp_i}$. Dann ist $\fp_i\subsetneq \fp\subsetneq \fp_{i+1}$, was aber ein Widerspruch zur Maximalität ist.
				
				Man vergleiche hierzu wieder auch das folgende Bild, wobei $A$ ein Integritätsbereich und $k[a_1,\dots, a_n]$ normal ist.
				\begin{center}
					\begin{tikzcd}[column sep=0.7cm]
						A \arrow{r} & \fak{A}{\fp_i} && \exists \,\ol{\fp}\arrow[mapsto]{dd}\arrow[Subsetneq]{r} & \fak{\fp_{i+1}}{\fp_i}\\
						C\arrow[Subseteq]{u}{\text{ganz}\;\;}\arrow{r} & \fak{C}{\fp_i\cap C}\arrow[Subseteq]{u}{\text{ganz}\;\;}\\
						k[a_1,\dots, a_n] \arrow[Equals]{u} & k[a_{r+1},\dots, a_n]\arrow[Equals]{u} & (0) \arrow[Subsetneq]{r} & (a_r+1)\arrow[Subsetneq]{r} & (a_{r+1},\dots, a_s)
					\end{tikzcd}
				\end{center}
			\end{description}
		\end{proof}
		Zeige nun noch $h_l = n$. Angenommen $h_l< n$. Dann existiert nach \namereff{thm:going up} ein $\fp\in\Spec A$ mit $\fp_l\subseteq \fp$ und $\fp\cap C = (a_1,\dots, a_n)$, also aufgrund der Ganzheit $\fp_l\subsetneq \fp$. Das ist wieder ein Widerspruch.
		
		Man vergleiche auch hierzu wieder auch das folgende Bild, wobei $A$ ein Integritätsbereich und $k[a_1,\dots, a_n]$ normal ist.
		\begin{center}
			\begin{tikzcd}
				A  &  \fp_l \arrow[mapsto]{d}\arrow[Subsetneq]{r} & \exists \,\fp\\
				C\arrow[Subseteq]{u}{\text{ganz}\;\;} & (a_1,\dots, a_{h_l}) \arrow[Subsetneq]{r} & (a_1,\dots, a_n)\\
				k[a_1,\dots, a_n] \arrow[Equals]{u}
			\end{tikzcd}
		\end{center}
	\end{enumerate}
\end{proof}

\begin{kor}
	Sei $A$ eine endlich erzeugte $k$-Algebra und ein Integritätsbereich. Für $\fm\in\Max A$ folgt dann $\dim A_\fm = \dim A$. 
\end{kor}
\begin{proof}
	Die Ungleichung \enquote{$\le$} ist klar. Für \enquote{$\ge$} wählen wir eine Primidealkette $\fq_0\subsetneq\dots\subsetneq \fq_d$ in $A_\fm$, wobei $d := \dim A_m$. Dann ist $\fq_0\cap A\subsetneq \dots \subsetneq \fq_d\cap A$ eine Primidelakette. Diese ist maximal wegen der Maximalität von $\fq_0\subsetneq \dots \subsetneq \fq_d$. Nach \cref{thm:9.16} folgt dann $d = \dim A$.
\end{proof}
\begin{kor} \label{kor:9.18}
	Sei $A$ eine endlich erzeugte $k$-Algebra und ein Integritätsbereich. Sei $x\in A\setminus \set{0}$, $\fp\in \Spec A$ mit $x\in \fp$ minimal. Dann ist $\dim \fak{A}{\fp} =\dim A-1$. 
\end{kor}
\begin{proof}
	Nach \namereff{thm:krulls hauptidealsatz} wissen wir, dass $\dim A_{\fp}\le 1$ sein muss. Da $A$ ein Integritätsbereich ist, gilt sogar $\dim A_{\fp}  = 1$ (denn wäre $\dim A_{\fp} = 0$, so wäre $\fp\in\MinSpec A = \set{(0)}$ und damit $x = 0$).
	
	Betrachte $\fak{A}{\fp}$ und definiere $d := \dim \fak{A}{\fp}$. Wir betrachten nun die durch das folgende Diagramm definierte Primidealkette in $\fak A\fp$.
	\begin{center}
		\begin{tikzcd}
			\fak A{\fp} && (0) \arrow[Subsetneq]{r}\arrow[mapsto]{d} & \ol{\fp_1}\arrow[Subsetneq]{r}\arrow[mapsto]{d} & \cdots \arrow[Subsetneq]{r} & \ol{\fp_d} \arrow[mapsto]{d} \\
			A \arrow{u} & (0)\arrow[Subsetneq]{r}& \fp \arrow[Subsetneq]{r} & \fp_1\arrow[Subsetneq]{r} & \cdots \arrow[Subsetneq]{r} & \fp_d &
		\end{tikzcd}
	\end{center}
	Somit folgt $\dim A \ge \dim \fak A{\fp}+1$. Aber es gilt auch schon Gleichheit, da $\dim A_{\fp} = 1$.
\end{proof}

\begin{beme}
	Anwendung von \cref{kor:9.18} auf Geometrie: Sei $X\subseteq \IA^n$ eine affine Varietät und $f\in \A(X)\setminus\set{0}$. Betrachte $\Z(f)\subseteq X$. Es gilt
	\[\set{\text{Irreduzible Komponenten von }\Z(f)} \xlongleftrightarrow{1:1} \set{\fp\in\Spec A(X)\given f\in\fp\text{ minimal}}.\]
	Nach \cref{kor:9.18} folgt für alle irreduziblen Komponenten $C\subseteq \Z(f)$ dann $\dim C = \dim X-1$. Insbesondere gilt $\dim \Z(f) = \dim X-1$. 
\end{beme}


\section{Varietäten}
Sei $k$ ein algebraisch abgeschlossener Körper.
\subsection{Räume mit $k$-Funktionengarben}
\begin{defi}
	Sei $X$ ein topologischer Raum. Eine \emph{Garbe} von $k$-Funktionen $\Os$ ist Tupel $(\Os(U))_{U\subseteq X \text{ offen}}$ von Unteralgebren
	\[\Os(U)\subseteq \Abb(U,k)\]
	sodass gilt:
	\begin{enumerate}
		\item (Unter-Prägarbe): Seien $V\subseteq U\subseteq X$ beide offen. Für $f\in\Os(U)$ gilt $f|_V \in \Os(V)$.
		\item (Verklebung, \enquote{gluing}): Sei $U\subseteq X$ offen und $\set{U_i}_{i\in I}$ eine offene Überdeckung von $U$ (das heißt $U_i\subseteq U$ offen und $\bigcup_{i\in I} U_i = U$). Falls $f\in\Abb(U,k)$ mit $f|_{U_i}\in\Os(U_i)$, so gilt $f \in\Os(U)$.
	\end{enumerate}
\end{defi}
\begin{beme}
	Sei $\Os$ eine Garbe von $k$-Funktionen auf $X$.
	\begin{enumerate}
		\item Seien $V\subseteq U\subseteq X$ offen. Dann ist $\Os(U)\to \Os(V), f\mapsto f|_V$ ein Homomorphismus von $k$-Algebren, da $\Abb(U,k)\to \Abb(V,k), f\mapsto f|_V$ ein solcher ist.
		\item Sei $U\subseteq X$ offen sowie $U = \bigcup U_i$ offene Überdeckung. Dann gilt:
		\begin{enumerate}
			\item Für $f,g\in\Os(U)$ mit $f|_{U_i} = g|_{U_i}$ folgt $f = g$.
			\item Seien $f_i\in\Os(U_i)$, sodass $f_i|_{U_i\cap U_j} = f_j|_{U_i\cap U_j}$ für alle $i,j$. Dann existiert genau ein $f\in\Os(U)$ mit $f|_{U_i} = f$. 
		\end{enumerate}
	\end{enumerate}
\end{beme}

\begin{defi}
	Ein Paar $(X, \Os_X)$ bestehend aus einem topolgischen Raum $X$ und Garbe $\Os_X$ von $k$-Funktionen heißt \emph{Raum mit $k$-Funktionengarbe}. 
\end{defi}

\begin{bsp}
	Sei $X$ ein topologischer Raum. Bespiele für $k$-Funktionengarben auf $X$:
	\begin{enumerate}
		\item $\Os(U) = \Abb(U,k)$ liefert Garbe von $k$-Funktionen.
		\item Falls $k = \IR$ oder $\IC$: $\Os(U) = \set{\text{stetige Abbildungen }U\to k}$
		\item Falls $k = \IC$, $X$ komplexe Mannigfaltigkeit: $\Os(U) = \set{\text{holomorphe Funktionen }U\to \IC}$
	\end{enumerate}
\end{bsp}
\begin{beme}
	Sei $X\subseteq \IA^n$ eine affine Varietät. Sei $h\in \A(X)$. Betrachte den Isomorphismus $\beta$ von $k$-Algebren:
	\begin{center}
		\begin{tikzcd}
			\A(X)\arrow{d}\arrow{r}{\beta} &\Hom(X,\IA^1) \arrow[Subseteq]{r}& \Abb(X,k)\arrow{d} & f \arrow[mapsto]{d}\\
			\A(X)[h^{-1}] &&\Abb(\D(h), k)& f|_{\D(h)}
		\end{tikzcd}
	\end{center}
	Es gilt $h(x) \neq 0$ für alle $x \in\D(h)$, also $h|_{\D(h)} \in \Abb(\D(h), k)^{\times}$. Die Komposition $\A(X)\to \Abb(\D(h), k)$ faktorisiert folglich über $\A(X)[h^{-1}]$ zu \begin{eqnarray*}
		\A(X)[h^{-1}] &\longto& \Abb(\D(h), k),\\
		\frac{f}{h^n}&\longmapsto& \left[x\mapsto \frac{f(x)}{h(x)^n}\right].
	\end{eqnarray*}
	Letztere Abbildung ist dabei injektiv. Falls $\frac {f(x)}{h(x)^n}  = 0$ (für alle $x\in\D(h)$), dann bedeutet das, dass $f(x) = 0$ für alle $x\in\D(h)$, also $f(x) h(x) = 0$ für alle $x\in X$. Daraus folgt $fh = 0$, da $\abs k  = \infty$. Also gilt $\frac{f}{h^n} = 0$ in $\A(X)$. 
\end{beme}

\begin{lem}
	Sei $X\subseteq \IA^n$ eine affine Varietät. Dann gibt es genau eine Garbe von $k$-Funktionen $\Os_X$ auf $X$, sodass für alle $h\in \A(X)$ \[\Os_X(\D(h)) = \A(X)[h^{-1}]\] gilt, wobei wir $\A(X)[h^{-1}]$ mit seinem Bild unter $\A(X)[h^{-1}]\hookrightarrow \Abb(\D(h), k)$ identifizieren.
\end{lem}


\lecture{9. Juli 2018}

%Nächstes Semester: Grundzüge der Darstellungstheorie (Homologische Algebra mit Anwendungen in Darstellungstheorie
% abelsche Kategorien
% Homologie, Kettenkomplex
% Darstellungen von endlich erzeugten Algebren)

%Algebra 2: algebraische Grppen, für mehr: Mail an Stroppel

\begin{proof}
	Zunächst zur Eindeutigkeit. Seien $\Os$ und $\Os'$ Garben von $k$-Funktionen mit $\Os(\D(h)) = \Os'(\D(h))$ (alle $h\in A(X)$). Sei $U\subseteq X$ offen. Dann existieren $h_i\in \A(X)$ mit $U = \D(h_1)\cup\dots\cup\D(h_N)$. Sei $f\in\Os(U)$. Dann gilt $f|_{\D(h_i)}\in\Os(\D(h_i)) = \Os'(\D(h_i))$. Per Verklebung folgt $f\in \Os'(U)$.
	
	Nun zur Existenz. Sei hierzu $U\subseteq X$ offen. Definiere \[\Os_X(U) := \set*{f\colon U\to k\given \substack{\forall x\in U :\, \exists V\subseteq U\text{ offen},\, x\in V: \\\exists g,s\in \A(X):\, \forall y\in V:\, s(y) \neq 0\text{ und } f(y) = \frac{g(y)}{s(y)}}}.\]
	$\Os_X$ ist eine Garbe von $k$-Funktionen:
	\begin{itemize}
		\item $\Os_X(U)\subseteq \Abb(U, k)$ ist eine Unteralgebra.
		\item Unter-Prägarbe: gilt, da definierende Eigenschaft an $f$ lokal ist
		\item Verklebung: gilt ebenfalls wegen Lokalität
	\end{itemize}
	Es verbleibt, $\Os_X(\D(h)) = \A(X)[h^{-1}]$ zu zeigen.
	\begin{description}
		\item[\glqq$\supseteq$\grqq:] Da $\A(X)[h^{-1}] = \set*{f\colon \D(h)\to k\given \exists g\in A(X), n\ge 0 :\forall x\in\D(h): f(x) = \frac{g(x)}{h(x)^n}}$, folgt $A(X)[h^{-1}] \subseteq \Os_X(\D(h))$.
		\item[\glqq$\subseteq$\grqq:] Sei $f\in\Os_X(\D(h))$. Betrachte
		$I := \set{a\in A(X)\given \exists g\in A(X): \forall x\in \D(h): g(x) = (af)(x)}$. $I$ ist ein Ideal in $\A(X)$.
		
		Wir zeigen nun $h\in\sqrt I$.
		\begin{proof}
			Nach \namereff{thm:hilberts nullstellensatz} folgt $\sqrt{I} = \I(\Z(I))$. Angenommen, $h\notin \I(\Z(I))$. Dann existiert ein $x\in \Z(I)$ mit $h(x) \neq 0$, also $x\in\D(h)$. Folglich existiert eine offene Umgebung $x\in V\subseteq \D(h)$ sowie $g, s\in \A(X)$, sodass $s(y) \neq 0$ und $f(y) = \frac{g(y)}{s(y)}$ für alle $y \in V$ gilt, was äquivalent ist zu \[\forall y\in V:\;s(y)f(y) = g(y)\] ist.
			Ohne Einschränkung ist $V = \D(u)$ für ein $u\in A(X)$. Insbesondere gilt für alle $y\in \D(u)$ dann $(usf)(y) = (ug)(y)$. Daraus folgt nun, dass $(usf)(y) = (ug)(y)$ auch für alle $y\in D(h)$ gilt, da $u(y) = 0$ für alle $y\in \D(h)\setminus \D(u)$ gilt.

			Damit ist nun $us\in I$, aber $us(x) \neq 0$, also $x\notin \Z(I)$. Das ist ein Widerspruch zu unser Konstruktion.
		\end{proof}
		
		Also gibt es $n\ge 0$ mit $h^n \in I$. Dann existiert ein $g\in \A(X)$ mit \[g|_{\D(h)} = (fh^n)|_{\D(h)}.\]
		Das bedeutet aber $f = \frac{g}{h^n}\in A(X)[h^{-1}]$.
		\qedhere
	\end{description}
\end{proof}

\begin{defi}
	Sei $X\subseteq \IA^n$ eine affine Varietät. Die Garbe $\Os_X$ von $k$-Funktionen heißt \emph{Strukturgarbe} oder \emph{Garbe von regulären Funktionen} auf $X$.
\end{defi}

\subsection{Morphismen}
\begin{defi}
	Seien $(X, \Os_X)$ und $(Y, \Os_Y)$ Räume mit $k$-Funktionengarben. Ein Morphismus $f\colon (X,\Os_X)\to (Y, \Os_Y)$ ist eine stetige Abbildung $f\colon X\to Y$, sodass \[g\circ f|_{f^{-1}(u)}\in \Os_X(f^{-1}(u))\] für alle offenen $U \subseteq Y$ und $g \in \Os_Y(U)$ gilt.
\end{defi}
\begin{bem}
	Die Abbildung $\Os_Y(U)\to\Os_X(f^{-1}(U)), g\mapsto g\circ f|_{f^{-1}(U)}$ ist ein Homomorphismus von $k$-Algebren.
\end{bem}
\begin{beme} \label{bem:10.9}
	Seien $X\subseteq \IA^n$ und $Y\subseteq \IA^m$ affine Varietäten und $f\colon X\to Y$ ein Morphismus von affinen Varietäten. Sei $f^*\colon \A(Y)\to \A(X)$.
	Frage: Ist $f$ ein Morphismus von Räumen mit $k$-Funktionengarben?
	\begin{enumerate}
		\item \label{bem:10.9:i} Sei $k\in \A(Y)$. Betrachte $\D_Y(h)$ (die offene Hauptmenge von $h$ in $Y$). Wir erhalten das folgende Diagramm.
		\begin{center}
			\begin{tikzcd}
				\A(Y)\arrow{r}{f^*}\arrow{d} & \A(X)\arrow{d}\\
				\A(Y)[h^{-1}] \arrow[dashrightarrow]{r}{\exists!f^*}& \A(X)[(f^*h)^{-1}]
			\end{tikzcd}
		\end{center}
		Sei $g\in\Os_Y(\D_Y(h)) = \A(X)[h^{-1}]$. Dann gilt \[f^*g \in A(X)[(f^*h)^{-1}] = \Os_X(\D_X(f^*h)) = \Os_X(f^{-1}(\D_Y(h))).\]
		Gleichzeitig gilt $f^*g = g\circ f|_{f^{-1}(\D(h))}$
		\item Sei $U\subseteq Y$ offen, sei $g\in\Os_Y(U)$. Also gibt es elemente $h_i\in \A(Y)$ mit $U = \D(h_1)\cup\dots\cup\D(h_N)$. Setze $U_i := \D(h_i)$. Betrachte $g|_{U_i}\in\Os_Y(U_i)$. Nach \ref{bem:10.9:i} gilt $g|_{U_i}\circ f|_{f^{-1}(U_i)}\in \Os_X(f^{-1}(U_i))$.
		
		Aber es gilt $(g\circ f|_{f^{-1}(U)})|_{f^{-1}(U_i)} = g|_{U_i}\circ f|_{f^{-1}(U_i)}$. Da $f^{-1}(U) = \bigcup f^{-1}(U_i)$ folgt mit Verklebung $g\circ f|_{f^{-1}(U)}\in\Os_X(f^{-1}(U))$.
	\end{enumerate}
	Also: Ja, $f$ ist ein Morphismus von Räumen mit $k$-Funktionengarben.
\end{beme}
\begin{prop} \label{prop:10.10}
	Seien $X\subseteq\IA^n, Y\subseteq \IA^m$ affine Varietäten. Dann ist die Zuordnung
	\begin{eqnarray*}
		\Hom(X,Y) &\longto& \Hom((X,\Os_X), (Y, \Os_Y)), \\
		f &\longmapsto& f
	\end{eqnarray*}
	aus \cref{bem:10.9} eine Bijektion.
\end{prop}
\begin{proof}
	Die Injektivität ist klar. Für die Surjektivität sei $f\colon (X,\Os_X)\to (Y,\Os_Y)$ ein Morphismus von Räumen mit $k$-Funktionengarben. Definiere $\phi\colon \A(Y)\to \A(X)$ durch
	\begin{center}
		\begin{tikzcd}
			\A(Y)\arrow{r}{\phi} \arrow[Equals]{d} & \A(X)\arrow[Equals]{d}\\
			\Os_Y(Y)\arrow{r}{g\mapsto g\circ f} & \Os_X(X).
		\end{tikzcd}
	\end{center}
	Nach der Definition von Morphismen von Räumen mit $k$-Funktionengarben ist $\phi$ wohldefiniert und ein $k$-Algebrenhomomorphismus.
	
	Betrachte $\phi^{\#}\in \Hom(X,Y)$. Zeige $f = \phi^{\#}$. Zur Erinnerung: $\phi^{\#}$ entsteht durch einen Lift $\Phi$ im folgenden Diagramm.
	\begin{center}
		\begin{tikzcd}
			\Os_{\IA^m}(\IA^m) \arrow{ddd}{g \mapsto g|_Y} \arrow{rrr}{g \mapsto g \circ F} \arrow[equal]{dr} &&& \Os_{\IA^n}(\IA^n) \arrow{ddd}[swap]{h \mapsto h|_X} \arrow[equal]{dl} \\
			&k[s_1,\dots, s_m]\arrow[dashrightarrow]{r}{\exists \Phi} \arrow{d} & k[t_1,\dots, t_n]\arrow{d}\\
			&\A(X) \arrow{r}{\phi}& \A(X) \\
			\Os_Y(Y) \arrow{rrr}{h \mapsto h\circ f} \arrow[equal]{ur} &&& \Os_X(X) \arrow[equal]{ul}
		\end{tikzcd}
	\end{center}
	Betrachte $F\colon \IA^n\to \IA^m$. Es gilt $\phi^{\#}(x) = F(x)$ für alle $x\in X$. Für alle $g\in \Os_{\IA^m}(\IA^m)$ und $x\in X$ gilt $g(F(x)) = g(f(x))$, wie durch Verfolgen des äußeren Weges im vorherigen Diagramm klar ist.
	
	Daraus folgt nun $F(x) = f(x)$ für alle $x\in X$. Damit folgt die Behauptung, da $\phi^{\#}(x) = F(x)$.
	\qedhere
\end{proof}

Das rechtfertigt nun die folgende\\
\textbf{Re-Definition.} Sei $(X,\Os_X)$ ein Raum mit $k$-Funktionengarbe. $(X,\Os_X)$ heißt \emph{affine Varietät}, falls eine irreduzible algebraische Teilmenge $Y\subseteq \IA^n$ existiert, sodass $(X,\Os_X)\cong (Y,\Os_Y)$ (als Räume mit $k$-Funktionengarben) gilt.


\subsection{Teilräume}
\begin{lem} \label{lem:10.11}
	Sei $(X,\Os_X)$ ein Raum mit $k$-Funktionengarbe sowie $Y\subseteq X$ Teilmenge. Versehe $Y$ mit Relativtopologie von $X$. Betrachte die Teilmengeninklusion $i\colon Y\to X$ (stetig). Dann existiert genau eine $k$-Funktionengarbe $\Os_X|_Y$ auf $Y$, sodass
	\begin{enumerate}
		\item \label{lem:10.11:i} $i\colon (Y,\Os_X|_Y)\to (X,\Os_X)$ ein Morphismus ist und
		\item \label{lem:10.11:ii} für alle Morphismen von Räumen mit $k$-Funktionengarben $f\colon (Z,\Os_Z)\to (X,\Os_X)$ mit $f(Z)\subseteq Y$ das Diagramm
		\begin{center}
			\begin{tikzcd}
				(Z,\Os_Z) \arrow{r}{f}\arrow[dashrightarrow]{rd}[swap]{\exists!\tilde{f}} & (X,\Os_X)\\
				& (Y,\Os_X|_Y)\arrow{u}{i}
			\end{tikzcd}
		\end{center}
		kommutiert.
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[Eindeutigkeit:] Seien $\Os, \Os'$, sodass \ref{lem:10.11:i} und \ref{lem:10.11:ii} gelten. 
		\begin{center}
			\begin{tikzcd}
				(Y,\Os) \arrow{rd}[swap]{i}\arrow[dashed,leftrightarrow]{r}{\exists! i_1}[swap]{\exists!i_2} & (Y, \Os')\arrow{d}{i}\\
				& (X,\Os_X)
			\end{tikzcd}
		\end{center}
		Dann ist $i_1 = i_2 = \id_Y$ (als Abbildungen), also $\Os(U) \subseteq \Os'(U)$ und $\Os'(U)\subseteq \Os(U)$, da $i_1$ und $i_2$ Morphismen sind.

\lecture{12. Juli 2018}

		\item[Existenz:] Sei $U\subseteq Y$ offen. Dann existiert ein offenes $V\subseteq X$ mit $Y\cap V = U$. Wir beobachten, dass $g\in\Os_X(V)$. Dann ist $g|_{V\cap Y = U} \in \Os_Y(U)$. Problem ist die Verklebung, weshalb wir lokal vorgehen. Definiere
		\[(\Os_X|_Y)(U) := \set*{g\colon U\to k\given \substack{\forall y\in U:\,\exists V'\subseteq X\text{ offen},\, g\in V', \\\exists g'\in \Os_X(V'):\, g'|_{U\cap V'} = g|_{K\cap V'}}}.\]
		Wir zeigen, dass $\Os_X|_Y$ eine Garbe von $k$-Funktionen ist.
		\begin{itemize}
			\item $(\Os_X|_Y)(U) \subseteq \Abb(U,k)$ Unteralgebra: Klar.
			\item Unter-Prägarbe: Klar.
			\item Verklebung: Sei $U = \bigcup U_i$ eine offene Überdeckung und $g\in \Abb(U,k)$ mit $g|_{U_i} \in (\Os_X|_Y)(U_i)$. Wir behaupten $g\in (\Os_X|_Y)(U)$. Sei hierzu $y\in U$. Dann existiert ein $i$ mit $y\in U_i$. Nach Definition existiert ein offenes $V_i'\subseteq X$, $y\in V_i'$ und es existiert ein $g_i'\in \Os_X(V_i')$ mit $g_i'|_{U_i\cap V_i'} = g|_{U_i\cap V_i'}$. Definiere nun $V' := V_i'\cap V\cap V_i$ (wobei $V\subseteq X$ offen, sodass $Y\cap V = U$ und $V_i\subseteq X$ offen, sodass $Y\cap V_i = U_i$).
			
			Dann folgt $g|_{V'\cap U} = g_i'|_{V'\cap U}$ (da $V'\cap U\subseteq V_i'\cap U_i)$.
		\end{itemize}
		Damit ist die Existenz gezeigt.
		
		Tatsächlich gilt auch \ref{lem:10.11:i} nach Konstruktion.
		
		Zu \ref{lem:10.11:ii}: Sei $f\colon (Z, \Os_Z)\to (X,\Os_X)$ ein Morphismus mit $f(Z)\subseteq Y$. Definiere $\tilde f\colon Z\to Y, z\mapsto f(z)$. Wir zeigen, dass $\tilde f$ ein Morphismus ist. Sei $U\subseteq Y$ offen sowie $g\in (\Os_X|_Y)(U)$.
		
		Wir zeigen nun $g\circ \tilde f|_{\tilde f^{-1}(U)}\in \Os_Z(\tilde f^{-1}(U))$.
		\begin{proof}
			Da $g\in (\Os_X|_Y)(U)$ ist, existiert für alle $y\in U$ ein offenes $V_y\subseteq X$ mit $y\in V_y$ und ein $g_y\in \Os_X(V_y)$ mit $g_y|_{V_y\cap U} = g|_{V_y\cap U}$. Wie vorher sei $V\subseteq X$ offen mit $V\cap Y = U$. Ohne Einschränkung sei $V_y\subseteq V$. Dann gilt $U\cap V_y = Y\cap V_y$. Da $f\colon (Z,\Os_Z)\to (X,\Os_X)$ ein Morphismus ist, gilt $g_y\circ f|_{f^{-1}(V_y)} \in \Os_Z(f^{-1}(V_y))$. Wegen $f(Z)\subseteq Y$ folgt nun $f^{-1}(V_y) = f^{-1}(V_y\cap Y) = \tilde f^{-1}(V_y\cap Y)$.

			Also gilt $(g\circ \tilde f|_{\tilde f^{-1}(U)})|_{\tilde f^{-1}(V_y\cap Y)} = g|_{V_y\circ Y}\circ f|_{f^{-1}(V_y)} = g_y\circ f|_f^{-1}(V_y) \in \Os_Z(f^{-1}(V_y)) = \Os_Z(\tilde f^{-1}(V_y\cap Y))$.
		\end{proof}
		
		Da $\tilde f^{-1}(U) = \bigcup_{y\in U} \tilde f^{-1}(V_y\cap Y)$ folgt mit der Verklebung schließlich \[g\circ \tilde f|_{\tilde f^{-1}(U)} \in \Os_Z(\tilde f^{-1}(U)).\qedhere\]
	\end{description}
\end{proof}

\begin{beme}
	Sei $(X,\Os_X)$ Raum mit $k$-Funktionengarbe sowie $Y\subseteq X$.
	\begin{enumerate}
		\item Falls $Y\subseteq X$ offen ist, so folgt $(\Os_X|_Y)(U) = \Os_X(U)$.
		
		Dies gilt, da für offene $U\subseteq Y$ dann $U\mapsto \Os_X(U)$ eine Garbe von $k$-Funktionen auf $Y$ definiert, welche die universelle Eigenschaft aus \cref{lem:10.11} erfüllt.
		\item Ist $Z\subseteq Y$, so gilt $(\Os_X|_Y)|_Z = \Os_X|_Z$. 
	\end{enumerate}
\end{beme}

\begin{lem}
	Sei $X\subseteq \IA^n$ eine irreduzible algebraisch Teilmenge. 
	\begin{enumerate}
		\item Sei $Y\subseteq X$ abgeschlossen und irreduzibel. Dann ist $\Os_X|_Y = \Os_Y$. \label{lem:10.13:i}
		\item Sei $h\in \A(X)$. Sei $Y = \set {(x,z)\in X\times \IA^1\given h(x)\cdot z = 1}\subseteq X\times \IA^1$ (abgeschlossen und irreduzibel). Dann ist $Y\subseteq \IA^{n+1}$ eine irreduzible algebraische Teilmenge. Es gilt $\A(Y) \cong \A(X)[h^{-1}]$. Die Abbildung $f\colon Y\to D(h), (x,z)\mapsto x$ ist ein Homöomorphismus und ein Isomorphismus \[f\colon (Y,\Os_Y)\longto (D(h), \Os_X|_{D(h)}).\] \label{lem:10.13:ii}
	\end{enumerate}
\end{lem}
\begin{proof}
	\leavevmode
	\begin{enumerate}[label=\ref{lem:10.13:\roman*}]
		\item Sei $h\subseteq X$. Zeige $(\Os_X|_Y)(U) = \Os_Y(U)$. 
		\begin{description}
			\item[\glqq$\subseteq$\grqq:] Sei $i\colon Y\to X$ die Inklusionsabbildung. Da $i$ ein Morphismus von algebraischen Teilmengen ist, ist nach \cref{prop:10.10} auch $i\colon (Y,\Os_Y)\to (X,\Os_X)$ ein Morphismus von Räumen mit $k$-Funktionengarben. Andererseits ist $i\colon (Y,\Os_X|_Y)\to (X,\Os_X)$ auch ein Morphismus. Nach der universellen Eigenschaft (\cref{lem:10.11} \ref{lem:10.11:ii}) erhalten wir
			\begin{center}
				\begin{tikzcd}
					(Y,\Os_Y) \arrow{r}{i}\arrow[dashed]{rd}[swap]{\exists!\tilde i} & (X,\Os_X)\\
					& (Y, \Os_Y|_Y). \arrow{u}{i}
				\end{tikzcd}
			\end{center}
			Es folgt $\tilde i = \id_Y$ (als Abbildung von Mengen). Sei also $U\subseteq Y$ offen und $g\in(\Os_X|_Y)(U)$. Dann gilt $g = g\circ \tilde i|_U \in \Os_Y(U)$.
			\item[\glqq$\supseteq$\grqq:] Sei $g\in\Os_Y(U)$. Sei $y\in U$. Dann existiert ein $\ol{h}\in \A(Y) = \fak {\A(X)}{\I(Y)}$ mit $y\in \D_Y(\ol{h})\subseteq U$. Da $g|_{\D_y(\ol{h})} \in \Os_Y(\D(\ol{h})) = \A(Y)[h^{-1}]$, existieren $\ol{f}\in \A(Y)$ und $r\ge 0$ mit $\ol{g} = \frac {\ol f}{\ol h^r}$.

			Wir wählen nun Urbilder $f,h$ von $\ol f, \ol h$ unter $\A(X)\to \A(Y)$ (also $\ol{f} = f|_Y$ usw.). Betrachte $g' := \frac f{h^r} \in \A(X)[h^{-1}] = \Os_X(\D_X(h))$. Definiere $V' := \D_X(h)$. Dann ist $V'\cap Y = D_Y(\ol{h})$ und $g'|_{V'\cap Y} = g|_{V'\cap Y}$. Also gilt $g\in (\Os_X|_Y)(U)$.
		\end{description}
		\item In Aufgabe 3 (i) auf \href{http://www.math.uni-bonn.de/ag/stroppel/Franzen_Algebra_1_Uebung/Blatt10a.pdf}{Übungsblatt 10} wurde bereits bewiesen, dass \begin{itemize}
			\item $Y$ irreduzibel und abgeschlossen in $\IA^{n+1}$,
			\item $\A(Y)\cong \A(X)[h^{-1}]$ und
			\item $f$ ein Homöomorphismus ist. 
		\end{itemize}
		Es verbleibt zu zeigen, dass \begin{enumerate}
			\item $f$ ein Morphismus von Räumen mit $k$-Funktionengarben und \label{lem:10.13:ii:a}
			\item $f^{-1}$ ein Morphismus von Räumen mit $k$-Funktionengarben ist. \label{lem:10.13:ii:b}
		\end{enumerate}
		Beweis:
		\begin{enumerate}[label=\ref{lem:10.13:ii:\alph*}]
			\item Wir haben das kommutative Diagramm
				\begin{center}
					\begin{tikzcd}
						X\times \IA^1\arrow{r}{{\pr}_X} & X\\
						Y \arrow[Subseteq]{u}[swap]{\;\;i}{\text{abgeschlossen}\;\;}\arrow{r}{f} & \D(h). \arrow[Subseteq]{u}[swap]{\;\;\text{offen}}
					\end{tikzcd}
				\end{center}
				Betrachte die Komposition $\ol{f}\colon Y \to X, \ol{f} =  {\pr}_X\circ i$. Also ist $\ol{f}$ ein Morphismus von algebraischen Teilmengen. Nach \cref{prop:10.10} ist $\ol{f}\colon (Y,\Os_Y)\to (X,\Os_X)$ ein Morphismus. Es gilt $\ol{f}(Y) = \D(h)$ und mit \cref{lem:10.11} kommutiert das folgende Diagramm.
				\begin{center}
					\begin{tikzcd}
						(Y,\Os_Y) \arrow{r}{\ol{f}}\arrow[dashed]{rd}[swap]{\exists!\tilde f} & (X,\Os_X)\\
						& (\D(h), \Os_X|_{\D(h)}) \arrow{u}
					\end{tikzcd}
				\end{center}
				Als Abbildung gilt nun $\tilde f = f$.
				
			\item Es gilt $f^{-1}\colon \D(h)\to Y, x\mapsto \left(x,\frac 1{h(x)}\right)$. Es ist zu zeigen, dass $f^{-1}$ ein Morphismus von Räumen mit $k$-Funktionengarben ist. Sei $U\subseteq Y$ offen sowie $g\in \Os_Y(U)$.
			
			Ohne Einschränkung gilt $U = \D_Y(u)$ für ein $u\in \A(Y) \cong \A(X)[h^{-1}]$, was bedeutet, dass es $a\in \A(X)$ und $r\ge 0$ gibt, sodass $u\mapsto \frac a{h^r}$ unter obigem Isomorphismus.
			
			Sei also $u\colon Y\to k, (x,z)\mapsto \frac{a(x)}{h(x)^r} = a(x)z^r$. Damit gilt nun $\D_Y(u) = \set{(x,z)\in Y\given a(x) \neq 0}$ und $(f^{-1})^{-1}(\D_Y(u)) = f(\D_Y(u)) = \set {x\in \D_X(h)\given a(x) \neq 0} = \D_X(ah)$.
			
			Es gilt $g\in \Os_Y(\D_Y(a)) \cong A(X)[h^{-1}]$. Also existieren $g'\in \A(X)$ und $n\ge 0$ mit $g\mapsto \frac{g'}{(ah)^n}$. Das heißt $g\colon \D_Y(h)\to k, (x,z)\mapsto \frac{g'(x)}{(a(x)h(x))^n} = \frac{g'(x)z^n}{a(x)^n}$.
			
			Wir erhalten also für $g\circ f^{-1}|_{(f^{-1})^{-1}(\D_Y(a))} \colon \D_X(ah)\to k, x\mapsto \frac{g'(x)}{a(x)^nh(x)^n}$ (wobei $(f^{-1})^{-1}(\D_Y(a)) = \D_X(ah)$ gilt) dann $g\circ f^{-1}|_{(f^{-1})^{-1}(\D_Y(a))} \in \Os_X(\D_X(ah)) = \Os_X((f^{-1})^{-1}(\D_Y(u)))$ folgt, also $f^{-1}\colon (\D(h), \Os_X|_{\D(h)}) \to (Y,\Os_Y)$ ein Morphismus ist.
			\qedhere
		\end{enumerate}
	\end{enumerate}
\end{proof}

\subsection{Prävarietäten}

\begin{defi}
	\leavevmode
	\begin{enumerate}
		\item Sei $(X,\Os_X)$ ein Raum mit $k$-Funktionengarbe. $(X,\Os_X)$ heißt \emph{Prävarietät} (\enquote{pre-variety}), wenn es eine endliche offene Überdeckung $X = U_1\cup\dots\cup U_n$ gibt, sodass $(U_i,\Os_X|_{U_i})$ für jedes $1\le i \le n$ eine affine Varietät ist.
		\item Seien $(X,\Os_X)$ und $(Y, \Os_Y)$ Prävarietäten. Ein Morphismus $f\colon (X,\Os_X)\to (Y,\Os_Y)$ ist ein Morphismus von Räumen mit $k$-Funktionengarben.
	\end{enumerate}
\end{defi}

% TODO: rest einfügen

\end{document}

%Infos zur Klausur:  Do 2.8. 9-11 Uhr Großer Hörsaal

%Zulassungslister und Einteilung nächste Woche
%Aufgaben: wie einfache Übungsaufgaben
%Relevant: Paragraphen 1 bis 9, Übungsaufgaben
%Keine Hilfsmittel

%Donnerstag 19.7. Vorlesung im kleinen Hörsaal


%\begin{bsp}
%	Das hier ist ein Beispiel-Diagramm:

%	\begin{tikzcd}
%		X \arrow{rd}[swap]{g\circ f} \arrow{r}{f} & Y \arrow{d}{g} \\
%		W \arrow{u}	& Z
%	\end{tikzcd}
%\end{bsp}