\usepackage{amsthm}
\usepackage[noabbrev,capitalize,ngerman]{cleveref}

\newcounter{thmcounter}[subsection]
\newcounter{defcounter}[subsection]
\newcounter{bspcounter}[subsection]

%Hack to also show the subsection
\renewcommand{\thethmcounter}{\arabic{subsection}.\arabic{thmcounter}}
\renewcommand{\thedefcounter}{\arabic{subsection}.\arabic{defcounter}}
\renewcommand{\thebspcounter}{\arabic{subsection}.\arabic{bspcounter}}

\renewcommand{\thesection}{\Roman{section}}
\renewcommand{\thesubsection}{\arabic{subsection}}

\usepackage{chngcntr}
\counterwithout{subsection}{section}

\newtheoremstyle{cplain}
{11pt}
{\parskip}
{\itshape}
{}
{\bfseries}
{.}
{ }
{\thmname{#1} \thmnumber{#2}\thmnote{ \textmd{(#3)}}}

\newtheoremstyle{cdef}
{11pt}
{\parskip}
{}
{}
{\bfseries}
{.}
{ }
{\thmname{#1} \thmnumber{#2}\thmnote{ \textmd{(#3)}}}

\theoremstyle{cdef}
\newtheorem{defi}[defcounter]{Definition}
\crefname{defi}{Definition}{Definitionen}

\theoremstyle{remark}
\newtheorem*{bem}{Bemerkung}

\theoremstyle{cplain}
\newtheorem{satz}[thmcounter]{Satz}
\crefname{satz}{Satz}{SÃ¤tzen}

\theoremstyle{cdef}
\newtheorem{bsp}[bspcounter]{Beispiel}
\crefname{bsp}{Beispiel}{Beispielen}

\theoremstyle{cplain}
\newtheorem{kor}[thmcounter]{Korollar}
\crefname{kor}{Korollar}{Korollaren}

\theoremstyle{cplain}
\newtheorem{anw}[thmcounter]{Anwendung}
\crefname{anw}{Anwendung}{Anwendungen}

\theoremstyle{cplain}
\newtheorem{lem}[thmcounter]{Lemma}

\newcommand{\lecture}[1]{
	\vspace{0.5cm}
	\vbox{
		\noindent\makebox[\textwidth]{
			\begin{minipage}{\textwidth}
				\flushright
				\ifdefined \@lastLectureDate
					{\footnotesize[\@lastLectureDate]}
					\vspace{2pt}
				\fi
				\hrule
				\vspace{2pt}
				{\footnotesize[#1]} 
			\end{minipage}
		}
	}
	\def\@lastLectureDate{#1}
}

\newcommand{\namereff}[1]{\textsc{\nameref{#1}}}	